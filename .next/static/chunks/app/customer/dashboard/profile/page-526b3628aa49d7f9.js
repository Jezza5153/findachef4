(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7982,8226],{5459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var a={};r.r(a);var s=r(95155),l=r(90221),o=r(62177),n=r(55594),i=r(30285),d=r(17759),c=r(62523),u=r(88539),m=r(47262),f=r(66695),p=r(12115),h=r(87481),x=r(66766),g=r(40157);let y=(0,g.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),v=(0,g.A)("CookingPot",[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M20 12v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8",key:"u0tga0"}],["path",{d:"m4 8 16-4",key:"16g0ng"}],["path",{d:"m8.86 6.78-.45-1.81a2 2 0 0 1 1.45-2.43l1.94-.48a2 2 0 0 1 2.43 1.46l.45 1.8",key:"12cejc"}]]),b=(0,g.A)("Microwave",[["rect",{width:"20",height:"15",x:"2",y:"4",rx:"2",key:"2no95f"}],["rect",{width:"8",height:"7",x:"6",y:"8",rx:"1",key:"zh9wx"}],["path",{d:"M18 8v7",key:"o5zi4n"}],["path",{d:"M6 19v2",key:"1loha6"}],["path",{d:"M18 19v2",key:"1dawf0"}]]),j=(0,g.A)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);var N=r(15121);let A=(0,g.A)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),w=(0,g.A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var C=r(50172),D=r(28294),E=r(37607),k=r(14437),I=r(83662),P=r(59119),R=r(77223),S=r(90010),F=r(59576),T=r(56104),M=r(35317),B=r(90858),U=r(93004);let _=[{value:"Oven",label:"Oven",icon:(0,s.jsx)(y,{className:"mr-2 h-5 w-5"})},{value:"Stovetop",label:"Stovetop",icon:(0,s.jsx)(v,{className:"mr-2 h-5 w-5"})},{value:"Microwave",label:"Microwave",icon:(0,s.jsx)(b,{className:"mr-2 h-5 w-5"})},{value:"Blender",label:"Blender/Mixer",icon:(0,s.jsx)(a.Blender,{className:"mr-2 h-5 w-5"})},{value:"BBQGrill",label:"BBQ Grill",icon:(0,s.jsx)(j,{className:"mr-2 h-5 w-5"})},{value:"StandardPotsPans",label:"Standard Pots & Pans",icon:(0,s.jsx)(N.A,{className:"mr-2 h-5 w-5"})},{value:"Refrigerator",label:"Refrigerator",icon:(0,s.jsx)(A,{className:"mr-2 h-5 w-5"})},{value:"Freezer",label:"Freezer",icon:(0,s.jsx)(w,{className:"mr-2 h-5 w-5"})}],O=n.Ik({name:n.Yj().min(2,{message:"Name must be at least 2 characters."}),phone:n.Yj().optional(),profilePictureFile:n.Nl(File).optional().refine(e=>!e||e.size<=2097152,"Max file size is 2MB.").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only JPG, PNG, WEBP files are allowed."),kitchenEquipment:n.YO(n.Yj()).optional(),addressDetails:n.Yj().optional(),defaultEventType:n.Yj().optional(),defaultPax:n.au.number().optional(),defaultBudgetAmount:n.au.number().optional(),defaultFrequency:n.Yj().optional(),defaultTheme:n.Yj().optional(),defaultDietaryNotes:n.Yj().optional(),defaultExtraComments:n.Yj().optional()});function z(){let{user:e,userProfile:t,loading:r,profileLoading:a}=(0,F.A)(),[n,g]=(0,p.useState)(null),[y,v]=(0,p.useState)(null),[b,j]=(0,p.useState)(!1),{toast:A}=(0,h.dj)(),w=r||a,z=(0,o.mN)({resolver:(0,l.u)(O),defaultValues:{name:"",phone:"",kitchenEquipment:[],addressDetails:"",defaultEventType:"",defaultPax:1,defaultBudgetAmount:50,defaultFrequency:"Once",defaultTheme:"",defaultDietaryNotes:"",defaultExtraComments:""}});(0,p.useEffect)(()=>{!w&&e&&(t&&"customer"===t.role?(z.reset({name:t.name||e.displayName||"",phone:t.phone||"",kitchenEquipment:t.kitchenEquipment||[],addressDetails:t.addressDetails||"",defaultEventType:t.defaultEventType||"",defaultPax:t.defaultPax||1,defaultBudgetAmount:t.defaultBudgetAmount||50,defaultFrequency:t.defaultFrequency||"Once",defaultTheme:t.defaultTheme||"",defaultDietaryNotes:t.defaultDietaryNotes||"",defaultExtraComments:t.defaultExtraComments||""}),g(t.profilePictureUrl||e.photoURL||null)):e&&(z.reset({name:e.displayName||"",phone:e.phoneNumber||""}),g(e.photoURL||null)))},[e,t,w,z]);let q=r=>{var a;let s=null==(a=r.target.files)?void 0:a[0];if(s){z.setValue("profilePictureFile",s,{shouldValidate:!0}),v(s);let e=new FileReader;e.onloadend=()=>{g(e.result)},e.readAsDataURL(s)}else z.setValue("profilePictureFile",void 0),v(null),g((null==t?void 0:t.profilePictureUrl)||(null==e?void 0:e.photoURL)||null)},L=async r=>{if(!e)return void A({title:"Authentication Error",description:"You must be logged in to update your profile.",variant:"destructive"});j(!0),console.log("CustomerProfilePage: Saving profile for UID:",e.uid,"Data:",r);let a=(null==t?void 0:t.profilePictureUrl)||e.photoURL||"";try{if(y){let r=null==t?void 0:t.profilePictureUrl;if(r&&r.startsWith("https://firebasestorage.googleapis.com"))try{let e=(0,B.KR)(T.IG,r);await (0,B.XR)(e),console.log("CustomerProfilePage: Deleted old profile picture from Storage.")}catch(e){"storage/object-not-found"!==e.code&&console.warn("CustomerProfilePage: Error deleting old profile picture, continuing...",e)}let s=y.name.split(".").pop()||"jpg",l="users/".concat(e.uid,"/profilePicture.").concat(s),o=(0,B.KR)(T.IG,l);A({title:"Uploading Profile Picture...",description:"Please wait."});let n=(0,B.bp)(o,y);await new Promise((e,t)=>{n.on("state_changed",null,e=>{console.error("CustomerProfilePage: Profile picture upload error:",e),t(e)},async()=>{try{a=await (0,B.qk)(n.snapshot.ref),console.log("CustomerProfilePage: Profile picture uploaded successfully:",a),e()}catch(e){console.error("CustomerProfilePage: Error getting download URL for profile picture:",e),t(e)}})})}let s={id:e.uid,name:r.name,email:e.email,phone:r.phone||"",profilePictureUrl:a,kitchenEquipment:r.kitchenEquipment||[],addressDetails:r.addressDetails||"",defaultEventType:r.defaultEventType||"",defaultPax:r.defaultPax||1,defaultBudgetAmount:r.defaultBudgetAmount||0,defaultFrequency:r.defaultFrequency||"",defaultTheme:r.defaultTheme||"",defaultDietaryNotes:r.defaultDietaryNotes||"",defaultExtraComments:r.defaultExtraComments||"",role:"customer",updatedAt:(0,M.O5)()},l=(0,M.H9)(T.db,"users",e.uid);(await (0,M.H9)(T.db,"users",e.uid).get()).exists()||(s.createdAt=(0,M.O5)()),await (0,M.BN)(l,s,{merge:!0}),console.log("CustomerProfilePage: Firestore profile saved/merged successfully."),(e.displayName!==r.name||a&&e.photoURL!==a)&&(await (0,U.r7)(e,{displayName:r.name,photoURL:a}),console.log("CustomerProfilePage: Firebase Auth profile (displayName/photoURL) updated.")),v(null),A({title:"Profile Updated Successfully",description:"Your customer profile has been saved."})}catch(e){console.error("CustomerProfilePage: Error updating profile:",e),A({title:"Update Failed",description:e instanceof Error?e.message:"Could not save your profile. Please try again.",variant:"destructive"})}finally{j(!1)}};return w?(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,s.jsx)(C.A,{className:"mr-2 h-8 w-8 animate-spin text-primary","data-ai-hint":"loading spinner"})," Loading Profile..."]}):(0,s.jsx)("div",{className:"space-y-8",children:(0,s.jsxs)(f.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(f.aR,{children:[(0,s.jsxs)(f.ZB,{className:"text-2xl font-bold flex items-center",children:[(0,s.jsx)(D.A,{className:"mr-3 h-7 w-7 text-primary","data-ai-hint":"user profile icon"})," My Customer Profile"]}),(0,s.jsx)(f.BT,{children:"Manage your contact details, kitchen setup, and default event preferences."})]}),(0,s.jsx)(f.Wu,{children:(0,s.jsx)(d.lV,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(L),className:"space-y-8",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[(0,s.jsxs)("div",{className:"md:col-span-1 flex flex-col items-center",children:[(0,s.jsx)(x.default,{src:n||"https://placehold.co/150x150.png",alt:z.getValues("name")||(null==e?void 0:e.displayName)||"Customer",width:150,height:150,className:"rounded-full object-cover shadow-md mb-4","data-ai-hint":"person avatar"},n),(0,s.jsx)(d.zB,{control:z.control,name:"profilePictureFile",render:()=>(0,s.jsxs)(d.eI,{className:"w-full",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.p,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:q,className:"hidden",id:"customerProfilePictureUpdate",disabled:b}),(0,s.jsx)(i.$,{type:"button",variant:"outline",asChild:!0,className:"w-full",disabled:b,children:(0,s.jsxs)("label",{htmlFor:"customerProfilePictureUpdate",className:"cursor-pointer flex items-center justify-center",children:[(0,s.jsx)(E.A,{className:"mr-2 h-4 w-4"})," Change Photo"]})})]})}),(0,s.jsx)(d.C5,{className:"text-center"})]})})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,s.jsx)(d.zB,{control:z.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Full Name"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"e.g., John Doe",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Email Address"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"email",value:(null==e?void 0:e.email)||"",readOnly:!0,disabled:!0})}),(0,s.jsx)(d.Rr,{children:"Your email address cannot be changed here."})]}),(0,s.jsx)(d.zB,{control:z.control,name:"phone",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Phone Number (Optional)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"tel",placeholder:"e.g., 555-123-4567",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,s.jsx)(k.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"kitchen tools"})," My Kitchen Setup"]}),(0,s.jsx)(d.zB,{control:z.control,name:"kitchenEquipment",render:()=>(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(d.lR,{className:"text-base",children:"Available Kitchen Equipment"}),(0,s.jsx)(d.Rr,{children:"Select the equipment you have available in your kitchen. This helps chefs plan accordingly."})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:_.map(e=>(0,s.jsx)(d.zB,{control:z.control,name:"kitchenEquipment",render:t=>{var r;let{field:a}=t;return(0,s.jsxs)(d.eI,{className:"flex flex-row items-center space-x-3 space-y-0 p-3 border rounded-md hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(m.S,{checked:null==(r=a.value)?void 0:r.includes(e.value),onCheckedChange:t=>{let r=a.value||[];return t?a.onChange([...r,e.value]):a.onChange(r.filter(t=>t!==e.value))},disabled:b})}),(0,s.jsxs)(d.lR,{className:"font-normal flex items-center cursor-pointer",children:[e.icon,e.label]})]},e.value)}},e.value))}),(0,s.jsx)(d.C5,{})]})})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,s.jsx)(I.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"location pin icon"})," My Location"]}),(0,s.jsx)(d.zB,{control:z.control,name:"addressDetails",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Primary Address / Event Location Details"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(u.T,{placeholder:"e.g., 123 Main St, Anytown, USA. Include any important notes about access or parking.",className:"min-h-[100px]",...t,disabled:b})}),(0,s.jsx)(d.Rr,{children:"Provide details about where events typically take place or your primary address for service."}),(0,s.jsx)(d.C5,{})]})}})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,s.jsx)(N.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"event preferences cutlery"})," My Default Event Preferences"]}),(0,s.jsx)(d.Rr,{className:"mb-4",children:"Set up your typical event preferences. You can always customize these when making a new request."}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.zB,{control:z.control,name:"defaultEventType",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Typical Event Type"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"e.g., Birthday Dinner, Family Brunch",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(d.zB,{control:z.control,name:"defaultPax",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Typical Number of Guests (PAX)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"number",placeholder:"e.g., 8",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"defaultBudgetAmount",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Typical Budget Amount ($)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"number",step:"0.01",placeholder:"e.g., 500",...t,disabled:b})}),(0,s.jsx)(d.Rr,{children:"Specify if this is 'per person' or 'total' in the notes if needed."}),(0,s.jsx)(d.C5,{})]})}})]}),(0,s.jsx)(d.zB,{control:z.control,name:"defaultFrequency",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Typical Frequency/Timing"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"e.g., Weekends, Once a month",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"defaultTheme",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Preferred Theme/Vibe (Optional)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"e.g., Casual BBQ, Formal French Dinner",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"defaultDietaryNotes",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Common Dietary Notes (Optional)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(u.T,{placeholder:"e.g., Gluten-free options needed, one vegetarian guest",className:"min-h-[80px]",...t,disabled:b})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:z.control,name:"defaultExtraComments",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Other Preferences or Kitchen Notes (Optional)"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(u.T,{placeholder:"e.g., We prefer family-style service, limited counter space.",className:"min-h-[80px]",...t,disabled:b})}),(0,s.jsx)(d.Rr,{children:"This can include specific kitchen notes or other preferences for the chef."}),(0,s.jsx)(d.C5,{})]})}})]})]}),(0,s.jsxs)("div",{className:"pt-6 border-t flex flex-col sm:flex-row items-center justify-between",children:[(0,s.jsxs)(i.$,{type:"submit",size:"lg",className:"w-full sm:w-auto",disabled:b,children:[b?(0,s.jsx)(C.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,s.jsx)(P.A,{className:"mr-2 h-5 w-5"}),b?"Saving...":"Save Profile"]}),(0,s.jsxs)(S.AlertDialog,{children:[(0,s.jsx)(S.AlertDialogTrigger,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"destructive",size:"lg",className:"w-full sm:w-auto mt-4 sm:mt-0",disabled:b,children:[(0,s.jsx)(R.A,{className:"mr-2 h-4 w-4"})," Delete My Account"]})}),(0,s.jsxs)(S.AlertDialogContent,{children:[(0,s.jsxs)(S.AlertDialogHeader,{children:[(0,s.jsx)(S.AlertDialogTitle,{children:"Are you absolutely sure?"}),(0,s.jsx)(S.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers. You will receive an email confirmation once the process is complete, as per our data retention policy."})]}),(0,s.jsxs)(S.AlertDialogFooter,{children:[(0,s.jsx)(S.AlertDialogCancel,{children:"Cancel"}),(0,s.jsx)(S.AlertDialogAction,{onClick:()=>{A({title:"Account Deletion Request (Placeholder)",description:"This feature is not yet fully implemented. In a real app, this would start a secure account deletion process.",duration:7e3})},children:"Yes, delete my account"})]})]})]})]})]})})})]})})}},10518:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},11275:(e,t,r)=>{"use strict";r.d(t,{X:()=>l});var a=r(12115),s=r(52712);function l(e){let[t,r]=a.useState(void 0);return(0,s.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,s;if(!Array.isArray(t)||!t.length)return;let l=t[0];if("borderBoxSize"in l){let e=l.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},14437:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},15121:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]])},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>y,MJ:()=>x,Rr:()=>g,eI:()=>p,lR:()=>h,lV:()=>d,zB:()=>u});var a=r(95155),s=r(12115),l=r(99708),o=r(62177),n=r(59434),i=r(85057);let d=o.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(o.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:r,formState:a}=(0,o.xW)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...l}=e,o=s.useId();return(0,a.jsx)(f.Provider,{value:{id:o},children:(0,a.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",r),...l})})});p.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:l,formItemId:o}=m();return(0,a.jsx)(i.J,{ref:t,className:(0,n.cn)(l&&"text-destructive",r),htmlFor:o,...s})});h.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:o,formDescriptionId:n,formMessageId:i}=m();return(0,a.jsx)(l.DX,{ref:t,id:o,"aria-describedby":s?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!s,...r})});x.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:l}=m();return(0,a.jsx)("p",{ref:t,id:l,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});g.displayName="FormDescription";let y=s.forwardRef((e,t)=>{var r;let{className:s,children:l,...o}=e,{error:i,formMessageId:d}=m(),c=i?String(null!=(r=null==i?void 0:i.message)?r:""):l;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",s),...o,children:c}):null});y.displayName="FormMessage"},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>i});var a=r(95155),s=r(12115),l=r(99708),o=r(74466),n=r(59434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(i({variant:s,size:o,className:r})),ref:t,...c})});d.displayName="Button"},45503:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(12115);function s(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},47262:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var a=r(95155),s=r(12115),l=r(76981),o=r(10518),n=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})})});i.displayName=l.bL.displayName},56104:(e,t,r)=>{"use strict";let a,s,l,o;r.d(t,{IG:()=>l,db:()=>o,j2:()=>s});var n=r(23915),i=r(93004),d=r(90858),c=r(35317);let u={apiKey:"YOUR_NEW_FINDACHEF2_API_KEY",authDomain:"findachef2.firebaseapp.com",projectId:"findachef2",storageBucket:"findachef2.appspot.com",messagingSenderId:"YOUR_NEW_FINDACHEF2_MESSAGING_SENDER_ID",appId:"YOUR_NEW_FINDACHEF2_APP_ID",measurementId:"YOUR_NEW_FINDACHEF2_MEASUREMENT_ID"};if(u.apiKey&&u.projectId||(console.error("CRITICAL FIREBASE CONFIG ERROR: NEXT_PUBLIC_FIREBASE_API_KEY or NEXT_PUBLIC_FIREBASE_PROJECT_ID is missing or undefined."),console.error("This will cause Firebase services (Auth, Firestore, Storage) to fail."),console.error("Ensure these are correctly set in your .env.local file (for local development) AND in your Vercel project environment variables (for deployment).")),console.log("Firebase Initializing with Project ID:",u.projectId||"MISSING/UNDEFINED"),console.log("Firebase Using API Key (first 5 chars):",u.apiKey?u.apiKey.substring(0,5)+"...":"API Key Not Found/Defined"),(0,n.Dk)().length)a=(0,n.Dk)()[0];else try{a=(0,n.Wp)(u)}catch(e){console.error("Firebase initializeApp error:",e)}a&&u.apiKey&&u.projectId?(s=(0,i.xI)(a),l=(0,d.c7)(a),o=(0,c.aU)(a)):(console.error("Firebase app was not properly initialized due to missing configuration. Other Firebase services (Auth, Storage, Firestore) will NOT be available."),s=null,l=null,o=null)},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(52596),s=r(39688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},59576:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>d});var a=r(95155),s=r(93004),l=r(12115),o=r(56104),n=r(35317);let i=(0,l.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),[m,f]=(0,l.useState)(!0),[p,h]=(0,l.useState)(!0),[x,g]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[N,A]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e;console.log("AuthContext: Setting up onAuthStateChanged listener.");let t=(0,s.hg)(o.j2,async t=>{if(console.log("AuthContext: onAuthStateChanged triggered. CurrentUser UID:",(null==t?void 0:t.uid)||null),u(null),g(!1),v(!1),j(!1),A(!1),C(!1),e&&(console.log("AuthContext: Cleaning up previous Firestore profile listener for old user or on logout."),e(),e=void 0),d(t),t){h(!0),console.log("AuthContext: User found (UID:",t.uid,"). Starting profile and claims loading.");let r=!1;try{console.log("AuthContext: Attempting to fetch ID token result with force refresh for UID:",t.uid);let e=await t.getIdTokenResult(!0);console.log("AuthContext: ID Token Claims for user",t.uid,":",e.claims),r=!!(e.claims&&!0===e.claims.admin),g(r),r?console.log("AuthContext: 'admin' custom claim IS TRUE for user:",t.uid):console.warn("AuthContext: 'admin' custom claim not found or not true for user:",t.uid,"Claims found:",e.claims)}catch(e){console.error("AuthContext: Error fetching ID token result for custom claims for UID:",t.uid,e),g(!1)}try{console.log("AuthContext: Setting up Firestore profile listener for UID:",t.uid);let a=(0,n.H9)(o.db,"users",t.uid);e=(0,n.aQ)(a,e=>{if(e.exists()){let a=e.data(),s={id:e.id,...a,createdAt:a.createdAt instanceof n.Dc?a.createdAt.toDate():a.createdAt?new Date(a.createdAt):void 0,updatedAt:a.updatedAt instanceof n.Dc?a.updatedAt.toDate():a.updatedAt?new Date(a.updatedAt):void 0};console.log("AuthContext: Firestore profile data loaded/updated for UID:",t.uid,"Role:",s.role),u(s);let l="chef"===s.role,o="customer"===s.role,i="admin"===s.role;console.log("AuthContext: Setting isChef based on role:",l),v(l),j(o),i&&!r?console.warn("AuthContext: User has 'admin' role in Firestore, but 'admin' custom claim is missing or false. Custom claims determine admin access."):!i&&r&&console.log("AuthContext: User has 'admin' custom claim, granting admin access. Firestore role is:",s.role),l?(A(s.isApproved||!1),C(s.isSubscribed||!1),console.log("AuthContext: Chef specific flags - Approved:",s.isApproved,"Subscribed:",s.isSubscribed)):(A(!1),C(!1))}else console.warn("AuthContext: No such user profile document in Firestore for UID:",t.uid),u(null),v(!1),j(!1),A(!1),C(!1);h(!1)},e=>{console.error("AuthContext: Error with Firestore profile snapshot listener for UID:",t.uid,e),u(null),v(!1),j(!1),A(!1),C(!1),h(!1)})}catch(e){console.error("AuthContext: Outer error setting up Firestore profile snapshot for UID:",t.uid,e),u(null),v(!1),j(!1),A(!1),C(!1),h(!1)}}else console.log("AuthContext: No current user (logged out). Resetting profile states."),h(!1);f(!1)});return()=>{console.log("AuthContext: Cleaning up onAuthStateChanged listener."),t(),e&&(console.log("AuthContext: Cleaning up profile onSnapshot listener on AuthProvider unmount."),e())}},[]),(0,a.jsx)(i.Provider,{value:{user:r,userProfile:c,loading:m||p,authLoading:m,profileLoading:p,isAdmin:x,isChef:y,isCustomer:b,isChefApproved:N,isChefSubscribed:w},children:t})}function c(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var a=r(95155),s=r(12115),l=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>o,aR:()=>n,wL:()=>u});var a=r(95155),s=r(12115),l=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},76981:(e,t,r)=>{"use strict";r.d(t,{C1:()=>C,bL:()=>w});var a=r(12115),s=r(6101),l=r(46081),o=r(85185),n=r(5845),i=r(45503),d=r(11275),c=r(28905),u=r(63655),m=r(95155),f="Checkbox",[p,h]=(0,l.A)(f),[x,g]=p(f),y=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:l,checked:i,defaultChecked:d,required:c,disabled:f,value:p="on",onCheckedChange:h,form:g,...y}=e,[v,b]=a.useState(null),w=(0,s.s)(t,e=>b(e)),C=a.useRef(!1),D=!v||g||!!v.closest("form"),[E=!1,k]=(0,n.i)({prop:i,defaultProp:d,onChange:h}),I=a.useRef(E);return a.useEffect(()=>{let e=null==v?void 0:v.form;if(e){let t=()=>k(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,k]),(0,m.jsxs)(x,{scope:r,state:E,disabled:f,children:[(0,m.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":N(E)?"mixed":E,"aria-required":c,"data-state":A(E),"data-disabled":f?"":void 0,disabled:f,value:p,...y,ref:w,onKeyDown:(0,o.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.m)(e.onClick,e=>{k(e=>!!N(e)||!e),D&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),D&&(0,m.jsx)(j,{control:v,bubbles:!C.current,name:l,value:p,checked:E,required:c,disabled:f,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!N(d)&&d})]})});y.displayName=f;var v="CheckboxIndicator",b=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...s}=e,l=g(v,r);return(0,m.jsx)(c.C,{present:a||N(l.state)||!0===l.state,children:(0,m.jsx)(u.sG.span,{"data-state":A(l.state),"data-disabled":l.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var j=e=>{let{control:t,checked:r,bubbles:s=!0,defaultChecked:l,...o}=e,n=a.useRef(null),c=(0,i.Z)(r),u=(0,d.X)(t);a.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let a=new Event("click",{bubbles:s});e.indeterminate=N(r),t.call(e,!N(r)&&r),e.dispatchEvent(a)}},[c,r,s]);let f=a.useRef(!N(r)&&r);return(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=l?l:f.current,...o,tabIndex:-1,ref:n,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return"indeterminate"===e}function A(e){return N(e)?"indeterminate":e?"checked":"unchecked"}var w=y,C=b},83662:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var a=r(95155),s=r(12115),l=r(40968),o=r(74466),n=r(59434);let i=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)(i(),r),...s})});d.displayName=l.b.displayName},87167:(e,t,r)=>{Promise.resolve().then(r.bind(r,5459))},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(12115);let s=0,l=new Map,o=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=n(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var a=r(95155),s=r(12115),l=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});o.displayName="Textarea"},90010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlertDialog:()=>i,AlertDialogAction:()=>g,AlertDialogCancel:()=>y,AlertDialogContent:()=>m,AlertDialogDescription:()=>x,AlertDialogFooter:()=>p,AlertDialogHeader:()=>f,AlertDialogOverlay:()=>u,AlertDialogPortal:()=>c,AlertDialogTitle:()=>h,AlertDialogTrigger:()=>d});var a=r(95155),s=r(12115),l=r(17649),o=r(59434),n=r(30285);let i=l.bL,d=l.l9,c=l.ZL,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});u.displayName=l.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};f.displayName="AlertDialogHeader";let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="AlertDialogFooter";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",r),...s})});h.displayName=l.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});x.displayName=l.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,o.cn)((0,n.r)(),r),...s})});g.displayName=l.rc.displayName;let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.ZD,{ref:t,className:(0,o.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});y.displayName=l.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,4453,4602,1345,6766,65,1342,7649,2160,8441,1684,7358],()=>t(87167)),_N_E=e.O()}]);