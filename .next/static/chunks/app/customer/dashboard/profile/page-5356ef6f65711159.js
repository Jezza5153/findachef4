(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5845,7982,8226],{4512:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var a=r(95155),s=r(90221),l=r(62177),i=r(55594),n=r(30285),o=r(17759),d=r(62523),c=r(88539),u=r(47262),m=r(66695),f=r(12115),p=r(87481),h=r(66766),x=r(57340),g=r(22226),j=r(29477),b=r(87671),y=r(95747),v=r(44992),A=r(48293),N=r(51154),w=r(79772),C=r(42337),D=r(50744),I=r(4516),R=r(4229),F=r(62525),S=r(90010),T=r(59576),P=r(56104),E=r(35317),k=r(90858),B=r(93004);let U=[{value:"Oven",label:"Oven",icon:(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5"})},{value:"Stovetop",label:"Stovetop",icon:(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5"})},{value:"Microwave",label:"Microwave",icon:(0,a.jsx)(j.A,{className:"mr-2 h-5 w-5"})},{value:"Blender",label:"Blender/Mixer",icon:(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5"})},{value:"BBQGrill",label:"BBQ Grill",icon:(0,a.jsx)(b.A,{className:"mr-2 h-5 w-5"})},{value:"StandardPotsPans",label:"Standard Pots & Pans",icon:(0,a.jsx)(y.A,{className:"mr-2 h-5 w-5"})},{value:"Refrigerator",label:"Refrigerator",icon:(0,a.jsx)(v.A,{className:"mr-2 h-5 w-5"})},{value:"Freezer",label:"Freezer",icon:(0,a.jsx)(A.A,{className:"mr-2 h-5 w-5"})}],O=i.Ik({name:i.Yj().min(2,{message:"Name must be at least 2 characters."}),phone:i.Yj().max().optional(),profilePictureFile:i.Nl(File).refine(e=>!e||e.size<=2097152,"Max file size is 2MB.").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only JPG, PNG, WEBP files are allowed.").optional(),kitchenEquipment:i.YO(i.Yj()).optional(),addressDetails:i.Yj().max().optional(),defaultEventType:i.Yj().max().optional(),defaultPax:i.au.number().default(1).optional(),defaultBudgetAmount:i.au.number().default(50).optional(),defaultFrequency:i.Yj().max().optional(),defaultTheme:i.Yj().max().optional(),defaultDietaryNotes:i.Yj().max().optional(),defaultExtraComments:i.Yj().max().optional()});function z(){let{user:e,userProfile:t,loading:r,profileLoading:i}=(0,T.A)(),[x,g]=(0,f.useState)(null),[j,b]=(0,f.useState)(null),[v,A]=(0,f.useState)(!1),{toast:z}=(0,p.dj)(),M=r||i,q=(0,l.mN)({resolver:(0,s.u)(O),defaultValues:{name:"",phone:"",kitchenEquipment:[],addressDetails:"",defaultEventType:"",defaultPax:1,defaultBudgetAmount:50,defaultFrequency:"Once",defaultTheme:"",defaultDietaryNotes:"",defaultExtraComments:""}});(0,f.useEffect)(()=>{!M&&e&&(t&&"customer"===t.role&&!("isAdmin"in t&&t.isAdmin)?(q.reset({name:t.name||e.displayName||"",phone:t.phone||"",kitchenEquipment:t.kitchenEquipment||[],addressDetails:t.addressDetails||"",defaultEventType:t.defaultEventType||"",defaultPax:t.defaultPax||1,defaultBudgetAmount:t.defaultBudgetAmount||50,defaultFrequency:t.defaultFrequency||"Once",defaultTheme:t.defaultTheme||"",defaultDietaryNotes:t.defaultDietaryNotes||"",defaultExtraComments:t.defaultExtraComments||""}),g(t.profilePictureUrl||e.photoURL||null)):e&&(q.reset({name:e.displayName||"",phone:e.phoneNumber||""}),g(e.photoURL||null)))},[e,t,M,q]);let _=r=>{var a;let s=null==(a=r.target.files)?void 0:a[0];if(s){q.setValue("profilePictureFile",s,{shouldValidate:!0}),b(s);let e=new FileReader;e.onloadend=()=>{g(e.result)},e.readAsDataURL(s)}else q.setValue("profilePictureFile",void 0),b(null),g((null==t?void 0:t.profilePictureUrl)||(null==e?void 0:e.photoURL)||null)},J=async r=>{if(!e)return void z({title:"Authentication Error",description:"You must be logged in to update your profile.",variant:"destructive"});A(!0);let a=(null==t?void 0:t.profilePictureUrl)||e.photoURL||"";try{if(j){let r=null==t?void 0:t.profilePictureUrl;if(r&&r.startsWith("https://firebasestorage.googleapis.com"))try{let e=(0,k.KR)(P.IG,r);await (0,k.XR)(e)}catch(e){"storage/object-not-found"!==e.code&&console.warn("Error deleting old profile picture, continuing...",e)}let s=j.name.split(".").pop()||"jpg",l="users/".concat(e.uid,"/profilePicture.").concat(s),i=(0,k.KR)(P.IG,l);z({title:"Uploading Profile Picture...",description:"Please wait."});let n=(0,k.bp)(i,j);await new Promise((e,t)=>{n.on("state_changed",null,e=>{console.error("Profile picture upload error:",e),t(e)},async()=>{try{a=await (0,k.qk)(n.snapshot.ref),e()}catch(e){t(e)}})})}let s={id:e.uid,name:r.name,email:e.email,phone:r.phone||"",profilePictureUrl:a,kitchenEquipment:r.kitchenEquipment||[],addressDetails:r.addressDetails||"",defaultEventType:r.defaultEventType||"",defaultPax:r.defaultPax||1,defaultBudgetAmount:r.defaultBudgetAmount||0,defaultFrequency:r.defaultFrequency||"",defaultTheme:r.defaultTheme||"",defaultDietaryNotes:r.defaultDietaryNotes||"",defaultExtraComments:r.defaultExtraComments||"",role:"customer",updatedAt:(0,E.O5)()},l=(0,E.H9)(P.db,"users",e.uid);(await (0,E.x7)(l)).exists()||(s.createdAt=(0,E.O5)()),await (0,E.BN)(l,s,{merge:!0}),(e.displayName!==r.name||a&&e.photoURL!==a)&&await (0,B.r7)(e,{displayName:r.name,photoURL:a}),b(null),z({title:"Profile Updated Successfully",description:"Your customer profile has been saved."})}catch(e){z({title:"Update Failed",description:e instanceof Error?e.message:"Could not save your profile. Please try again.",variant:"destructive"})}finally{A(!1)}};return M?(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,a.jsx)(N.A,{className:"mr-2 h-8 w-8 animate-spin text-primary","data-ai-hint":"loading spinner"})," Loading Profile..."]}):(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)(m.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsxs)(m.ZB,{className:"text-2xl font-bold flex items-center",children:[(0,a.jsx)(w.A,{className:"mr-3 h-7 w-7 text-primary","data-ai-hint":"user profile icon"})," My Customer Profile"]}),(0,a.jsx)(m.BT,{children:"Manage your contact details, kitchen setup, and default event preferences."})]}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)(o.lV,{...q,children:(0,a.jsxs)("form",{onSubmit:q.handleSubmit(J),className:"space-y-8",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[(0,a.jsxs)("div",{className:"md:col-span-1 flex flex-col items-center",children:[(0,a.jsx)(h.default,{src:x||"https://placehold.co/150x150.png",alt:q.getValues("name")||(null==e?void 0:e.displayName)||"Customer",width:150,height:150,className:"rounded-full object-cover shadow-md mb-4","data-ai-hint":"person avatar"},x),(0,a.jsx)(o.zB,{control:q.control,name:"profilePictureFile",render:()=>(0,a.jsxs)(o.eI,{className:"w-full",children:[(0,a.jsx)(o.MJ,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.p,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:_,className:"hidden",id:"customerProfilePictureUpdate",disabled:v}),(0,a.jsx)(n.$,{type:"button",variant:"outline",asChild:!0,className:"w-full",disabled:v,children:(0,a.jsxs)("label",{htmlFor:"customerProfilePictureUpdate",className:"cursor-pointer flex items-center justify-center",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"})," Change Photo"]})})]})}),(0,a.jsx)(o.C5,{className:"text-center"})]})})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsx)(o.zB,{control:q.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Full Name"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{placeholder:"e.g., John Doe",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Email Address"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{type:"email",value:(null==e?void 0:e.email)||"",readOnly:!0,disabled:!0})}),(0,a.jsx)(o.Rr,{children:"Your email address cannot be changed here."})]}),(0,a.jsx)(o.zB,{control:q.control,name:"phone",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Phone Number (Optional)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{type:"tel",placeholder:"e.g., 555-123-4567",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,a.jsx)(D.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"kitchen tools"})," My Kitchen Setup"]}),(0,a.jsx)(o.zB,{control:q.control,name:"kitchenEquipment",render:()=>(0,a.jsxs)(o.eI,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(o.lR,{className:"text-base",children:"Available Kitchen Equipment"}),(0,a.jsx)(o.Rr,{children:"Select the equipment you have available in your kitchen. This helps chefs plan accordingly."})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:U.map(e=>(0,a.jsx)(o.zB,{control:q.control,name:"kitchenEquipment",render:t=>{var r;let{field:s}=t;return(0,a.jsxs)(o.eI,{className:"flex flex-row items-center space-x-3 space-y-0 p-3 border rounded-md hover:bg-muted/50 transition-colors",children:[(0,a.jsx)(o.MJ,{children:(0,a.jsx)(u.S,{checked:null==(r=s.value)?void 0:r.includes(e.value),onCheckedChange:t=>{let r=s.value||[];return t?s.onChange([...r,e.value]):s.onChange(r.filter(t=>t!==e.value))},disabled:v})}),(0,a.jsxs)(o.lR,{className:"font-normal flex items-center cursor-pointer",children:[e.icon,e.label]})]},e.value)}},e.value))}),(0,a.jsx)(o.C5,{})]})})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,a.jsx)(I.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"location pin icon"})," My Location"]}),(0,a.jsx)(o.zB,{control:q.control,name:"addressDetails",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Primary Address / Event Location Details"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(c.T,{placeholder:"e.g., 123 Main St, Anytown, USA. Include any important notes about access or parking.",className:"min-h-[100px]",...t,disabled:v})}),(0,a.jsx)(o.Rr,{children:"Provide details about where events typically take place or your primary address for service."}),(0,a.jsx)(o.C5,{})]})}})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,a.jsx)(y.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"event preferences cutlery"})," My Default Event Preferences"]}),(0,a.jsx)(o.Rr,{className:"mb-4",children:"Set up your typical event preferences. You can always customize these when making a new request."}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o.zB,{control:q.control,name:"defaultEventType",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Typical Event Type"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Birthday Dinner, Family Brunch",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(o.zB,{control:q.control,name:"defaultPax",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Typical Number of Guests (PAX)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{type:"number",placeholder:"e.g., 8",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsx)(o.zB,{control:q.control,name:"defaultBudgetAmount",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Typical Budget Amount ($)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{type:"number",step:"0.01",placeholder:"e.g., 500",...t,disabled:v})}),(0,a.jsx)(o.Rr,{children:"Specify if this is 'per person' or 'total' in the notes if needed."}),(0,a.jsx)(o.C5,{})]})}})]}),(0,a.jsx)(o.zB,{control:q.control,name:"defaultFrequency",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Typical Frequency/Timing"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Weekends, Once a month",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsx)(o.zB,{control:q.control,name:"defaultTheme",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Preferred Theme/Vibe (Optional)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Casual BBQ, Formal French Dinner",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsx)(o.zB,{control:q.control,name:"defaultDietaryNotes",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Common Dietary Notes (Optional)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(c.T,{placeholder:"e.g., Gluten-free options needed, one vegetarian guest",className:"min-h-[80px]",...t,disabled:v})}),(0,a.jsx)(o.C5,{})]})}}),(0,a.jsx)(o.zB,{control:q.control,name:"defaultExtraComments",render:e=>{let{field:t}=e;return(0,a.jsxs)(o.eI,{children:[(0,a.jsx)(o.lR,{children:"Other Preferences or Kitchen Notes (Optional)"}),(0,a.jsx)(o.MJ,{children:(0,a.jsx)(c.T,{placeholder:"e.g., We prefer family-style service, limited counter space.",className:"min-h-[80px]",...t,disabled:v})}),(0,a.jsx)(o.Rr,{children:"This can include specific kitchen notes or other preferences for the chef."}),(0,a.jsx)(o.C5,{})]})}})]})]}),(0,a.jsxs)("div",{className:"pt-6 border-t flex flex-col sm:flex-row items-center justify-between",children:[(0,a.jsxs)(n.$,{type:"submit",size:"lg",className:"w-full sm:w-auto",disabled:v,children:[v?(0,a.jsx)(N.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsx)(R.A,{className:"mr-2 h-5 w-5"}),v?"Saving...":"Save Profile"]}),(0,a.jsxs)(S.AlertDialog,{children:[(0,a.jsx)(S.AlertDialogTrigger,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"destructive",size:"lg",className:"w-full sm:w-auto mt-4 sm:mt-0",disabled:v,children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"})," Delete My Account"]})}),(0,a.jsxs)(S.AlertDialogContent,{children:[(0,a.jsxs)(S.AlertDialogHeader,{children:[(0,a.jsx)(S.AlertDialogTitle,{children:"Are you absolutely sure?"}),(0,a.jsx)(S.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers. You will receive an email confirmation once the process is complete, as per our data retention policy."})]}),(0,a.jsxs)(S.AlertDialogFooter,{children:[(0,a.jsx)(S.AlertDialogCancel,{children:"Cancel"}),(0,a.jsx)(S.AlertDialogAction,{onClick:()=>{z({title:"Account Deletion Request (Placeholder)",description:"This feature is not yet fully implemented. In a real app, this would start a secure account deletion process.",duration:7e3})},children:"Yes, delete my account"})]})]})]})]})]})})})]})})}},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>j,MJ:()=>x,Rr:()=>g,eI:()=>p,lR:()=>h,lV:()=>d,zB:()=>u});var a=r(95155),s=r(12115),l=r(99708),i=r(62177),n=r(59434),o=r(85057);let d=i.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(i.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:r,formState:a}=(0,i.xW)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...l}=e,i=s.useId();return(0,a.jsx)(f.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,n.cn)("space-y-2",r),...l})})});p.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:l,formItemId:i}=m();return(0,a.jsx)(o.J,{ref:t,className:(0,n.cn)(l&&"text-destructive",r),htmlFor:i,...s})});h.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:i,formDescriptionId:n,formMessageId:o}=m();return(0,a.jsx)(l.DX,{ref:t,id:i,"aria-describedby":s?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!s,...r})});x.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:l}=m();return(0,a.jsx)("p",{ref:t,id:l,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});g.displayName="FormDescription";let j=s.forwardRef((e,t)=>{var r;let{className:s,children:l,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(r=null==o?void 0:o.message)?r:""):l;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",s),...i,children:c}):null});j.displayName="FormMessage"},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var a=r(95155),s=r(12115),l=r(99708),i=r(74466),n=r(59434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},47262:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});var a=r(95155),s=r(12115),l=r(76981),i=r(5196),n=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})})});o.displayName=l.bL.displayName},56104:(e,t,r)=>{"use strict";let a;r.d(t,{IG:()=>c,db:()=>u,j2:()=>d});var s=r(23915),l=r(93004),i=r(90858),n=r(35317);let o={apiKey:'"AIzaSyDNMNa2a-BFUlmQ6PAA2hAIA3j07dYQUWQ",',authDomain:'"findachef2.firebaseapp.com",',projectId:'"findachef2",',storageBucket:'"findachef2.firebasestorage.app",',messagingSenderId:'"738524307993",',appId:'"1:738524307993:web:780dbfa516d646154cc088",',measurementId:'ntId: "G-PFXWD80NBY"'},d=null,c=null,u=null,m=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(e=>!o[e]);if(m.length>0)console.error("CRITICAL FIREBASE CONFIG ERROR: The following Firebase config keys are missing or undefined in your environment variables:",m.join(", ")),console.error("This will cause Firebase services (Auth, Firestore, Storage) to fail or not initialize."),console.error("Ensure these are correctly set in your .env.local file (for local development) AND in your Vercel project environment variables (for deployment).");else if(console.log("Firebase Config OK: All required keys found."),console.log("Firebase Initializing with Project ID:",o.projectId),console.log("Firebase Using API Key (first 5 chars):",o.apiKey?o.apiKey.substring(0,5)+"...":"API Key Not Found/Defined"),(0,s.Dk)().length)a=(0,s.Dk)()[0],console.log("Firebase app already initialized.");else try{a=(0,s.Wp)(o),console.log("Firebase app initialized successfully.")}catch(e){console.error("Firebase initializeApp error:",e),a=void 0}if(a)try{d=(0,l.xI)(a),c=(0,i.c7)(a),u=(0,n.aU)(a),console.log("Firebase services (Auth, Storage, Firestore) initialized.")}catch(e){console.error("Error initializing Firebase services (Auth, Storage, Firestore):",e),d=null,c=null,u=null}else console.error("Firebase app was not initialized. Other Firebase services (Auth, Storage, Firestore) will NOT be available.")},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(52596),s=r(39688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},59576:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>d});var a=r(95155),s=r(93004),l=r(12115),i=r(56104),n=r(35317);let o=(0,l.createContext)(void 0);function d(e){let{children:t}=e,[r,d]=(0,l.useState)(null),[c,u]=(0,l.useState)(null),[m,f]=(0,l.useState)(!0),[p,h]=(0,l.useState)(!0),[x,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[A,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e;console.log("AuthContext: Setting up onAuthStateChanged listener.");let t=(0,s.hg)(i.j2,async t=>{if(console.log("AuthContext: onAuthStateChanged triggered. CurrentUser UID:",(null==t?void 0:t.uid)||"null"),e&&(console.log("AuthContext: Cleaning up previous Firestore profile listener for old user or on logout."),e(),e=void 0),u(null),g(!1),b(!1),v(!1),N(!1),C(!1),d(t),t){h(!0),console.log("AuthContext: User found (UID:",t.uid,"). Starting profile and claims loading.");let r=!1;try{console.log("AuthContext: Attempting to fetch ID token result with force refresh for UID:",t.uid);let e=await t.getIdTokenResult(!0);console.log("AuthContext: ID Token Claims for user",t.uid,":",e.claims),r=!!(e.claims&&!0===e.claims.isAdmin),g(r),r?console.log("AuthContext: 'isAdmin' custom claim IS TRUE for user:",t.uid):console.warn("AuthContext: 'isAdmin' custom claim not found or not true for user:",t.uid,"Claims found:",e.claims)}catch(e){console.error("AuthContext: Error fetching ID token result for custom claims for UID:",t.uid,e),g(!1)}try{console.log("AuthContext: Setting up Firestore profile listener for UID:",t.uid);let a=(0,n.H9)(i.db,"users",t.uid);e=(0,n.aQ)(a,e=>{if(e.exists()){let a=e.data(),s={id:e.id,...a,createdAt:a.createdAt instanceof n.Dc?a.createdAt.toDate():a.createdAt?new Date(a.createdAt):void 0,updatedAt:a.updatedAt instanceof n.Dc?a.updatedAt.toDate():a.updatedAt?new Date(a.updatedAt):void 0};console.log("AuthContext: Firestore profile data loaded/updated for UID:",t.uid,"Role:",s.role),u(s);let l="chef"===s.role,i="customer"===s.role,o="admin"===s.role;b(l),v(i),o&&!r?console.warn("AuthContext: User has 'admin' role in Firestore, but 'admin' custom claim is missing or false. Custom claims determine actual admin access."):!o&&r&&console.log("AuthContext: User has 'isAdmin' custom claim (isAdmin=true), granting admin access. Firestore role is:",s.role),l?(N(s.isApproved||!1),C(s.isSubscribed||!1),console.log("AuthContext: Chef specific flags - Approved:",s.isApproved,"Subscribed:",s.isSubscribed)):(N(!1),C(!1))}else console.warn("AuthContext: No such user profile document in Firestore for UID:",t.uid),u(null),b(!1),v(!1),N(!1),C(!1);h(!1)},e=>{console.error("AuthContext: Error with Firestore profile snapshot listener for UID:",t.uid,e),u(null),b(!1),v(!1),N(!1),C(!1),h(!1)})}catch(e){console.error("AuthContext: Outer error setting up Firestore profile snapshot for UID:",t.uid,e),u(null),b(!1),v(!1),N(!1),C(!1),h(!1)}}else console.log("AuthContext: No current user (logged out). Resetting profile states."),h(!1);f(!1)});return()=>{console.log("AuthContext: Cleaning up onAuthStateChanged listener."),t(),e&&(console.log("AuthContext: Cleaning up Firestore profile listener on AuthProvider unmount."),e())}},[]),(0,a.jsx)(o.Provider,{value:{user:r,userProfile:c,loading:m||p,authLoading:m,profileLoading:p,isAdmin:x,isChef:j,isCustomer:y,isChefApproved:A,isChefSubscribed:w},children:t})}function c(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(95155),s=r(12115),l=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>u});var a=r(95155),s=r(12115),l=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var a=r(95155),s=r(12115),l=r(40968),i=r(74466),n=r(59434);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)(o(),r),...s})});d.displayName=l.b.displayName},87167:(e,t,r)=>{Promise.resolve().then(r.bind(r,4512))},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(12115);let s=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var a=r(95155),s=r(12115),l=r(59434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});i.displayName="Textarea"},90010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlertDialog:()=>o,AlertDialogAction:()=>g,AlertDialogCancel:()=>j,AlertDialogContent:()=>m,AlertDialogDescription:()=>x,AlertDialogFooter:()=>p,AlertDialogHeader:()=>f,AlertDialogOverlay:()=>u,AlertDialogPortal:()=>c,AlertDialogTitle:()=>h,AlertDialogTrigger:()=>d});var a=r(95155),s=r(12115),l=r(17649),i=r(59434),n=r(30285);let o=l.bL,d=l.l9,c=l.ZL,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});u.displayName=l.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};f.displayName="AlertDialogHeader";let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="AlertDialogFooter";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",r),...s})});h.displayName=l.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});x.displayName=l.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,i.cn)((0,n.r)(),r),...s})});g.displayName=l.rc.displayName;let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.ZD,{ref:t,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});j.displayName=l.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,5100,4602,1345,6766,7322,7649,4273,8441,1684,7358],()=>t(87167)),_N_E=e.O()}]);