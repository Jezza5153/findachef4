(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2488],{20509:(e,t,a)=>{Promise.resolve().then(a.bind(a,86946))},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var l=a(74466),r=a(59434);let i=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{className:(0,r.cn)(i({variant:a}),t),...l})}},54165:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Dialog:()=>o,DialogClose:()=>m,DialogContent:()=>f,DialogDescription:()=>p,DialogFooter:()=>h,DialogHeader:()=>u,DialogOverlay:()=>x,DialogPortal:()=>c,DialogTitle:()=>g,DialogTrigger:()=>d});var s=a(95155),l=a(12115),r=a(15452),i=a(25318),n=a(59434);let o=r.bL,d=r.l9,c=r.ZL,m=r.bm,x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});x.displayName=r.hJ.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(r.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,s.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});g.displayName=r.hE.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});p.displayName=r.VY.displayName},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(95155),l=a(12115),r=a(59434);let i=l.forwardRef((e,t)=>{let{className:a,type:l,...i}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},86946:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var s=a(95155),l=a(12115),r=a(66695),i=a(30285),n=a(62523),o=a(26126),d=a(54165),c=a(90010),m=a(87481),x=a(66766),f=a(89807),u=a(50172),h=a(75074),g=a(763),p=a(83662),v=a(88390),N=a(50286),j=a(63587),y=a(35317),b=a(56104),w=a(59576),D=a(35695),A=a(85388);function C(){let{user:e,loading:t}=(0,w.A)(),a=(0,D.useRouter)(),{toast:C}=(0,m.dj)(),[k,P]=(0,l.useState)([]),[T,E]=(0,l.useState)(!0),[I,F]=(0,l.useState)(""),[H,L]=(0,l.useState)(!1),[R,B]=(0,l.useState)(null),[S,O]=(0,l.useState)(!1),[U,M]=(0,l.useState)(null),[W,z]=(0,l.useState)(!1),Y=t||T;(0,l.useEffect)(()=>{if(!t){if(!e)return void a.push("/login?redirect=/customer/wall");(async()=>{E(!0);try{let e=(0,y.rJ)(b.db,"chefWallEvents"),t=(0,y.P)(e,(0,y._M)("isPublic","==",!0),(0,y.My)("eventDateTime","asc")),a=(await (0,y.GG)(t)).docs.map(e=>{let t=e.data();return{id:e.id,...t,eventDateTime:t.eventDateTime,createdAt:t.createdAt instanceof y.Dc?t.createdAt.toDate():t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt instanceof y.Dc?t.updatedAt.toDate():t.updatedAt?new Date(t.updatedAt):void 0}});P(a)}catch(e){console.error("Error fetching public chef events:",e),C({title:"Error Loading Events",description:"Could not fetch chef-hosted events at this time.",variant:"destructive"})}finally{E(!1)}})()}},[e,t,a,C]);let Z=(0,l.useMemo)(()=>k.filter(e=>{let t=I.toLowerCase();return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)||e.chefName&&e.chefName.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t))}),[k,I]),_=e=>{if(!e)return"Date TBD";try{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return(0,A.GP)(t,"MMM d, yyyy 'at' h:mm a")}catch(t){return String(e)}},J=e=>{B(e),L(!0)},V=t=>{if(!e){C({title:"Login Required",description:"Please log in to book this event.",variant:"destructive"}),a.push("/login?redirect=/customer/wall");return}M(t),L(!1),O(!0)},$=async()=>{if(e&&U){z(!0);try{let t=U.eventDateTime instanceof y.Dc?U.eventDateTime:y.Dc.fromDate(new Date(U.eventDateTime)),s={customerId:e.uid,chefId:U.chefId,chefName:U.chefName,chefAvatarUrl:U.chefAvatarUrl,eventTitle:U.title,eventDate:t,pax:U.maxPax,totalPrice:U.pricePerPerson,pricePerHead:U.pricePerPerson,status:"confirmed",menuTitle:"Event: ".concat(U.title),location:U.location,chefWallEventId:U.id,createdAt:(0,y.O5)(),updatedAt:(0,y.O5)()},l=(0,y.H9)((0,y.rJ)(b.db,"bookings")),r={id:l.id,chefId:U.chefId,date:t,title:"Booking: ".concat(U.title),customerName:e.displayName||"Customer",pax:s.pax,menuName:s.menuTitle,pricePerHead:s.pricePerHead||0,location:s.location,notes:"Booked from Chef's Wall. Wall Event ID: ".concat(U.id),status:"Confirmed",isWallEvent:!0,bookingId:l.id},i=(0,y.wP)(b.db);i.set(l,s);let n=(0,y.H9)(b.db,"users/".concat(U.chefId,"/calendarEvents"),l.id);i.set(n,{...r,createdAt:(0,y.O5)(),updatedAt:(0,y.O5)()}),await i.commit(),C({title:"Event Booked!",description:"You've successfully booked \"".concat(U.title,"\". Check 'My Booked Events'.")}),a.push("/customer/dashboard/events")}catch(e){console.error("Error booking event:",e),C({title:"Booking Failed",description:"Could not book the event. Please try again.",variant:"destructive"})}finally{z(!1),O(!1),M(null)}}};return Y?(0,s.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("header",{className:"mb-12 text-center",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl flex items-center justify-center",children:[(0,s.jsx)(f.A,{className:"mr-4 h-10 w-10 text-primary","data-ai-hint":"calendar search"})," The Chef's Wall"]}),(0,s.jsx)("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-foreground/70",children:"Discover unique culinary events hosted by our talented chefs."})]}),(0,s.jsxs)("div",{className:"flex justify-center items-center py-16",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-3 text-lg text-muted-foreground",children:"Loading events..."})]})]}):(0,s.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("header",{className:"mb-12 text-center",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl flex items-center justify-center",children:[(0,s.jsx)(f.A,{className:"mr-4 h-10 w-10 text-primary","data-ai-hint":"calendar search"})," The Chef's Wall"]}),(0,s.jsx)("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-foreground/70",children:"Discover unique culinary events hosted by our talented chefs."})]}),(0,s.jsx)(r.Zp,{className:"mb-8 p-6 shadow-md",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"search-events",className:"block text-sm font-medium text-foreground mb-1",children:"Search Events"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(n.p,{id:"search-events",type:"text",placeholder:"Search by title, chef, location, or tags...",value:I,onChange:e=>F(e.target.value),className:"pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tag-filter",className:"block text-sm font-medium text-foreground mb-1",children:"Filter by Tag (Coming Soon)"}),(0,s.jsx)(n.p,{id:"tag-filter",placeholder:"e.g., Italian, Wine Pairing",disabled:!0})]})]})}),Z.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Z.map(e=>(0,s.jsxs)(r.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col overflow-hidden",children:[e.imageUrl?(0,s.jsx)(x.default,{src:e.imageUrl,alt:e.title,width:600,height:300,className:"w-full h-56 object-cover","data-ai-hint":e.dataAiHint||"event food crowd"}):(0,s.jsx)("div",{className:"w-full h-56 bg-muted flex items-center justify-center text-muted-foreground","data-ai-hint":"event placeholder",children:(0,s.jsx)(f.A,{className:"h-20 w-20 opacity-50"})}),(0,s.jsxs)(r.aR,{className:"pb-3",children:[(0,s.jsx)(r.ZB,{className:"text-xl line-clamp-2",children:e.title}),(0,s.jsxs)(r.BT,{className:"text-xs text-muted-foreground",children:["Hosted by: ",e.chefName||"Chef"]})]}),(0,s.jsxs)(r.Wu,{className:"space-y-2 text-sm flex-grow",children:[(0,s.jsx)("p",{className:"line-clamp-3 text-foreground/80",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4 text-primary"})," ",_(e.eventDateTime)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 text-primary"})," ",e.location]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 text-green-600"})," $",e.pricePerPerson.toFixed(2),"/person"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4 text-primary"})," Max ",e.maxPax," guests"]}),e.tags&&e.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 pt-1",children:e.tags.map(e=>(0,s.jsx)(o.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),(0,s.jsx)(r.wL,{className:"p-4 border-t bg-muted/20",children:(0,s.jsx)(i.$,{className:"w-full",onClick:()=>J(e),children:"View Details & Book"})})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)(j.A,{className:"mx-auto h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"No Events Found"}),(0,s.jsx)("p",{className:"mt-2 text-muted-foreground",children:I?"Try adjusting your search terms.":"There are currently no public chef events listed. Check back soon!"})]}),R&&(0,s.jsx)(d.Dialog,{open:H,onOpenChange:L,children:(0,s.jsxs)(d.DialogContent,{className:"sm:max-w-lg",children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{className:"text-2xl",children:R.title}),R.chefName&&(0,s.jsxs)(DialogDescription,{children:["Hosted by Chef ",R.chefName]})]}),(0,s.jsxs)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-1",children:[R.imageUrl&&(0,s.jsx)("div",{className:"aspect-video relative rounded-md overflow-hidden my-2",children:(0,s.jsx)(x.default,{src:R.imageUrl,alt:R.title,fill:!0,className:"object-cover","data-ai-hint":R.dataAiHint||"event feature image"})}),(0,s.jsx)("p",{className:"text-foreground/90",children:R.description}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-1 gap-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4 text-primary"})," ",(0,s.jsx)("strong",{children:"Date:"})," ",(0,s.jsx)("span",{className:"ml-1",children:_(R.eventDateTime)})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4 text-primary"})," ",(0,s.jsx)("strong",{children:"Location:"})," ",(0,s.jsx)("span",{className:"ml-1",children:R.location})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 text-green-600"})," ",(0,s.jsx)("strong",{children:"Price:"})," ",(0,s.jsxs)("span",{className:"ml-1",children:["$",R.pricePerPerson.toFixed(2),"/person"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4 text-primary"})," ",(0,s.jsx)("strong",{children:"Max Guests:"})," ",(0,s.jsx)("span",{className:"ml-1",children:R.maxPax})]})]}),R.chefsInvolved&&R.chefsInvolved.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-muted-foreground",children:"Other Chefs Involved:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-0.5",children:R.chefsInvolved.map(e=>(0,s.jsx)(o.E,{variant:"outline",className:"text-xs",children:e},e))})]}),R.tags&&R.tags.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-muted-foreground",children:"Tags:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-0.5",children:R.tags.map(e=>(0,s.jsx)(o.E,{variant:"secondary",className:"text-xs",children:e},e))})]})]}),(0,s.jsxs)(d.DialogFooter,{className:"mt-4",children:[(0,s.jsx)(d.DialogClose,{asChild:!0,children:(0,s.jsx)(i.$,{type:"button",variant:"outline",children:"Close"})}),(0,s.jsxs)(i.$,{type:"button",onClick:()=>V(R),disabled:W,children:[W?(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Book This Event"]})]})]})}),U&&(0,s.jsx)(c.AlertDialog,{open:S,onOpenChange:O,children:(0,s.jsxs)(c.AlertDialogContent,{children:[(0,s.jsxs)(c.AlertDialogHeader,{children:[(0,s.jsx)(c.AlertDialogTitle,{children:"Confirm Your Booking"}),(0,s.jsxs)(c.AlertDialogDescription,{children:['You are about to book "',(0,s.jsx)("strong",{children:U.title}),'" for ',(0,s.jsxs)("strong",{children:["$",U.pricePerPerson.toFixed(2)]}),". Please confirm to proceed. This action will create a confirmed booking."]})]}),(0,s.jsxs)(c.AlertDialogFooter,{children:[(0,s.jsx)(c.AlertDialogCancel,{disabled:W,children:"Cancel"}),(0,s.jsxs)(c.AlertDialogAction,{onClick:$,disabled:W,children:[W?(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Confirm Booking"]})]})]})})]})}},90010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AlertDialog:()=>o,AlertDialogAction:()=>p,AlertDialogCancel:()=>v,AlertDialogContent:()=>x,AlertDialogDescription:()=>g,AlertDialogFooter:()=>u,AlertDialogHeader:()=>f,AlertDialogOverlay:()=>m,AlertDialogPortal:()=>c,AlertDialogTitle:()=>h,AlertDialogTrigger:()=>d});var s=a(95155),l=a(12115),r=a(17649),i=a(59434),n=a(30285);let o=r.bL,d=r.l9,c=r.ZL,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});x.displayName=r.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="AlertDialogFooter";let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",a),...l})});h.displayName=r.hE.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});g.displayName=r.VY.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.rc,{ref:t,className:(0,i.cn)((0,n.r)(),a),...l})});p.displayName=r.rc.displayName;let v=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.ZD,{ref:t,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});v.displayName=r.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,4453,4602,1345,6766,106,5388,7649,1321,8226,8441,1684,7358],()=>t(20509)),_N_E=e.O()}]);