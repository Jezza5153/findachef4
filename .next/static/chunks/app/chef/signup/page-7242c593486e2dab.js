(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3052],{6830:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>F});var r=a(95155),i=a(90221),l=a(62177),t=a(55594),o=a(30285),n=a(17759),c=a(62523),d=a(88539),u=a(47262),p=a(66695),m=a(45162),h=a(12115),f=a(87481),g=a(66766),x=a(14437),j=a(13896),b=a(37607),y=a(76570),w=a(50172),v=a(6874),C=a.n(v),N=a(93004),P=a(56104),S=a(90858),A=a(35317),k=a(35695);let R=t.Ik({email:t.Yj().email({message:"Invalid email address."}),password:t.Yj().min(8,{message:"Password must be at least 8 characters."}),confirmPassword:t.Yj(),name:t.Yj().min(2,{message:"Name must be at least 2 characters."}),abn:t.Yj().min(1,{message:"ABN is required."}),bio:t.Yj().min(20,{message:"Bio must be at least 20 characters."}).max(500,{message:"Bio cannot exceed 500 characters."}),specialties:t.Yj().min(1,{message:"Please list at least one specialty."}),profilePictureFile:t.Nl(File).optional().refine(e=>!e||e.size<=2097152,"Max file size is 2MB.").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only JPG, PNG, WEBP files are allowed."),agreedToTerms:t.zM().refine(e=>!0===e,{message:"You must agree to the terms and policies to continue."}),education:t.Yj().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function F(){let[e,s]=(0,h.useState)(null),[a,t]=(0,h.useState)(null),[v,F]=(0,h.useState)(!1),[B,I]=(0,h.useState)(null),[U,M]=(0,h.useState)(null),{toast:D}=(0,f.dj)(),T=(0,k.useRouter)(),[V,z]=(0,h.useState)(!1),J=(0,l.mN)({resolver:(0,i.u)(R),defaultValues:{email:"",password:"",confirmPassword:"",name:"",abn:"",bio:"",specialties:"",agreedToTerms:!1,profilePictureFile:void 0,education:""}}),Y=e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(a){J.setValue("profilePictureFile",a,{shouldValidate:!0}),M(a);let e=new FileReader;e.onloadend=()=>{I(e.result)},e.readAsDataURL(a)}else J.setValue("profilePictureFile",void 0),M(null),I(null)},q=async r=>{if(!v||!a||!e)return void D({title:"Resume Required",description:"Please upload and parse your resume before submitting.",variant:"destructive"});z(!0),console.log("ChefSignup: Starting signup process for email:",r.email);try{var i,l;console.log("ChefSignup: Attempting to create Firebase Auth user...");let o=(await (0,N.eJ)(P.j2,r.email,r.password)).user;console.log("ChefSignup: Firebase Auth user created successfully. UID:",o.uid);let n="",c="";if(U){console.log("ChefSignup: Uploading profile picture. Current auth UID:",null==(l=P.j2.currentUser)?void 0:l.uid);let e=U.name.split(".").pop()||"jpg",s="users/".concat(o.uid,"/profilePicture.").concat(e);console.log("ChefSignup: Uploading profile picture to Storage Path:",s);let a=(0,S.KR)(P.IG,s);try{let e=await (0,S.bp)(a,U);n=await (0,S.qk)(e.ref),console.log("ChefSignup: Profile picture uploaded successfully:",n)}catch(e){console.error("ChefSignup: Profile picture upload error:",e),D({title:"Profile Picture Upload Failed",description:e.message||"Could not upload profile picture.",variant:"destructive"})}}console.log("ChefSignup: Uploading resume file...");let d=(null==(i=e.name.split(".").pop())?void 0:i.toLowerCase())||"pdf",u="users/".concat(o.uid,"/resume.").concat(d);console.log("ChefSignup: Uploading resume to Storage Path:",u);let p=(0,S.KR)(P.IG,u);try{let s=await (0,S.bp)(p,e);c=await (0,S.qk)(s.ref),console.log("ChefSignup: Resume file uploaded successfully:",c)}catch(e){throw console.error("ChefSignup: Resume file upload error:",e),D({title:"Resume Upload Failed",description:e.message||"Could not upload resume.",variant:"destructive"}),e}console.log("ChefSignup: Updating Firebase Auth profile...");try{await (0,N.r7)(o,{displayName:r.name,photoURL:n||null}),console.log("ChefSignup: Firebase Auth profile updated.")}catch(e){console.warn("ChefSignup: Error updating Firebase Auth profile (non-critical):",e)}let m={id:o.uid,email:o.email,name:r.name,abn:r.abn,bio:r.bio,specialties:r.specialties.split(",").map(e=>e.trim()).filter(e=>e),experienceSummary:a.experience||"",skills:a.skills||[],education:a.education||"",profilePictureUrl:n||"",resumeFileUrl:c||"",role:"chef",accountStatus:"active",isApproved:!1,isSubscribed:!1,trustScore:3,trustScoreBasis:"New chef - awaiting activity",hasCompletedFirstCoOp:!1,collaboratorIds:[],outgoingCollaborationRequests:[],incomingCollaborationRequests:[],stripeAccountId:"",stripeOnboardingComplete:!1,createdAt:(0,A.O5)(),updatedAt:(0,A.O5)()};console.log("ChefSignup: Saving chef profile to Firestore with role:",m.role);try{await (0,A.BN)((0,A.H9)(P.db,"users",o.uid),m),console.log("ChefSignup: Firestore document created successfully for user:",o.uid)}catch(s){console.error("ChefSignup: Error saving profile to Firestore:",s);let e="Could not save profile data to database.";throw"permission-denied"===s.code&&(e="Database permission denied. Check Firestore security rules for creating user profiles."),D({title:"Profile Save Failed",description:e,variant:"destructive",duration:7e3}),s}D({title:"Signup Successful!",description:"Your chef account has been created. Admin approval is required for full access. You will be redirected to login.",duration:8e3}),J.reset(),t(null),s(null),F(!1),M(null),I(null),T.push("/login?email="+r.email)}catch(s){console.error("ChefSignup: Overall signup error:",s);let e="Failed to create account. Please try again.";"auth/email-already-in-use"===s.code?e="This email address is already in use. Please log in or use a different email.":"auth/weak-password"===s.code?e="The password is too weak. Please choose a stronger password.":s.message&&(s.message.includes("permission denied")||"permission-denied"===s.code)?e="Database operation failed due to permissions. Please check security rules.":s.code&&s.message?e="An error occurred: ".concat(s.message," (Code: ").concat(s.code,")"):s.message&&(e=s.message),D({title:"Signup Failed",description:e,variant:"destructive",duration:7e3})}finally{z(!1)}};return(0,r.jsx)("div",{className:"container mx-auto max-w-4xl py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)(p.Zp,{className:"shadow-xl",children:[(0,r.jsxs)(p.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary","data-ai-hint":"chef hat logo",children:(0,r.jsx)(x.A,{className:"h-8 w-8"})}),(0,r.jsx)(p.ZB,{className:"text-3xl font-bold",children:"Become a Chef on FindAChef"}),(0,r.jsx)(p.BT,{className:"text-lg",children:"Join our platform to showcase your skills, manage bookings, and connect with clients."})]}),(0,r.jsxs)(p.Wu,{className:"space-y-8",children:[(0,r.jsx)(m.X,{onResumeParsed:e=>{console.log("ChefSignup: Resume parsed, data received:",e.parsedData),t(e.parsedData),s(e.file),F(!0),e.parsedData.experience&&""===J.getValues("bio")&&J.setValue("bio",e.parsedData.experience.substring(0,500),{shouldValidate:!0}),e.parsedData.skills&&e.parsedData.skills.length>0&&""===J.getValues("specialties")&&J.setValue("specialties",e.parsedData.skills.join(", "),{shouldValidate:!0}),e.parsedData.education&&""===J.getValues("education")&&J.setValue("education",e.parsedData.education,{shouldValidate:!0})},initialData:null!=a?a:void 0}),(0,r.jsx)(n.lV,{...J,children:(0,r.jsxs)("form",{onSubmit:J.handleSubmit(q),className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold border-b pb-2",children:"Account Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(n.zB,{control:J.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Email Address"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{placeholder:"you@example.com",...s})}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Full Name"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{placeholder:"e.g., Julia Child",...s})}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Password"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{type:"password",placeholder:"•••••••• (min. 8 characters)",...s})}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"confirmPassword",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Confirm Password"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{type:"password",placeholder:"••••••••",...s})}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"abn",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"ABN (Australian Business Number)"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{placeholder:"Your ABN",...s})}),(0,r.jsx)(n.C5,{})]})}})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold border-b pb-2 pt-4",children:"Profile Details"}),(0,r.jsx)(n.zB,{control:J.control,name:"profilePictureFile",render:()=>(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Profile Picture"}),(0,r.jsx)(n.MJ,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[B?(0,r.jsx)(g.default,{src:B,alt:"Profile preview",width:80,height:80,className:"rounded-full object-cover","data-ai-hint":"person avatar"}):(0,r.jsx)("div",{className:"h-20 w-20 rounded-full bg-muted flex items-center justify-center text-muted-foreground","data-ai-hint":"avatar placeholder",children:(0,r.jsx)(j.A,{className:"h-10 w-10"})}),(0,r.jsx)(c.p,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:Y,className:"hidden",id:"profilePictureUpload"}),(0,r.jsx)(o.$,{type:"button",variant:"outline",asChild:!0,children:(0,r.jsxs)("label",{htmlFor:"profilePictureUpload",className:"cursor-pointer",children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Upload Photo"]})})]})}),(0,r.jsx)(n.Rr,{children:"Upload a professional headshot (JPG, PNG, WEBP, max 2MB)."}),(0,r.jsx)(n.C5,{})]})}),(0,r.jsx)(n.zB,{control:J.control,name:"bio",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Short Bio"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(d.T,{placeholder:"Tell us about your culinary passion, experience, and what makes your cooking unique.",className:"min-h-[100px]",...s})}),(0,r.jsx)(n.Rr,{children:"Max 500 characters. This will be shown on your public profile."}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"specialties",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{children:[(0,r.jsx)(n.lR,{children:"Specialties / Cuisine Types (Tags)"}),(0,r.jsx)(n.MJ,{children:(0,r.jsx)(c.p,{placeholder:"e.g., Italian, Pastry, Plant-based, Foraging",...s})}),(0,r.jsx)(n.Rr,{children:"Comma-separated list of your culinary specialties or tags."}),(0,r.jsx)(n.C5,{})]})}}),(0,r.jsx)(n.zB,{control:J.control,name:"agreedToTerms",render:e=>{let{field:s}=e;return(0,r.jsxs)(n.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 shadow-sm",children:[(0,r.jsx)(n.MJ,{children:(0,r.jsx)(u.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,r.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,r.jsxs)(n.lR,{className:"flex items-center",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Agreement & Policies"]}),(0,r.jsxs)(n.Rr,{children:["I agree to the FindAChef ",(0,r.jsx)(C(),{href:"/terms",className:"underline hover:text-primary",children:"Terms of Service"}),", ",(0,r.jsx)(C(),{href:"/chef-policies",className:"underline hover:text-primary",children:"Chef Program Policies"}),", and acknowledge the ",(0,r.jsx)(C(),{href:"/privacy-policy",className:"underline hover:text-primary",children:"Privacy Policy"}),". This includes keeping all communications and payments on the platform."]}),(0,r.jsx)(n.C5,{})]})]})}}),(0,r.jsx)(o.$,{type:"submit",className:"w-full text-lg py-3",size:"lg",disabled:!v||V||J.formState.isSubmitting,children:V?(0,r.jsx)(w.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Create Chef Account"]})}),!v&&(0,r.jsx)("p",{className:"text-sm text-destructive text-center",children:"Please upload and parse your resume above to enable account creation."})]})})]})]})})}},14437:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},37607:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])},47262:(e,s,a)=>{"use strict";a.d(s,{S:()=>n});var r=a(95155),i=a(12115),l=a(76981),t=a(10518),o=a(59434);let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...i,children:(0,r.jsx)(l.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(t.A,{className:"h-4 w-4"})})})});n.displayName=l.bL.displayName},86349:(e,s,a)=>{Promise.resolve().then(a.bind(a,6830))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7446,9352,4453,4602,6766,65,6874,1342,624,4291,8441,1684,7358],()=>s(86349)),_N_E=e.O()}]);