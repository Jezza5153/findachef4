(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3052],{6830:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var a=r(95155),i=r(90221),l=r(62177),t=r(55594),o=r(30285),n=r(17759),c=r(62523),d=r(88539),u=r(47262),p=r(66695),m=r(83138),h=r(12115),f=r(87481),g=r(66766),x=r(50744),j=r(12318),b=r(42337),S=r(90232),C=r(51154),w=r(6874),v=r.n(w),y=r(93004),N=r(56104),P=r(90858),A=r(35317),R=r(35695);let F=t.Ik({email:t.Yj().email({message:"Invalid email address."}),password:t.Yj().min(8,{message:"Password must be at least 8 characters."}),confirmPassword:t.Yj(),name:t.Yj().min(2,{message:"Name must be at least 2 characters."}),abn:t.Yj().min(1,{message:"ABN is required."}),bio:t.Yj().min(20,{message:"Bio must be at least 20 characters."}).max(500,{message:"Bio cannot exceed 500 characters."}),specialties:t.Yj().min(1,{message:"Please list at least one specialty."}),profilePictureFile:t.Nl(File).optional().refine(e=>!e||e.size<=2097152,"Max file size is 2MB.").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only JPG, PNG, WEBP files are allowed."),agreedToTerms:t.zM().refine(e=>!0===e,{message:"You must agree to the terms and policies to continue."}),education:t.Yj().max().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function k(){let[e,s]=(0,h.useState)(null),[r,t]=(0,h.useState)(null),[w,k]=(0,h.useState)(!1),[I,U]=(0,h.useState)(null),[B,D]=(0,h.useState)(null),{toast:T}=(0,f.dj)(),E=(0,R.useRouter)(),[M,J]=(0,h.useState)(!1),z=(0,l.mN)({resolver:(0,i.u)(F),defaultValues:{email:"",password:"",confirmPassword:"",name:"",abn:"",bio:"",specialties:"",agreedToTerms:!1,profilePictureFile:void 0,education:""}}),V=e=>{var s;let r=null==(s=e.target.files)?void 0:s[0];if(r){z.setValue("profilePictureFile",r,{shouldValidate:!0}),D(r);let e=new FileReader;e.onloadend=()=>{U(e.result)},e.readAsDataURL(r)}else z.setValue("profilePictureFile",void 0),D(null),U(null)},Y=async a=>{if(console.log("ChefSignup: Form submitted with data:",a),!w||!r||!e)return void T({title:"Resume Required",description:"Please upload and parse your resume before submitting.",variant:"destructive"});J(!0),console.log("ChefSignup: Step 0 - Starting signup process for email:",a.email);try{console.log("ChefSignup: Step 1 - Attempting Firebase Auth user creation...");let l=(await (0,y.eJ)(N.j2,a.email,a.password)).user;console.log("ChefSignup: Step 1 successful - Firebase Auth user created. UID:",l.uid);let o="",n="";if(B){console.log("ChefSignup: Before profile picture upload, checking auth state:"),console.log("ChefSignup: auth.currentUser:",N.j2.currentUser);try{console.log("ChefSignup: Step 2 - Attempting profile picture upload for UID:",l.uid);let e=B.name.split(".").pop()||"jpg",s="users/".concat(l.uid,"/profilePicture.").concat(e);console.log("ChefSignup: Uploading profile picture to Storage Path:",s);let r=(0,P.KR)(N.IG,s),a=await (0,P.bp)(r,B);o=await (0,P.qk)(a.ref),console.log("ChefSignup: Step 2 successful - Profile picture uploaded:",o)}catch(e){console.error("ChefSignup: Error at Step 2 - Profile picture upload failed for UID:",l.uid,e),T({title:"Profile Picture Upload Failed",description:e.message||"Could not upload profile picture.",variant:"destructive"})}}else console.log("ChefSignup: Step 2 - No profile picture provided, skipping upload.");if(e){console.log("ChefSignup: Before resume file upload, checking auth state:"),console.log("ChefSignup: auth.currentUser:",N.j2.currentUser);try{var i;console.log("ChefSignup: Step 3 - Attempting resume file upload for UID:",l.uid);let s=(null==(i=e.name.split(".").pop())?void 0:i.toLowerCase())||"pdf",r="users/".concat(l.uid,"/resume.").concat(s);console.log("ChefSignup: Uploading resume to Storage Path:",r);let a=(0,P.KR)(N.IG,r),t=await (0,P.bp)(a,e);n=await (0,P.qk)(t.ref),console.log("ChefSignup: Step 3 successful - Resume file uploaded:",n)}catch(e){console.error("ChefSignup: Error at Step 3 - Resume file upload failed for UID:",l.uid,e),T({title:"Resume Upload Failed",description:e.message||"Could not upload resume.",variant:"destructive"}),J(!1);return}}else{console.error("ChefSignup: Error at Step 3 - Resume file is missing, though it was required."),T({title:"Internal Error",description:"Resume file was missing during processing.",variant:"destructive"}),J(!1);return}try{console.log("ChefSignup: Step 4 - Attempting to update Firebase Auth profile (displayName, photoURL) for UID:",l.uid),await (0,y.r7)(l,{displayName:a.name,photoURL:o||null}),console.log("ChefSignup: Step 4 successful - Firebase Auth profile updated.")}catch(e){console.warn("ChefSignup: Warning at Step 4 - Error updating Firebase Auth profile (non-critical for signup completion) for UID:",l.uid,e)}console.log("ChefSignup: Step 5 - Preparing Firestore user profile data for UID:",l.uid);let c={id:l.uid,email:l.email,name:a.name,abn:a.abn,bio:a.bio,specialties:a.specialties.split(",").map(e=>e.trim()).filter(e=>e),experienceSummary:(null==r?void 0:r.experience)||"",skills:(null==r?void 0:r.skills)||[],education:(null==r?void 0:r.education)||a.education||"",profilePictureUrl:o||"",resumeFileUrl:n||"",role:"chef",accountStatus:"active",isApproved:!1,isSubscribed:!1,trustScore:3,trustScoreBasis:"New chef - awaiting activity",hasCompletedFirstCoOp:!1,collaboratorIds:[],outgoingCollaborationRequests:[],incomingCollaborationRequests:[],stripeAccountId:"",stripeOnboardingComplete:!1,createdAt:(0,A.O5)(),updatedAt:(0,A.O5)()};console.log("ChefSignup: User profile data to save:",c),console.log("ChefSignup: Saving chef profile to Firestore with role:",c.role);try{console.log("ChefSignup: Step 5 - Attempting to save profile to Firestore for UID:",l.uid),await (0,A.BN)((0,A.H9)(N.db,"users",l.uid),c),console.log("ChefSignup: Step 5 successful - Firestore document created successfully for user:",l.uid)}catch(s){console.error("ChefSignup: Error at Step 5 - Error saving profile to Firestore for UID:",l.uid,s);let e="Could not save profile data to database.";"permission-denied"===s.code&&(e="Database permission denied. Check Firestore security rules for creating user profiles."),T({title:"Profile Save Failed",description:e,variant:"destructive",duration:7e3}),J(!1);return}console.log("ChefSignup: All steps completed successfully for UID:",l.uid),T({title:"Signup Successful!",description:"Your chef account has been created. Admin approval is required for full access. You will be redirected to login.",duration:8e3}),z.reset(),t(null),s(null),k(!1),D(null),U(null),E.push("/login?email="+a.email)}catch(s){console.error("ChefSignup: Error at Step 1 - Firebase Auth user creation failed:",s);let e="Failed to create account. Please try again.";"auth/email-already-in-use"===s.code?e="This email address is already in use. Please log in or use a different email.":"auth/weak-password"===s.code?e="The password is too weak. Please choose a stronger password.":s.message&&(s.message.includes("permission denied")||"permission-denied"===s.code)?e="Database operation failed due to permissions. Please check security rules.":s.code&&s.message?e="An error occurred: ".concat(s.message," (Code: ").concat(s.code,")"):s.message&&(e=s.message),T({title:"Signup Failed",description:e,variant:"destructive",duration:7e3})}finally{J(!1),console.log("ChefSignup: Signup process ended for email:",a.email)}};return(0,a.jsx)("div",{className:"container mx-auto max-w-4xl py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)(p.Zp,{className:"shadow-xl",children:[(0,a.jsxs)(p.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary","data-ai-hint":"chef hat logo",children:(0,a.jsx)(x.A,{className:"h-8 w-8"})}),(0,a.jsx)(p.ZB,{className:"text-3xl font-bold",children:"Become a Chef on FindAChef"}),(0,a.jsx)(p.BT,{className:"text-lg",children:"Join our platform to showcase your skills, manage bookings, and connect with clients."})]}),(0,a.jsxs)(p.Wu,{className:"space-y-8",children:[(0,a.jsx)(m.X,{onResumeParsed:e=>{console.log("ChefSignup: Resume parsed, data received:",e.parsedData),t(e.parsedData),s(e.file),k(!0),e.parsedData.experience&&""===z.getValues("bio")&&z.setValue("bio",e.parsedData.experience.substring(0,500),{shouldValidate:!0}),e.parsedData.skills&&e.parsedData.skills.length>0&&""===z.getValues("specialties")&&z.setValue("specialties",e.parsedData.skills.join(", "),{shouldValidate:!0}),e.parsedData.education&&""===z.getValues("education")&&z.setValue("education",e.parsedData.education,{shouldValidate:!0})},initialData:null!=r?r:void 0}),(0,a.jsx)(n.lV,{...z,children:(0,a.jsxs)("form",{onSubmit:z.handleSubmit(Y),className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold border-b pb-2",children:"Account Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(n.zB,{control:z.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Email Address"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{placeholder:"you@example.com",...s})}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Full Name"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{placeholder:"e.g., Julia Child",...s})}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"password",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Password"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{type:"password",placeholder:"•••••••• (min. 8 characters)",...s})}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"confirmPassword",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Confirm Password"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{type:"password",placeholder:"••••••••",...s})}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"abn",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"ABN (Australian Business Number)"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{placeholder:"Your ABN",...s})}),(0,a.jsx)(n.C5,{})]})}})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold border-b pb-2 pt-4",children:"Profile Details"}),(0,a.jsx)(n.zB,{control:z.control,name:"profilePictureFile",render:()=>(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Profile Picture"}),(0,a.jsx)(n.MJ,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[I?(0,a.jsx)(g.default,{src:I,alt:"Profile preview",width:80,height:80,className:"rounded-full object-cover","data-ai-hint":"person avatar"}):(0,a.jsx)("div",{className:"h-20 w-20 rounded-full bg-muted flex items-center justify-center text-muted-foreground","data-ai-hint":"avatar placeholder",children:(0,a.jsx)(j.A,{className:"h-10 w-10"})}),(0,a.jsx)(c.p,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:V,className:"hidden",id:"profilePictureUpload"}),(0,a.jsx)(o.$,{type:"button",variant:"outline",asChild:!0,children:(0,a.jsxs)("label",{htmlFor:"profilePictureUpload",className:"cursor-pointer",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Upload Photo"]})})]})}),(0,a.jsx)(n.Rr,{children:"Upload a professional headshot (JPG, PNG, WEBP, max 2MB)."}),(0,a.jsx)(n.C5,{})]})}),(0,a.jsx)(n.zB,{control:z.control,name:"bio",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Short Bio"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(d.T,{placeholder:"Tell us about your culinary passion, experience, and what makes your cooking unique.",className:"min-h-[100px]",...s})}),(0,a.jsx)(n.Rr,{children:"Max 500 characters. This will be shown on your public profile."}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"specialties",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Specialties / Cuisine Types (Tags)"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(c.p,{placeholder:"e.g., Italian, Pastry, Plant-based, Foraging",...s})}),(0,a.jsx)(n.Rr,{children:"Comma-separated list of your culinary specialties or tags."}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"education",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{children:[(0,a.jsx)(n.lR,{children:"Education (from resume or manual input)"}),(0,a.jsx)(n.MJ,{children:(0,a.jsx)(d.T,{placeholder:"Education details extracted from resume or entered manually.",className:"min-h-[80px]",...s})}),(0,a.jsx)(n.Rr,{children:"This field can be auto-filled by resume parsing. Max 2000 characters."}),(0,a.jsx)(n.C5,{})]})}}),(0,a.jsx)(n.zB,{control:z.control,name:"agreedToTerms",render:e=>{let{field:s}=e;return(0,a.jsxs)(n.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 shadow-sm",children:[(0,a.jsx)(n.MJ,{children:(0,a.jsx)(u.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,a.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,a.jsxs)(n.lR,{className:"flex items-center",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Agreement & Policies"]}),(0,a.jsxs)(n.Rr,{children:["I agree to the FindAChef ",(0,a.jsx)(v(),{href:"/terms",className:"underline hover:text-primary",children:"Terms of Service"}),", ",(0,a.jsx)(v(),{href:"/chef-policies",className:"underline hover:text-primary",children:"Chef Program Policies"}),", and acknowledge the ",(0,a.jsx)(v(),{href:"/privacy-policy",className:"underline hover:text-primary",children:"Privacy Policy"}),". This includes keeping all communications and payments on the platform."]}),(0,a.jsx)(n.C5,{})]})]})}}),(0,a.jsx)(o.$,{type:"submit",className:"w-full text-lg py-3",size:"lg",disabled:!w||M||z.formState.isSubmitting,children:M?(0,a.jsx)(C.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Create Chef Account"]})}),!w&&(0,a.jsx)("p",{className:"text-sm text-destructive text-center",children:"Please upload and parse your resume above to enable account creation."})]})})]})]})})}},47262:(e,s,r)=>{"use strict";r.d(s,{S:()=>n});var a=r(95155),i=r(12115),l=r(76981),t=r(5196),o=r(59434);let n=i.forwardRef((e,s)=>{let{className:r,...i}=e;return(0,a.jsx)(l.bL,{ref:s,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,a.jsx)(l.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(t.A,{className:"h-4 w-4"})})})});n.displayName=l.bL.displayName},86349:(e,s,r)=>{Promise.resolve().then(r.bind(r,6830))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7446,9352,5100,4602,6874,6766,7322,8938,2507,8441,1684,7358],()=>s(86349)),_N_E=e.O()}]);