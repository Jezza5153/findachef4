(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8292],{27916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var s=r(95155),a=r(66695),n=r(86426),o=r(50172),l=r(763),i=r(76570),c=r(88390),d=r(5263),u=r(60960),m=r(6237),h=r(12115),f=r(83540),x=r(94517),p=r(24026),g=r(59434);let v={light:"",dark:".dark"},j=h.createContext(null);function y(){let e=h.useContext(j);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let b=h.forwardRef((e,t)=>{let{id:r,className:a,children:n,config:o,...l}=e,i=h.useId(),c="chart-".concat(r||i.replace(/:/g,""));return(0,s.jsx)(j.Provider,{value:{config:o},children:(0,s.jsxs)("div",{"data-chart":c,ref:t,className:(0,g.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...l,children:[(0,s.jsx)(N,{id:c,config:o}),(0,s.jsx)(f.u,{children:n})]})})});b.displayName="Chart";let N=e=>{let{id:t,config:r}=e,a=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return a.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(v).map(e=>{let[r,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[s,a]=e,n=(null==(t=a.theme)?void 0:t[r])||a.color;return n?"  --color-".concat(s,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},A=x.m,w=h.forwardRef((e,t)=>{let{active:r,payload:a,className:n,indicator:o="dot",hideLabel:l=!1,hideIndicator:i=!1,label:c,labelFormatter:d,labelClassName:u,formatter:m,color:f,nameKey:x,labelKey:p}=e,{config:v}=y(),j=h.useMemo(()=>{var e;if(l||!(null==a?void 0:a.length))return null;let[t]=a,r="".concat(p||t.dataKey||t.name||"value"),n=S(v,t,r),o=p||"string"!=typeof c?null==n?void 0:n.label:(null==(e=v[c])?void 0:e.label)||c;return d?(0,s.jsx)("div",{className:(0,g.cn)("font-medium",u),children:d(o,a)}):o?(0,s.jsx)("div",{className:(0,g.cn)("font-medium",u),children:o}):null},[c,d,a,l,u,v,p]);if(!r||!(null==a?void 0:a.length))return null;let b=1===a.length&&"dot"!==o;return(0,s.jsxs)("div",{ref:t,className:(0,g.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[b?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:a.map((e,t)=>{let r="".concat(x||e.name||e.dataKey||"value"),a=S(v,e,r),n=f||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,g.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.icon)?(0,s.jsx)(a.icon,{}):!i&&(0,s.jsx)("div",{className:(0,g.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":b&&"dashed"===o}),style:{"--color-bg":n,"--color-border":n}}),(0,s.jsxs)("div",{className:(0,g.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[b?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});w.displayName="ChartTooltip";let C=p.s,D=h.forwardRef((e,t)=>{let{className:r,hideIcon:a=!1,payload:n,verticalAlign:o="bottom",nameKey:l}=e,{config:i}=y();return(null==n?void 0:n.length)?(0,s.jsx)("div",{ref:t,className:(0,g.cn)("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",r),children:n.map(e=>{let t="".concat(l||e.dataKey||"value"),r=S(i,e,t);return(0,s.jsxs)("div",{className:(0,g.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!a?(0,s.jsx)(r.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null});function S(e,t,r){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=r;return r in t&&"string"==typeof t[r]?a=t[r]:s&&r in s&&"string"==typeof s[r]&&(a=s[r]),a in e?e[a]:e[r]}D.displayName="ChartLegend";var k=r(93774),I=r(94754),_=r(16238),E=r(96025),R=r(17398),F=r(59576),M=r(56104),U=r(35317),P=r(6874),B=r.n(P),T=r(30285),Z=r(34095),K=r(90010);let q={views:{label:"Views",color:"hsl(var(--chart-1))"},requests:{label:"Requests",color:"hsl(var(--chart-2))"}};function z(){let{user:e,userProfile:t}=(0,F.A)(),[r,f]=(0,h.useState)(null),[x,p]=(0,h.useState)(!0),[g,v]=(0,h.useState)([]),[j,y]=(0,h.useState)(!0),[N,S]=(0,h.useState)(null),[P,z]=(0,h.useState)(!0),[L,O]=(0,h.useState)([]),[W,J]=(0,h.useState)(!0),[Q,Y]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{if(!e||!t){p(!1),y(!1),z(!1),J(!1),f(0),S(0),v([]),O([]);return}p(!0);let r=U.Dc.fromDate(new Date),s=(0,U.rJ)(M.db,"users/".concat(e.uid,"/calendarEvents")),a=(0,U.P)(s,(0,U._M)("status","==","Confirmed"),(0,U._M)("date",">=",r)),n=(0,U.aQ)(a,e=>{f(e.size),p(!1)},e=>{console.error("Error fetching upcoming events count:",e),f(0),p(!1)});y(!0);let o=(0,U.rJ)(M.db,"users/".concat(e.uid,"/activities")),l=(0,U.P)(o,(0,U.My)("timestamp","desc"),(0,U.AB)(5)),i=(0,U.aQ)(l,e=>{v(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,timestamp:t.timestamp instanceof U.Dc?t.timestamp.toDate():new Date(t.timestamp)}})),y(!1)},e=>{console.error("Error fetching recent activity:",e),v([]),y(!1)});z(!0);let c=(0,U.rJ)(M.db,"customerRequests"),d=(0,U.P)(c,(0,U._M)("status","in",["new","awaiting_customer_response","proposal_sent","chef_accepted"])),u=(0,U.aQ)(d,t=>{let r=0;t.forEach(t=>{var s;let a=t.data();("new"===a.status||a.respondingChefIds&&a.respondingChefIds.includes(e.uid)&&"awaiting_customer_response"===a.status||(null==(s=a.activeProposal)?void 0:s.chefId)===e.uid&&("proposal_sent"===a.status||"chef_accepted"===a.status))&&r++}),S(r),z(!1)},e=>{console.error("Error fetching booking requests count:",e),S(0),z(!1)});J(!0);let m=(0,U.rJ)(M.db,"menus"),h=(0,U.P)(m,(0,U._M)("chefId","==",e.uid),(0,U.My)("createdAt","desc"),(0,U.AB)(4));return(0,U.GG)(h).then(e=>{let t=[];O(e.empty?[{menu:"Example Menu 1",views:Math.floor(150*Math.random())+20,requests:Math.floor(20*Math.random())+1},{menu:"Example Menu 2",views:Math.floor(150*Math.random())+20,requests:Math.floor(20*Math.random())+1}]:e.docs.map(e=>{let t=e.data();return{menu:t.title.length>15?t.title.substring(0,12)+"...":t.title,views:Math.floor(150*Math.random())+20,requests:Math.floor((Math.floor(150*Math.random())+20)/5*Math.random())}})),J(!1)}).catch(e=>{console.error("Error fetching menus for engagement chart:",e),O([{menu:"Data Error",views:0,requests:0}]),J(!1)}),()=>{n(),i(),u()}},[e,t]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ZB,{className:"text-sm font-medium",children:"Booking Requests"}),(0,s.jsx)(n.A,{className:"h-5 w-5 text-muted-foreground","data-ai-hint":"message chat"})]}),(0,s.jsxs)(a.Wu,{children:[P?(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}):(0,s.jsx)("div",{className:"text-2xl font-bold",children:null!=N?N:0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:P?"Fetching data...":"Active requests needing attention."})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ZB,{className:"text-sm font-medium",children:"Upcoming Confirmed Events"}),(0,s.jsx)(l.A,{className:"h-5 w-5 text-muted-foreground","data-ai-hint":"calendar event"})]}),(0,s.jsxs)(a.Wu,{children:[x?(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"}):(0,s.jsx)("div",{className:"text-2xl font-bold",children:null!=r?r:0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:x?"Fetching data...":"Events confirmed and upcoming."})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ZB,{className:"text-sm font-medium",children:"Trust Score"}),(0,s.jsx)(i.A,{className:"h-5 w-5 text-muted-foreground","data-ai-hint":"shield security"})]}),(0,s.jsx)(a.Wu,{children:(null==t?void 0:t.trustScore)!==void 0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[t.trustScore.toFixed(1),"/5"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:t.trustScoreBasis||"Based on platform activity"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"N/A"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting activity to calculate score."})]})})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsx)(a.aR,{children:(0,s.jsxs)(a.ZB,{className:"flex items-center",children:[(0,s.jsx)(c.A,{className:"mr-2 h-5 w-5 text-green-600","data-ai-hint":"money payment"}),"Stripe Account Status"]})}),(0,s.jsx)(a.Wu,{children:t?t.stripeOnboardingComplete?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-600 font-semibold",children:"Your Stripe account is connected and ready for payouts!"}),t.stripeAccountId&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Account ID: ",t.stripeAccountId.length>10?"...".concat(t.stripeAccountId.slice(-4)):t.stripeAccountId]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-orange-600",children:"Your Stripe account is not yet connected or onboarding is incomplete."}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Connect with Stripe to receive payouts for your events and services."}),(0,s.jsx)(T.$,{onClick:()=>Y(!0),children:"Connect with Stripe"})]}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading account status..."})})]}),(0,s.jsx)(K.AlertDialog,{open:Q,onOpenChange:Y,children:(0,s.jsxs)(K.AlertDialogContent,{children:[(0,s.jsxs)(K.AlertDialogHeader,{children:[(0,s.jsx)(K.AlertDialogTitle,{children:"Connect Your Stripe Account"}),(0,s.jsxs)(K.AlertDialogDescription,{children:[(0,s.jsx)("p",{className:"mb-2",children:"To receive payouts for your bookings on FindAChef, you need to connect a Stripe account."}),(0,s.jsx)("p",{className:"mb-2",children:"Clicking the button below (in a real application) would redirect you to Stripe's secure onboarding page where you can either connect an existing Stripe account or create a new one."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"FindAChef uses Stripe for secure payment processing and payouts. We do not store your sensitive financial details."})]})]}),(0,s.jsxs)(K.AlertDialogFooter,{children:[(0,s.jsx)(K.AlertDialogCancel,{children:"Cancel"}),(0,s.jsx)(K.AlertDialogAction,{onClick:()=>{alert("Simulated: Redirecting to Stripe for account connection. This would involve a backend call to create an Account Link."),Y(!1)},children:"Proceed to Stripe (Simulated)"})]})]})}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsx)(a.aR,{children:(0,s.jsxs)(a.ZB,{className:"flex items-center",children:[(0,s.jsx)(d.A,{className:"mr-2 h-5 w-5 text-primary","data-ai-hint":"bar chart statistics"})," Menu Engagement"]})}),(0,s.jsxs)(a.Wu,{children:[W?(0,s.jsx)("div",{className:"flex justify-center items-center h-[250px]",children:(0,s.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})}):L.length>0?(0,s.jsx)(b,{config:q,className:"h-[250px] w-full",children:(0,s.jsxs)(k.E,{data:L,layout:"vertical",barCategoryGap:"20%",children:[(0,s.jsx)(I.d,{horizontal:!1}),(0,s.jsx)(_.h,{dataKey:"menu",type:"category",tickLine:!1,axisLine:!1,width:80}),(0,s.jsx)(E.W,{type:"number"}),(0,s.jsx)(A,{content:(0,s.jsx)(w,{})}),(0,s.jsx)(C,{content:(0,s.jsx)(D,{})}),(0,s.jsx)(R.y,{dataKey:"views",fill:"var(--color-views)",radius:4}),(0,s.jsx)(R.y,{dataKey:"requests",fill:"var(--color-requests)",radius:4})]})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No menu data to display engagement for. Create some menus!"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"(Example data shown - real tracking requires advanced setup)"})]})]}),(0,s.jsxs)(a.Zp,{className:"shadow-md",children:[(0,s.jsx)(a.aR,{children:(0,s.jsxs)(a.ZB,{className:"flex items-center",children:[(0,s.jsx)(u.A,{className:"mr-2 h-5 w-5 text-primary","data-ai-hint":"checklist tasks"})," Recent Activity"]})}),(0,s.jsx)(a.Wu,{children:j?(0,s.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,s.jsx)(o.A,{className:"h-6 w-6 animate-spin text-primary"})}):g.length>0?(0,s.jsx)("ul",{className:"space-y-3 max-h-[250px] overflow-y-auto",children:g.map(e=>(0,s.jsxs)("li",{className:"flex items-start justify-between text-sm pb-2 border-b border-dashed last:border-b-0",children:[(0,s.jsx)("div",{children:e.linkTo?(0,s.jsx)(T.$,{variant:"link",asChild:!0,className:"p-0 h-auto text-left",children:(0,s.jsx)(B(),{href:e.linkTo,className:"hover:underline",children:e.description})}):(0,s.jsx)("span",{children:e.description})}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground whitespace-nowrap ml-2",children:[(0,s.jsx)(m.A,{className:"h-3 w-3 inline-block mr-1","data-ai-hint":"clock time"}),e.timestamp?(0,Z.m)(new Date(e.timestamp),{addSuffix:!0}):"Just now"]})]},e.id))}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent activity to display."})})]})]})]})}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>i});var s=r(95155),a=r(12115),n=r(99708),o=r(74466),l=r(59434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(i({variant:a,size:o,className:r})),ref:t,...d})});c.displayName="Button"},56104:(e,t,r)=>{"use strict";let s,a,n,o;r.d(t,{IG:()=>n,db:()=>o,j2:()=>a});var l=r(23915),i=r(93004),c=r(90858),d=r(35317);let u={apiKey:'"AIzaSyDNMNa2a-BFUlmQ6PAA2hAIA3j07dYQUWQ",',authDomain:'"findachef2.firebaseapp.com",',projectId:'"findachef2",',storageBucket:'"findachef2.firebasestorage.app",',messagingSenderId:'"738524307993",',appId:'"1:738524307993:web:780dbfa516d646154cc088",',measurementId:'ntId: "G-PFXWD80NBY"'};if(u.apiKey&&u.projectId||(console.error("CRITICAL FIREBASE CONFIG ERROR: NEXT_PUBLIC_FIREBASE_API_KEY or NEXT_PUBLIC_FIREBASE_PROJECT_ID is missing or undefined."),console.error("This will cause Firebase services (Auth, Firestore, Storage) to fail."),console.error("Ensure these are correctly set in your .env.local file (for local development) AND in your Vercel project environment variables (for deployment).")),console.log("Firebase Initializing with Project ID:",u.projectId||"MISSING/UNDEFINED"),console.log("Firebase Using API Key (first 5 chars):",u.apiKey?u.apiKey.substring(0,5)+"...":"API Key Not Found/Defined"),(0,l.Dk)().length)s=(0,l.Dk)()[0];else try{s=(0,l.Wp)(u)}catch(e){console.error("Firebase initializeApp error:",e)}s&&u.apiKey&&u.projectId?(a=(0,i.xI)(s),n=(0,c.c7)(s),o=(0,d.aU)(s)):(console.error("Firebase app was not properly initialized due to missing configuration. Other Firebase services (Auth, Storage, Firestore) will NOT be available."),a=null,n=null,o=null)},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},59576:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>c});var s=r(95155),a=r(93004),n=r(12115),o=r(56104),l=r(35317);let i=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0),[f,x]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e;console.log("AuthContext: Setting up onAuthStateChanged listener.");let t=(0,a.hg)(o.j2,async t=>{if(console.log("AuthContext: onAuthStateChanged triggered. CurrentUser UID:",(null==t?void 0:t.uid)||null),u(null),g(!1),j(!1),b(!1),A(!1),C(!1),e&&(console.log("AuthContext: Cleaning up previous Firestore profile listener for old user or on logout."),e(),e=void 0),c(t),t){x(!0),console.log("AuthContext: User found (UID:",t.uid,"). Starting profile and claims loading.");let r=!1;try{console.log("AuthContext: Attempting to fetch ID token result with force refresh for UID:",t.uid);let e=await t.getIdTokenResult(!0);console.log("AuthContext: ID Token Claims for user",t.uid,":",e.claims),r=!!(e.claims&&!0===e.claims.admin),g(r),r?console.log("AuthContext: 'admin' custom claim IS TRUE for user:",t.uid):console.warn("AuthContext: 'admin' custom claim not found or not true for user:",t.uid,"Claims found:",e.claims)}catch(e){console.error("AuthContext: Error fetching ID token result for custom claims for UID:",t.uid,e),g(!1)}try{console.log("AuthContext: Setting up Firestore profile listener for UID:",t.uid);let s=(0,l.H9)(o.db,"users",t.uid);e=(0,l.aQ)(s,e=>{if(e.exists()){let s=e.data(),a={id:e.id,...s,createdAt:s.createdAt instanceof l.Dc?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt instanceof l.Dc?s.updatedAt.toDate():s.updatedAt?new Date(s.updatedAt):void 0};console.log("AuthContext: Firestore profile data loaded/updated for UID:",t.uid,"Role:",a.role),u(a);let n="chef"===a.role,o="customer"===a.role,i="admin"===a.role;console.log("AuthContext: Setting isChef based on role:",n),j(n),b(o),i&&!r?console.warn("AuthContext: User has 'admin' role in Firestore, but 'admin' custom claim is missing or false. Custom claims determine admin access."):!i&&r&&console.log("AuthContext: User has 'admin' custom claim, granting admin access. Firestore role is:",a.role),n?(A(a.isApproved||!1),C(a.isSubscribed||!1),console.log("AuthContext: Chef specific flags - Approved:",a.isApproved,"Subscribed:",a.isSubscribed)):(A(!1),C(!1))}else console.warn("AuthContext: No such user profile document in Firestore for UID:",t.uid),u(null),j(!1),b(!1),A(!1),C(!1);x(!1)},e=>{console.error("AuthContext: Error with Firestore profile snapshot listener for UID:",t.uid,e),u(null),j(!1),b(!1),A(!1),C(!1),x(!1)})}catch(e){console.error("AuthContext: Outer error setting up Firestore profile snapshot for UID:",t.uid,e),u(null),j(!1),b(!1),A(!1),C(!1),x(!1)}}else console.log("AuthContext: No current user (logged out). Resetting profile states."),x(!1);h(!1)});return()=>{console.log("AuthContext: Cleaning up onAuthStateChanged listener."),t(),e&&(console.log("AuthContext: Cleaning up profile onSnapshot listener on AuthProvider unmount."),e())}},[]),(0,s.jsx)(i.Provider,{value:{user:r,userProfile:d,loading:m||f,authLoading:m,profileLoading:f,isAdmin:p,isChef:v,isCustomer:y,isChefApproved:N,isChefSubscribed:w},children:t})}function d(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>o,aR:()=>l,wL:()=>u});var s=r(95155),a=r(12115),n=r(59434);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},90010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AlertDialog:()=>i,AlertDialogAction:()=>g,AlertDialogCancel:()=>v,AlertDialogContent:()=>m,AlertDialogDescription:()=>p,AlertDialogFooter:()=>f,AlertDialogHeader:()=>h,AlertDialogOverlay:()=>u,AlertDialogPortal:()=>d,AlertDialogTitle:()=>x,AlertDialogTrigger:()=>c});var s=r(95155),a=r(12115),n=r(17649),o=r(59434),l=r(30285);let i=n.bL,c=n.l9,d=n.ZL,u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});u.displayName=n.hJ.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(n.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...a})]})});m.displayName=n.UC.displayName;let h=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};h.displayName="AlertDialogHeader";let f=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="AlertDialogFooter";let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",r),...a})});x.displayName=n.hE.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});p.displayName=n.VY.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.rc,{ref:t,className:(0,o.cn)((0,l.r)(),r),...a})});g.displayName=n.rc.displayName;let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.ZD,{ref:t,className:(0,o.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});v.displayName=n.ZD.displayName},97011:(e,t,r)=>{Promise.resolve().then(r.bind(r,27916))}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,4453,4602,1345,6874,106,7649,2742,8441,1684,7358],()=>t(97011)),_N_E=e.O()}]);