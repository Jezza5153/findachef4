(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1255,8226],{5669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(95155),o=r(12115),n=r(35695),a=r(10469),i=r(28294),l=r(94063),c=r(98328),d=r(66655),u=r(72233),f=r(42625),h=r(79239),p=r(30627),g=r(15300),m=r(28044),x=r(87481),A=r(59576),b=r(66695),v=r(30285),I=r(56104),C=r(93004),y=r(50172);let N=(0,r(55028).default)(()=>Promise.all([r.e(1345),r.e(6874),r.e(5740),r.e(7649),r.e(9613),r.e(3166)]).then(r.bind(r,80897)).then(e=>e.DashboardLayout),{loadableGenerated:{webpack:()=>[80897]},ssr:!1,loading:()=>(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,s.jsx)(y.A,{className:"h-12 w-12 animate-spin text-primary"})," Loading Dashboard..."]})}),j=[{href:"/chef/dashboard",label:"Overview",icon:(0,s.jsx)(a.A,{}),matchExact:!0},{href:"/chef/dashboard/profile",label:"My Profile",icon:(0,s.jsx)(i.A,{})},{href:"/chef/dashboard/requests",label:"Requests",icon:(0,s.jsx)(l.A,{})},{href:"/chef/dashboard/calendar",label:"Calendar & Events",icon:(0,s.jsx)(c.A,{})},{href:"/chef/dashboard/wall",label:"The Chef's Wall",icon:(0,s.jsx)(d.A,{})},{href:"/chef/dashboard/menus",label:"Menus",icon:(0,s.jsx)(u.A,{})},{href:"/chef/dashboard/shopping-list",label:"Shopping List",icon:(0,s.jsx)(f.A,{})},{href:"/chef/dashboard/chefs",label:"Chef Directory",icon:(0,s.jsx)(h.A,{})},{href:"/chef/dashboard/collaborations",label:"Collaborations",icon:(0,s.jsx)(p.A,{})},{href:"/chef/dashboard/receipts",label:"Receipts & Costs",icon:(0,s.jsx)(g.A,{})}];function D(e){let{children:t}=e,r=(0,n.useRouter)(),{toast:a}=(0,x.dj)(),{user:i,userProfile:l,loading:c,isChef:d,isChefApproved:u,profileLoading:f}=(0,A.A)(),h=c||f;return((0,o.useEffect)(()=>{if(!h){if(!i){console.log("ChefDashboardLayout: No user, redirecting to login."),r.push("/login?redirect=/chef/dashboard");return}if(!d){a({title:"Access Denied",description:"You must be logged in as a chef to access this page.",variant:"destructive"}),console.log("ChefDashboardLayout: Not a chef, redirecting to login."),r.push("/login");return}}},[i,h,d,r,a]),h)?(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,s.jsx)(y.A,{className:"h-12 w-12 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,s.jsx)("p",{className:"ml-3 text-lg",children:"Loading Chef Dashboard..."})]}):i&&d?u?(0,s.jsx)(N,{navItems:j,children:t}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:(0,s.jsxs)(b.Zp,{className:"w-full max-w-md text-center shadow-lg",children:[(0,s.jsxs)(b.aR,{children:[(0,s.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-yellow-500/10 text-yellow-600",children:(0,s.jsx)(m.A,{className:"h-8 w-8","data-ai-hint":"security shield alert"})}),(0,s.jsx)(b.ZB,{className:"text-2xl",children:"Account Pending Approval"})]}),(0,s.jsxs)(b.Wu,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Thank you for signing up! Your chef profile is currently under review by our team. You will be notified once your account is approved. This can take up to 48 hours."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"If you have any questions, please contact support."}),(0,s.jsx)(v.$,{onClick:async()=>{try{await (0,C.CI)(I.j2),a({title:"Logged Out",description:"You have been logged out."})}catch(e){console.error("Error signing out:",e),a({title:"Logout Error",description:"Could not log out.",variant:"destructive"})}r.push("/login")},children:"Back to Login"})]})]})}):(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,s.jsx)(y.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-3 text-lg",children:"Verifying access..."})]})}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var s=r(95155),o=r(12115),n=r(99708),a=r(74466),i=r(59434);let l=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:o,size:a,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:o,size:a,className:r})),ref:t,...d})});c.displayName="Button"},56104:(e,t,r)=>{"use strict";let s,o,n,a;r.d(t,{IG:()=>n,db:()=>a,j2:()=>o});var i=r(23915),l=r(93004),c=r(90858),d=r(35317);let u={apiKey:"YOUR_NEW_FINDACHEF2_API_KEY",authDomain:"findachef2.firebaseapp.com",projectId:"findachef2",storageBucket:"findachef2.appspot.com",messagingSenderId:"YOUR_NEW_FINDACHEF2_MESSAGING_SENDER_ID",appId:"YOUR_NEW_FINDACHEF2_APP_ID",measurementId:"YOUR_NEW_FINDACHEF2_MEASUREMENT_ID"};if(u.apiKey&&u.projectId){if((0,i.Dk)().length)console.log("Firebase Re-using existing app instance for Project ID:",(s=(0,i.Dk)()[0]).options.projectId);else try{console.log("Firebase Initializing with Project ID:",u.projectId),console.log("Firebase Using API Key (first 5 chars):",u.apiKey?u.apiKey.substring(0,5)+"...":"API Key Not Found/Defined"),s=(0,i.Wp)(u)}catch(e){console.error("Firebase initializeApp error:",e)}s?(o=(0,l.xI)(s),n=(0,c.c7)(s),a=(0,d.aU)(s)):(console.error("Firebase app was not initialized. Other Firebase services (Auth, Storage, Firestore) will not be available."),o=null,n=null,a=null)}else console.error("CRITICAL FIREBASE CONFIG ERROR: NEXT_PUBLIC_FIREBASE_API_KEY or NEXT_PUBLIC_FIREBASE_PROJECT_ID is missing or undefined."),console.error("Using API Key (first 5 chars):",u.apiKey?u.apiKey.substring(0,5)+"...":"MISSING/UNDEFINED"),console.error("Using Project ID:",u.projectId||"MISSING/UNDEFINED")},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),o=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,s.$)(t))}},59576:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>c});var s=r(95155),o=r(93004),n=r(12115),a=r(56104),i=r(35317);let l=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[f,h]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!0),[m,x]=(0,n.useState)(!1),[A,b]=(0,n.useState)(!1),[v,I]=(0,n.useState)(!1),[C,y]=(0,n.useState)(!1),[N,j]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e;console.log("AuthContext: Setting up onAuthStateChanged listener.");let t=(0,o.hg)(a.j2,async t=>{if(console.log("AuthContext: onAuthStateChanged triggered. CurrentUser UID:",(null==t?void 0:t.uid)||null),u(null),x(!1),b(!1),I(!1),y(!1),j(!1),e&&(console.log("AuthContext: Cleaning up previous Firestore profile listener for old user or on logout."),e(),e=void 0),c(t),t){g(!0),console.log("AuthContext: User found (UID:",t.uid,"). Starting profile and claims loading.");let r=!1;try{console.log("AuthContext: Attempting to fetch ID token result with force refresh for UID:",t.uid);let e=await t.getIdTokenResult(!0);console.log("AuthContext: ID Token Claims for user",t.uid,":",e.claims),r=!!(e.claims&&!0===e.claims.admin),x(r),r?console.log("AuthContext: 'admin' custom claim IS TRUE for user:",t.uid):console.warn("AuthContext: 'admin' custom claim not found or not true for user:",t.uid,"Claims found:",e.claims)}catch(e){console.error("AuthContext: Error fetching ID token result for custom claims for UID:",t.uid,e),x(!1)}try{console.log("AuthContext: Setting up Firestore profile listener for UID:",t.uid);let s=(0,i.H9)(a.db,"users",t.uid);e=(0,i.aQ)(s,e=>{if(e.exists()){let s=e.data(),o={id:e.id,...s,createdAt:s.createdAt instanceof i.Dc?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt instanceof i.Dc?s.updatedAt.toDate():s.updatedAt?new Date(s.updatedAt):void 0};console.log("AuthContext: Firestore profile data loaded/updated for UID:",t.uid,"Role:",o.role),u(o);let n="chef"===o.role,a="customer"===o.role,l="admin"===o.role;console.log("AuthContext: Setting isChef based on role:",n),b(n),I(a),l&&!r?console.warn("AuthContext: User has 'admin' role in Firestore, but 'admin' custom claim is missing or false. Custom claims determine admin access."):!l&&r&&console.log("AuthContext: User has 'admin' custom claim, granting admin access. Firestore role is:",o.role),n?(y(o.isApproved||!1),j(o.isSubscribed||!1),console.log("AuthContext: Chef specific flags - Approved:",o.isApproved,"Subscribed:",o.isSubscribed)):(y(!1),j(!1))}else console.warn("AuthContext: No such user profile document in Firestore for UID:",t.uid),u(null),b(!1),I(!1),y(!1),j(!1);g(!1)},e=>{console.error("AuthContext: Error with Firestore profile snapshot listener for UID:",t.uid,e),u(null),b(!1),I(!1),y(!1),j(!1),g(!1)})}catch(e){console.error("AuthContext: Outer error setting up Firestore profile snapshot for UID:",t.uid,e),u(null),b(!1),I(!1),y(!1),j(!1),g(!1)}}else console.log("AuthContext: No current user (logged out). Resetting profile states."),g(!1);h(!1)});return()=>{console.log("AuthContext: Cleaning up onAuthStateChanged listener."),t(),e&&(console.log("AuthContext: Cleaning up profile onSnapshot listener on AuthProvider unmount."),e())}},[]),(0,s.jsx)(l.Provider,{value:{user:r,userProfile:d,loading:f||p,authLoading:f,profileLoading:p,isAdmin:m,isChef:A,isCustomer:v,isChefApproved:C,isChefSubscribed:N},children:t})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>a,aR:()=>i,wL:()=>u});var s=r(95155),o=r(12115),n=r(59434);let a=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...o})});a.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...o})});c.displayName="CardDescription";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...o})});d.displayName="CardContent";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...o})});u.displayName="CardFooter"},69130:(e,t,r)=>{Promise.resolve().then(r.bind(r,5669))},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var s=r(12115);let o=0,n=new Map,a=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,4453,4602,3225,8441,1684,7358],()=>t(69130)),_N_E=e.O()}]);