(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5203],{42877:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(95155),r=t(12115),l=t(66695),i=t(62523),n=t(30285),d=t(88539),o=t(91394),c=t(51154),u=t(97108),m=t(47924),f=t(23562),p=t(55868),x=t(57434),h=t(17576),g=t(81284),v=t(1243),N=t(40646),j=t(54861),w=t(12486),b=t(59576),y=t(56104),P=t(35317),C=t(73168),A=t(87481),q=t(35695),D=t(54165),R=t(57701),k=t(9428),_=t(59434);let I=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(R.bL,{className:(0,_.cn)("grid gap-2",t),...r,ref:s})});I.displayName=R.bL.displayName;let E=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(R.q7,{ref:s,className:(0,_.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(R.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(k.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});E.displayName=R.q7.displayName;var U=t(85057);function S(){var e,s;let{user:t,userProfile:R,loading:k}=(0,b.A)(),{toast:_}=(0,A.dj)();(0,q.useRouter)();let S=(0,r.useRef)(null),[T,L]=(0,r.useState)([]),[H,O]=(0,r.useState)(null),[M,B]=(0,r.useState)([]),[J,z]=(0,r.useState)(""),[$,F]=(0,r.useState)(!0),[K,V]=(0,r.useState)(!1),[Y,Z]=(0,r.useState)(!1),[G,W]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[ee,es]=(0,r.useState)([]),[et,ea]=(0,r.useState)(void 0),[er,el]=(0,r.useState)(""),[ei,en]=(0,r.useState)(!1),[ed,eo]=(0,r.useState)("");(0,r.useEffect)(()=>{var e;null==(e=S.current)||e.scrollIntoView({behavior:"smooth"})},[M]),(0,r.useEffect)(()=>{if(k||!t||(null==R?void 0:R.role)!=="chef"){F(!1),L([]);return}F(!0);let e=(0,P.rJ)(y.db,"customerRequests"),s=(0,P.P)(e,(0,P._M)("status","in",["new","awaiting_customer_response","proposal_sent","chef_accepted"]),(0,P.My)("createdAt","desc")),a=(0,P.aQ)(s,e=>{let s=e.docs.map(e=>{let s=e.data();return{id:e.id,...s,eventDate:s.eventDate instanceof P.Dc?s.eventDate.toDate():new Date(s.eventDate),createdAt:s.createdAt instanceof P.Dc?s.createdAt.toDate():new Date(s.createdAt),updatedAt:s.updatedAt instanceof P.Dc?s.updatedAt.toDate():new Date(s.updatedAt)}});L(s=s.filter(e=>{var s,a;return!!("new"===e.status||"awaiting_customer_response"===e.status&&(null==(s=e.respondingChefIds)?void 0:s.includes(t.uid)))||("proposal_sent"===e.status||"chef_accepted"===e.status)&&(null==(a=e.activeProposal)?void 0:a.chefId)===t.uid})),F(!1)},e=>{console.error("ChefRequestsPage: Error fetching customer requests:",e),_({title:"Error",description:"Could not fetch customer requests.",variant:"destructive"}),F(!1),L([])});return()=>{console.log("ChefRequestsPage: Unsubscribing from customer requests listener."),a()}},[t,R,k,_]),(0,r.useEffect)(()=>{if(!(null==H?void 0:H.id))return void B([]);V(!0);let e=(0,P.rJ)(y.db,"customerRequests",H.id,"messages"),s=(0,P.P)(e,(0,P.My)("timestamp","asc")),t=(0,P.aQ)(s,e=>{B(e.docs.map(e=>{let s=e.data(),t=s.timestamp;if(t instanceof P.Dc)t=t.toDate();else if(t&&"function"==typeof t.toDate)t=t.toDate();else if(t&&"string"==typeof t){let e=new Date(t);t=isNaN(e.getTime())?new Date:e}else t&&"object"==typeof t&&void 0!==t.seconds?t=new P.Dc(t.seconds,t.nanoseconds).toDate():t instanceof Date||(t=new Date);return{id:e.id,...s,timestamp:t,senderName:s.senderName||("chef"===s.senderRole?"Chef":"Customer"),senderAvatarUrl:s.senderAvatarUrl}})),V(!1)},e=>{console.error("ChefRequestsPage: Error fetching messages for request",H.id,":",e),_({title:"Error",description:"Could not fetch messages for this request.",variant:"destructive"}),B([]),V(!1)});return()=>{console.log("ChefRequestsPage: Unsubscribing from messages listener for request",H.id),t()}},[H,_]),(0,r.useEffect)(()=>{if(Q&&t&&(null==R?void 0:R.role)==="chef"){en(!0);let e=(0,P.rJ)(y.db,"menus"),s=(0,P.P)(e,(0,P._M)("chefId","==",t.uid),(0,P._M)("isPublic","==",!0),(0,P.My)("createdAt","desc")),a=(0,P.aQ)(s,e=>{es(e.docs.map(e=>({id:e.id,...e.data()}))),en(!1)},e=>{console.error("ChefRequestsPage: Error fetching chef menus for proposal:",e),_({title:"Error",description:"Could not fetch your menus.",variant:"destructive"}),es([]),en(!1)});return()=>{console.log("ChefRequestsPage: Unsubscribing from chef menus listener."),a()}}},[Q,t,R,_]);let ec=e=>{O(e),z("")},eu=async()=>{if(!t||!R||!H||!J.trim())return;if(k)return void _({title:"Authenticating...",description:"Please wait.",variant:"default"});Z(!0);let e=(0,P.H9)(y.db,"customerRequests",H.id);try{let s=await (0,P.x7)(e);if(!s.exists()){_({title:"Error",description:"Request no longer exists.",variant:"destructive"}),Z(!1);return}let a=s.data(),r=(0,P.wP)(y.db),l=(0,P.rJ)(e,"messages"),i=(0,P.H9)(l);r.set(i,{requestId:H.id,senderId:t.uid,senderName:R.name||t.displayName||"Chef",senderAvatarUrl:R.profilePictureUrl||t.photoURL||void 0,senderRole:"chef",text:J,timestamp:(0,P.O5)()});let n=a.status,d=a.respondingChefIds||[];"new"===a.status?(n="awaiting_customer_response",d.includes(t.uid)||(d=(0,P.hq)(t.uid)),r.update(e,{status:n,respondingChefIds:d,updatedAt:(0,P.O5)()})):r.update(e,{updatedAt:(0,P.O5)()}),await r.commit(),z("")}catch(e){console.error("ChefRequestsPage: Error sending message:",e),_({title:"Error",description:"Could not send message.",variant:"destructive"})}finally{Z(!1)}},em=async()=>{if(!t||!R||!H||!et)return void _({title:"Missing Information",description:"Please select a menu for your proposal.",variant:"destructive"});let e=ee.find(e=>e.id===et);if(!e)return void _({title:"Error",description:"Selected menu not found.",variant:"destructive"});W(!0);let s=(0,P.H9)(y.db,"customerRequests",H.id);try{let a=(0,P.wP)(y.db);a.update(s,{status:"proposal_sent",activeProposal:{menuId:e.id,menuTitle:e.title,menuPricePerHead:e.pricePerHead,chefId:t.uid,chefName:R.name||t.displayName||"Chef",chefAvatarUrl:R.profilePictureUrl||t.photoURL||void 0,notes:er,proposedAt:(0,P.O5)()},updatedAt:(0,P.O5)(),respondingChefIds:(0,P.hq)(t.uid)});let r=(0,P.rJ)(s,"messages"),l=(0,P.H9)(r);a.set(l,{requestId:H.id,senderId:"system",senderRole:"system",text:'You proposed menu "'.concat(e.title,'". Notes: ').concat(er||"N/A",". Waiting for customer response."),timestamp:(0,P.O5)()}),await a.commit(),_({title:"Proposal Sent!",description:"The customer has been notified."}),X(!1),el(""),ea(void 0)}catch(e){console.error("ChefRequestsPage: Error sending proposal:",e),_({title:"Proposal Error",description:"Could not send proposal: ".concat(e.message),variant:"destructive"})}finally{W(!1)}},ef=async()=>{if(!t||!H)return;W(!0);let e=(0,P.H9)(y.db,"customerRequests",H.id);try{var s;let a=(0,P.wP)(y.db),r={status:"chef_declined",updatedAt:(0,P.O5)()};(null==(s=H.activeProposal)?void 0:s.chefId)===t.uid&&(r.activeProposal=null),a.update(e,r);let l=(0,P.rJ)(e,"messages"),i=(0,P.H9)(l);a.set(i,{requestId:H.id,senderId:"system",senderRole:"system",text:"Chef ".concat((null==R?void 0:R.name)||t.displayName," has declined this request."),timestamp:(0,P.O5)()}),await a.commit(),_({title:"Request Declined",variant:"default"})}catch(e){console.error("ChefRequestsPage: Error declining request:",e),_({title:"Error",description:"Could not decline request: ".concat(e.message),variant:"destructive"})}finally{W(!1)}},ep=async()=>{var e;if(!t||!H||(null==(e=H.activeProposal)?void 0:e.chefId)!==t.uid)return;W(!0);let s=(0,P.H9)(y.db,"customerRequests",H.id);try{let e=(0,P.wP)(y.db);e.update(s,{status:"chef_accepted",updatedAt:(0,P.O5)()});let a=(0,P.rJ)(s,"messages"),r=(0,P.H9)(a);e.set(r,{requestId:H.id,senderId:"system",senderRole:"system",text:"Chef ".concat((null==R?void 0:R.name)||t.displayName," has accepted the request. Awaiting customer confirmation and payment."),timestamp:(0,P.O5)()}),await e.commit(),_({title:"Request Accepted",description:"Awaiting customer confirmation."})}catch(e){console.error("ChefRequestsPage: Error accepting request:",e),_({title:"Error",description:"Could not accept request: ".concat(e.message),variant:"destructive"})}finally{W(!1)}},ex=(0,r.useMemo)(()=>{if(!ed)return T;let e=ed.toLowerCase();return T.filter(s=>{var t;return s.eventType.toLowerCase().includes(e)||s.cuisinePreference.toLowerCase().includes(e)||s.notes&&s.notes.toLowerCase().includes(e)||(null==(t=s.activeProposal)?void 0:t.chefName)&&s.activeProposal.chefName.toLowerCase().includes(e)||s.id.toLowerCase().includes(e)})},[T,ed]),eh=e=>e?e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"Unknown",eg=(null==H||null==(e=H.activeProposal)?void 0:e.chefId)===(null==t?void 0:t.uid),ev=H&&("new"===H.status||"awaiting_customer_response"===H.status),eN=H&&eg&&"proposal_sent"===H.status,ej=H&&("new"===H.status||"awaiting_customer_response"===H.status||"proposal_sent"===H.status&&eg),ew=H&&["booked","cancelled_by_customer","customer_confirmed","proposal_declined"].includes(H.status||""),eb=(null==H?void 0:H.status)==="chef_declined"&&(null==H||null==(s=H.activeProposal)?void 0:s.chefId)!==(null==t?void 0:t.uid);return k?(0,a.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})," Loading authentication..."]}):t&&(null==R?void 0:R.role)==="chef"?(0,a.jsxs)("div",{className:"h-[calc(100vh-var(--header-height,10rem))] flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)(l.Zp,{className:"w-full md:w-1/3 lg:w-1/4 flex flex-col shadow-lg",children:[(0,a.jsxs)(l.aR,{className:"border-b p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-xl flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2 h-5 w-5 text-primary"}),"Customer Requests"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[ex.length," relevant"]})]}),(0,a.jsxs)("div",{className:"relative mt-2",children:[(0,a.jsx)(m.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.p,{placeholder:"Search requests...",className:"pl-8",value:ed,onChange:e=>eo(e.target.value)})]})]}),(0,a.jsx)(l.Wu,{className:"p-0 flex-grow overflow-y-auto",children:$?(0,a.jsxs)("div",{className:"p-4 text-center text-muted-foreground flex items-center justify-center h-full",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 animate-spin mr-2"})," Loading requests..."]}):ex.length>0?(0,a.jsx)("div",{className:"divide-y",children:ex.map(e=>{var s,r,l,i,n;return(0,a.jsx)("div",{className:"p-4 hover:bg-muted/50 cursor-pointer ".concat((null==H?void 0:H.id)===e.id?"bg-muted":""),onClick:()=>ec(e),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)(o.eu,{className:"h-10 w-10",children:[(0,a.jsx)(o.BK,{src:(null==(s=e.activeProposal)?void 0:s.chefAvatarUrl)||void 0,alt:(null==(r=e.activeProposal)?void 0:r.chefName)||e.eventType.charAt(0)}),(0,a.jsx)(o.q5,{children:(null==(l=e.activeProposal)?void 0:l.chefName)?e.activeProposal.chefName.substring(0,1).toUpperCase():e.eventType.substring(0,1).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm font-semibold truncate",children:(null==(i=e.activeProposal)?void 0:i.chefName)&&(null==(n=e.activeProposal)?void 0:n.chefId)!==(null==t?void 0:t.uid)?"Cust. awaiting THEIR proposal":e.eventType}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.updatedAt?(0,C.GP)(new Date(e.updatedAt),"PP"):e.createdAt?(0,C.GP)(new Date(e.createdAt),"PP"):"N/A"})]}),(0,a.jsx)("p",{className:"text-xs font-medium text-primary",children:eh(e.status)}),(0,a.jsxs)("p",{className:"text-xs truncate text-muted-foreground",children:["PAX: ",e.pax,", Budget: $",e.budget]})]})]})},e.id)})}):(0,a.jsx)("p",{className:"p-4 text-center text-muted-foreground",children:"No relevant requests found."})})]}),H?(0,a.jsxs)(l.Zp,{className:"w-full md:w-2/3 lg:w-3/4 flex flex-col shadow-lg",children:[(0,a.jsxs)(l.aR,{className:"border-b p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(o.eu,{className:"h-10 w-10",children:[(0,a.jsx)(o.BK,{src:void 0,alt:"C","data-ai-hint":"customer avatar"}),(0,a.jsx)(o.q5,{children:"C"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{className:"text-lg",children:H.eventType}),(0,a.jsxs)(l.BT,{className:"text-xs",children:["Request ID: ",H.id.substring(0,8),"... | Status: ",eh(H.status)]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-0.5 text-right self-start sm:self-center",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)(f.A,{className:"inline h-3 w-3 mr-1"})," Event Date: ",H.eventDate?(0,C.GP)(H.eventDate,"PP"):"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(Users,{className:"inline h-3 w-3 mr-1"})," PAX: ",H.pax]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(p.A,{className:"inline h-3 w-3 mr-1"})," Budget: $",H.budget]})]})]}),(0,a.jsxs)(l.Wu,{className:"p-6 flex-grow overflow-y-auto space-y-4",children:[H.activeProposal&&(0,a.jsxs)(l.Zp,{className:"my-2 p-3 border shadow-sm bg-sky-50 dark:bg-sky-800/30 border-sky-200 dark:border-sky-700",children:[(0,a.jsx)(l.aR,{className:"p-0 pb-1",children:(0,a.jsxs)(l.ZB,{className:"text-sm flex items-center text-sky-700 dark:text-sky-300",children:[(0,a.jsx)(x.A,{className:"mr-1.5 h-4 w-4"}),"Active Proposal by Chef ",H.activeProposal.chefName===((null==R?void 0:R.name)||(null==t?void 0:t.displayName))?"You":H.activeProposal.chefName]})}),(0,a.jsxs)(l.Wu,{className:"p-0 text-xs space-y-0.5 text-sky-800 dark:text-sky-200",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)(h.A,{className:"inline h-3 w-3 mr-1 text-muted-foreground"}),"Menu: ",(0,a.jsx)("strong",{children:H.activeProposal.menuTitle})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(p.A,{className:"inline h-3 w-3 mr-1 text-muted-foreground"}),"Price: ",(0,a.jsxs)("strong",{children:["$",H.activeProposal.menuPricePerHead.toFixed(2)," per head"]})]}),H.activeProposal.notes&&(0,a.jsxs)("p",{children:[(0,a.jsx)(g.A,{className:"inline h-3 w-3 mr-1 text-muted-foreground"}),"Notes: ",H.activeProposal.notes]})]})]}),K?(0,a.jsxs)("div",{className:"flex justify-center items-center h-full",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 animate-spin mr-2"}),"Loading messages..."]}):M.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[M.map(e=>(0,a.jsx)("div",{className:"flex ".concat(e.senderId===(null==t?void 0:t.uid)?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"flex items-end gap-2 max-w-[75%]",children:[e.senderId!==(null==t?void 0:t.uid)&&"system"!==e.senderRole&&(0,a.jsxs)(o.eu,{className:"h-6 w-6",children:[(0,a.jsx)(o.BK,{src:e.senderAvatarUrl||void 0,alt:e.senderName||"U","data-ai-hint":"user avatar"}),(0,a.jsx)(o.q5,{children:e.senderName?e.senderName.charAt(0).toUpperCase():"chef"===e.senderRole?"C":"U"})]}),"system"===e.senderRole&&(0,a.jsx)(g.A,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 self-center mr-1","data-ai-hint":"info icon"}),(0,a.jsxs)("div",{className:"px-3 py-2 rounded-xl shadow-sm ".concat(e.senderId===(null==t?void 0:t.uid)?"bg-primary text-primary-foreground":"system"===e.senderRole?"bg-amber-100 dark:bg-amber-800/30 text-amber-700 dark:text-amber-300 text-xs italic text-center w-full":"bg-muted"),children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat(e.senderId===(null==t?void 0:t.uid)?"text-primary-foreground/70 text-right":"system"===e.senderRole?"hidden":"text-muted-foreground/70 text-left"),children:e.timestamp?(0,C.GP)(new Date(e.timestamp),"p"):"Sending..."})]}),e.senderId===(null==t?void 0:t.uid)&&R&&(0,a.jsxs)(o.eu,{className:"h-6 w-6",children:[(0,a.jsx)(o.BK,{src:R.profilePictureUrl||(null==t?void 0:t.photoURL)||void 0,alt:R.name||"Me","data-ai-hint":"user avatar"}),(0,a.jsx)(o.q5,{children:R.name?R.name.charAt(0).toUpperCase():"M"})]})]})},e.id)),(0,a.jsx)("div",{ref:S})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet for this request."})]}),(0,a.jsxs)(l.wL,{className:"p-4 border-t flex flex-col space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground p-2 rounded-md bg-muted/50 border border-dashed w-full",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2 text-yellow-600 flex-shrink-0","data-ai-hint":"warning triangle"}),(0,a.jsx)("span",{children:"Keep all communication on FindAChef until a booking is confirmed."})]}),!ew&&!eb&&(0,a.jsxs)("div",{className:"w-full space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[ev&&(0,a.jsxs)(n.$,{onClick:()=>X(!0),variant:"outline",size:"sm",disabled:G,children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," ",eg?"View/Edit Your Proposal":"Propose Menu"]}),eN&&(0,a.jsxs)(n.$,{onClick:ep,size:"sm",className:"bg-green-600 hover:bg-green-700",disabled:G,children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Accept Request"]}),ej&&(0,a.jsxs)(n.$,{onClick:ef,variant:"destructive",size:"sm",disabled:G,children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"})," Decline Request"]})]}),(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,a.jsx)(d.T,{placeholder:"Type your message...",value:J,onChange:e=>z(e.target.value),className:"flex-1 min-h-[40px] max-h-[120px]",rows:1,disabled:Y||G,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),J.trim()&&!G&&eu())}}),(0,a.jsxs)(n.$,{type:"button",size:"icon",onClick:eu,disabled:Y||!J.trim()||G,children:[Y?(0,a.jsx)(c.A,{className:"animate-spin h-5 w-5"}):(0,a.jsx)(w.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Send"})]})]})]}),eb&&(0,a.jsx)("p",{className:"text-sm text-red-600 text-center w-full",children:"You have declined this request."}),ew&&"chef_declined"!==H.status&&(0,a.jsxs)("p",{className:"text-sm text-green-600 text-center w-full",children:["This conversation is now finalized (",eh(H.status),")."]})]})]}):(0,a.jsxs)("div",{className:"w-full md:w-2/3 lg:w-3/4 flex flex-col items-center justify-center text-center p-10 bg-muted/30 rounded-lg shadow-lg",children:[(0,a.jsx)(u.A,{className:"h-16 w-16 text-muted-foreground mb-4","data-ai-hint":"empty inbox messages"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-muted-foreground",children:"Select a request from the left to view messages and details."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"New customer requests will appear in the list."})]}),Q&&(0,a.jsx)(D.Dialog,{open:Q,onOpenChange:X,children:(0,a.jsxs)(D.DialogContent,{className:"sm:max-w-lg",children:[(0,a.jsxs)(D.DialogHeader,{children:[(0,a.jsx)(D.DialogTitle,{children:"Propose a Menu"}),D.DialogDescription&&(0,a.jsx)(D.DialogDescription,{children:"Select one of your menus and add any specific notes for this proposal."})]}),ei?(0,a.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):0===ee.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center p-4",children:"You have no public menus to propose. Please create some first."}):(0,a.jsxs)("div",{className:"space-y-4 py-2 max-h-[50vh] overflow-y-auto",children:[(0,a.jsx)(I,{value:et,onValueChange:ea,children:ee.map(e=>(0,a.jsxs)(U.J,{htmlFor:e.id,className:"flex items-center space-x-3 p-3 border rounded-md hover:bg-accent/50 has-[:checked]:bg-accent has-[:checked]:text-accent-foreground cursor-pointer",children:[(0,a.jsx)(E,{value:e.id,id:e.id}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:e.title})," ($",e.pricePerHead.toFixed(2),"/head)",(0,a.jsxs)("p",{className:"text-xs text-muted-foreground has-[:checked]:text-accent-foreground/80",children:[e.cuisine," - ",e.description.substring(0,50),"..."]})]})]},e.id))}),(0,a.jsx)(d.T,{placeholder:"Additional notes for this proposal (e.g., customizations, availability details)...",value:er,onChange:e=>el(e.target.value)})]}),(0,a.jsxs)(D.DialogFooter,{children:[(0,a.jsx)(D.DialogClose,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",disabled:G,children:"Cancel"})}),(0,a.jsxs)(n.$,{onClick:em,disabled:!et||ei||0===ee.length||G,children:[G?(0,a.jsx)(c.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Send Proposal"]})]})]})})]}):(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"Access denied. This page is for chefs."})}},54165:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Dialog:()=>d,DialogClose:()=>u,DialogContent:()=>f,DialogDescription:()=>g,DialogFooter:()=>x,DialogHeader:()=>p,DialogOverlay:()=>m,DialogPortal:()=>c,DialogTitle:()=>h,DialogTrigger:()=>o});var a=t(95155),r=t(12115),l=t(15452),i=t(54416),n=t(59434);let d=l.bL,o=l.l9,c=l.ZL,u=l.bm,m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=l.hJ.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.UC.displayName;let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};p.displayName="DialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=l.hE.displayName;let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});g.displayName=l.VY.displayName},59602:(e,s,t)=>{Promise.resolve().then(t.bind(t,42877))},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(95155),r=t(12115),l=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(95155),r=t(12115),l=t(40968),i=t(74466),n=t(59434);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,n.cn)(d(),t),...r})});o.displayName=l.b.displayName},88539:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(95155),r=t(12115),l=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});i.displayName="Textarea"},91394:(e,s,t)=>{"use strict";t.d(s,{BK:()=>d,eu:()=>n,q5:()=>o});var a=t(95155),r=t(12115),l=t(85977),i=t(59434);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});n.displayName=l.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",t),...r})});d.displayName=l._V.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});o.displayName=l.H4.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7446,9352,5100,4602,1345,3067,3168,8644,6506,8226,8441,1684,7358],()=>s(59602)),_N_E=e.O()}]);