(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8415],{22346:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var a=s(95155),r=s(12115),n=s(87489),l=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(n.b,{ref:t,decorative:i,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=n.b.displayName},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var a=s(95155);s(12115);var r=s(74466),n=s(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...r})}},52493:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(95155),r=s(12115),n=s(85511),l=s(66695),i=s(26126),o=s(83343),d=s(76959),c=s(80644),m=s(85388),u=s(8376),x=s(37648),h=s(31949),p=s(50594),f=s(50172),g=s(98328),j=s(76603),v=s(50286),N=s(88390),b=s(15121),y=s(83662),w=s(14437),D=s(36936),C=s(15300),A=s(30285),k=s(90010),E=s(62523),P=s(85057),S=s(87481),R=s(59576),M=s(56104),T=s(35317),H=s(98015),I=s(65620);function _(){let{user:e,userProfile:t}=(0,R.A)(),[s,_]=(0,r.useState)(new Date),[B,F]=(0,r.useState)([]),[z,O]=(0,r.useState)([]),[Q,W]=(0,r.useState)(!0),[V,L]=(0,r.useState)(!1),[Z,q]=(0,r.useState)(null),[$,G]=(0,r.useState)(!1),{toast:U}=(0,S.dj)(),[J,Y]=(0,r.useState)(!1),[X,K]=(0,r.useState)(""),[ee,et]=(0,r.useState)(null),es=(0,r.useRef)(null),[ea,er]=(0,r.useState)(null),[en,el]=(0,r.useState)(null),[ei,eo]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(null),[em,eu]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let t,s;if(!e){W(!1),F([]),O([]);return}W(!0);let a=(0,T.H9)(M.db,"users",e.uid);t=(0,T.aQ)(a,e=>{if(e.exists()){let t=e.data();t.blockedDates?O(t.blockedDates.map(e=>(0,o.H)(e))):O([])}},e=>{console.error("Error fetching user profile for blocked dates:",e),U({title:"Error",description:"Could not fetch blocked dates.",variant:"destructive"})});let r=(0,T.rJ)(M.db,"users/".concat(e.uid,"/calendarEvents")),n=(0,T.P)(r,(0,T.My)("date","asc"));return s=(0,T.aQ)(n,e=>{F(e.docs.map(e=>{let t=e.data(),s=t.date;return s instanceof T.Dc?s=s.toDate():"string"==typeof s?s=(0,o.H)(s):s&&"function"==typeof s.toDate?s=s.toDate():s instanceof Date||(s=new Date),{id:e.id,...t,date:s,createdAt:t.createdAt?t.createdAt instanceof T.Dc?t.createdAt.toDate():new Date(t.createdAt):void 0,updatedAt:t.updatedAt?t.updatedAt instanceof T.Dc?t.updatedAt.toDate():new Date(t.updatedAt):void 0}})),W(!1)},e=>{console.error("Error fetching calendar events:",e),U({title:"Error",description:"Could not fetch calendar events.",variant:"destructive"}),W(!1)}),()=>{t&&t(),s&&s(),ea&&ea.isScanning&&ea.stop().catch(e=>console.error("Error stopping QR scanner on unmount:",e))}},[e,U,ea]),(0,r.useEffect)(()=>{if(J&&es.current&&!(null==ea?void 0:ea.isScanning)){let e=new H.j9("qr-reader");er(e),el(null),e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},(e,t)=>{console.log("QR Code detected: ".concat(e),t),ex(e)},e=>{}).catch(e=>{console.error("Unable to start QR scanning.",e),el("Failed to start camera. Please check permissions and try again."),U({title:"QR Scan Error",description:"Could not start QR scanner. Ensure camera permissions are granted.",variant:"destructive"})})}else!J&&ea&&ea.isScanning&&ea.stop().catch(e=>console.error("Error stopping QR scanner:",e))},[J,ea]);let ex=e=>{ea&&ea.isScanning&&ea.stop().catch(e=>console.error("Error stopping QR scanner after scan:",e)),Y(!1),ee&&e===ee.id?ev(ee):U({title:"QR Code Mismatch",description:"The scanned QR code does not match the selected event's Booking ID. Please try again.",variant:"destructive",duration:7e3}),et(null)},eh=(0,r.useMemo)(()=>s?B.filter(e=>(0,d.r)(e.date,s)):[],[s,B]),ep=(0,r.useMemo)(()=>{if(!s)return!1;let e=(0,c.o)(s);return z.some(t=>(0,d.r)(t,e))},[s,z]),ef=e=>{switch(e){case"Confirmed":return"default";case"Pending":case"Completed":return"secondary";case"Cancelled":return"destructive";default:return"outline"}},eg=e=>{switch(e){case"Confirmed":return(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1.5 text-green-600"});case"Pending":return(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1.5 text-yellow-600"});case"Cancelled":return(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1.5 text-red-600"});case"WallEvent":return(0,a.jsx)(p.A,{className:"h-4 w-4 mr-1.5 text-blue-500"});case"Completed":return(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1.5 text-green-700"});default:return(0,a.jsx)(p.A,{className:"h-4 w-4 mr-1.5"})}},ej=e=>{ea&&ea.isScanning&&ea.stop().catch(e=>console.error("Error stopping QR scanner before new scan:",e)),et(e),K(""),Y(!0)},ev=async t=>{if(!e||!t)return void U({title:"Error",description:"Booking ID is required.",variant:"destructive"});G(!0),U({title:"Processing Event Completion...",description:"Marking event ".concat(t.id.substring(0,6),"... as complete.")});try{let s=(0,T.wP)(M.db),a=(0,T.H9)(M.db,"bookings",t.id);s.update(a,{status:"completed",qrCodeScannedAt:(0,T.O5)(),updatedAt:(0,T.O5)()});let r=(0,T.H9)(M.db,"users/".concat(e.uid,"/calendarEvents"),t.id);s.update(r,{status:"Completed",updatedAt:(0,T.O5)()}),await s.commit(),U({title:"Event Marked as Complete!",description:"Event ".concat(t.id.substring(0,6),"... status updated. Final payout process initiated (simulated)."),duration:7e3}),Y(!1),et(null)}catch(e){console.error("Error processing event completion:",e),U({title:"Error",description:"Could not mark event as complete. Please try again.",variant:"destructive"})}finally{G(!1)}},eN=async()=>{let t;if(!e||!s)return void U({title:"No Date Selected",description:"Please select a date to block or unblock.",variant:"destructive"});G(!0);let a=(0,c.o)(s),r=z.some(e=>(0,d.r)(e,a));t=r?z.filter(e=>!(0,d.r)(e,a)).map(e=>e.toISOString().split("T")[0]):[...z,a].map(e=>e.toISOString().split("T")[0]).sort();try{let s=(0,T.H9)(M.db,"users",e.uid);await (0,T.mZ)(s,{blockedDates:t,updatedAt:(0,T.O5)()}),U({title:r?"Date Unblocked":"Date Blocked",description:"".concat((0,m.GP)(a,"PPP")," is now ").concat(r?"available":"marked as unavailable.")})}catch(e){console.error("Error updating blocked dates:",e),U({title:"Update Error",description:"Could not update blocked status.",variant:"destructive"})}finally{G(!1)}},eb=e=>{q(e),L(!0)},ey=async e=>{eu(!0),eo(!0),ec(null);try{let t=(0,T.H9)(M.db,"bookings",e.id),s=await (0,T.x7)(t);if(s.exists()){let e=s.data();ec({id:s.id,...e})}else U({title:"Error",description:"Booking details not found for this event.",variant:"destructive"}),eo(!1)}catch(e){console.error("Error fetching booking for invoice:",e),U({title:"Error",description:"Could not load booking details.",variant:"destructive"}),eo(!1)}finally{eu(!1)}};return Q?(0,a.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,a.jsx)("p",{className:"ml-2",children:"Loading calendar data..."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,a.jsx)(g.A,{className:"mr-3 h-8 w-8 text-primary","data-ai-hint":"calendar icon"})," My Calendar & Events"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)(A.$,{onClick:()=>{U({title:"Google Calendar Sync (Placeholder)",description:"This feature is a placeholder. Real integration requires backend setup and Google API integration."})},variant:"outline",className:"text-sm",children:[(0,a.jsxs)("svg",{className:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),(0,a.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),(0,a.jsx)("span",{children:"Sync with Google Calendar"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2 sm:mt-0 self-center",children:"Shared/Team calendars are coming soon!"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)(l.Zp,{className:"lg:col-span-1 shadow-md",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Select a Date"})}),(0,a.jsxs)(l.Wu,{className:"flex flex-col items-center",children:[(0,a.jsx)(n.V,{mode:"single",selected:s,onSelect:_,className:"rounded-md border",disabled:e=>e<(0,c.o)(new Date(new Date().setDate(new Date().getDate()-365)))||e>new Date(new Date().setDate(new Date().getDate()+730)),modifiers:{blocked:z},modifiersStyles:{blocked:{textDecoration:"line-through",color:"hsl(var(--destructive))",backgroundColor:"hsl(var(--destructive) / 0.1)",opacity:.6}}}),(0,a.jsxs)(A.$,{onClick:eN,variant:"outline",className:"mt-4 w-full",disabled:$,children:[$&&s&&z.some(e=>(0,d.r)(e,s))?(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),ep?"Unblock Selected Date":"Block Selected Date"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Blocked dates will prevent new booking requests."})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold",children:["Events for: ",s?(0,m.GP)(s,"PPP"):"No date selected",s&&ep&&(0,a.jsx)(i.E,{variant:"destructive",className:"ml-2",children:"Date Blocked"})]}),s&&ep&&0===eh.length&&(0,a.jsx)(l.Zp,{className:"text-center py-12 border-dashed border-destructive/50 bg-destructive/5",children:(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(j.A,{className:"mx-auto h-12 w-12 text-destructive mb-3","data-ai-hint":"blocked warning"}),(0,a.jsx)("p",{className:"text-destructive font-semibold",children:"This date is marked as unavailable."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You will not receive new requests for this date."})]})}),eh.length>0?eh.map(e=>(0,a.jsxs)(l.Zp,{className:"shadow-lg border-l-4 ".concat("Confirmed"===e.status?"border-green-500":"Pending"===e.status?"border-yellow-500":"Cancelled"===e.status?"border-red-500":"WallEvent"===e.status?"border-blue-500":"Completed"===e.status?"border-green-700":"border-gray-300"),children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)(l.ZB,{className:"text-xl",children:e.title}),(0,a.jsxs)(i.E,{variant:ef(e.status),className:"flex items-center",children:[eg(e.status),"WallEvent"===e.status?"My Wall Event":e.status]})]}),e.customerName&&(0,a.jsxs)(l.BT,{children:["For: ",e.customerName]})]}),(0,a.jsxs)(l.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"people group"}),"PAX: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.pax})]}),(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2 text-green-600","data-ai-hint":"money dollar"}),"Price: ",(0,a.jsxs)("span",{className:"font-medium text-foreground ml-1",children:["$",e.pricePerHead,"/head"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"cutlery food"}),"Menu: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.menuName})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2 text-red-500","data-ai-hint":"location map"}),"Location: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.location})]})]}),e.notes&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,a.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Notes:"]}),(0,a.jsx)("p",{className:"text-sm bg-muted/50 p-2 rounded-md",children:e.notes})]}),e.coChefs&&e.coChefs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,a.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Co-Chefs:"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.coChefs.map(e=>(0,a.jsx)(i.E,{variant:"secondary",children:e},e))})]}),e.weather&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center",children:[(0,a.jsx)(D.A,{className:"h-3 w-3 mr-1 text-yellow-500","data-ai-hint":"sun weather"}),"Weather: ",e.weather]}),e.toolsNeeded&&e.toolsNeeded.length>0&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Tools Checklist: ",e.toolsNeeded.join(", ")]})]}),(0,a.jsxs)(l.wL,{className:"flex flex-col items-start space-y-2 pt-4 border-t",children:["Confirmed"===e.status&&!e.isWallEvent&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Event Completion:"})," Customer will provide a QR code with a Booking ID. Scan it to confirm completion and initiate the release of the remaining 50% of your funds."]}),(0,a.jsxs)(A.$,{variant:"outline",size:"sm",onClick:()=>ej(e),className:"w-full sm:w-auto",disabled:$,children:[$?(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-qr-code mr-2 h-4 w-4",children:[(0,a.jsx)("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),(0,a.jsx)("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),(0,a.jsx)("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),(0,a.jsx)("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),(0,a.jsx)("path",{d:"M21 21v.01"}),(0,a.jsx)("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),(0,a.jsx)("path",{d:"M3 12h.01"}),(0,a.jsx)("path",{d:"M12 3h.01"}),(0,a.jsx)("path",{d:"M12 16v.01"}),(0,a.jsx)("path",{d:"M16 12h.01"}),(0,a.jsx)("path",{d:"M21 12v.01"}),(0,a.jsx)("path",{d:"M12 21v-3a2 2 0 0 0-2-2H7"}),(0,a.jsx)("path",{d:"M7 21h3a2 2 0 0 0 2-2v-3"}),(0,a.jsx)("path",{d:"M16 7h3a2 2 0 0 1 2 2v3"}),(0,a.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Scan Customer QR / Complete Event"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 w-full pt-2 border-t mt-2",children:[(0,a.jsx)(A.$,{variant:"outline",size:"sm",onClick:()=>eb(e),className:"flex-1 min-w-[150px]",children:"View Event Details"}),("Confirmed"===e.status||"Completed"===e.status)&&!e.isWallEvent&&(0,a.jsxs)(A.$,{variant:"outline",size:"sm",onClick:()=>ey(e),className:"flex-1 min-w-[150px]",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"})," View Invoice"]})]}),"Cancelled"===e.status&&(0,a.jsx)("p",{className:"text-xs text-destructive",children:"This event has been cancelled."}),"Completed"===e.status&&(0,a.jsx)("p",{className:"text-xs text-green-700 font-medium",children:"This event has been marked as completed."})]})]},e.id)):s&&!ep&&(0,a.jsx)(l.Zp,{className:"text-center py-12 border-dashed",children:(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(g.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar empty"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No events scheduled for this day."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select another date to view events or manage your availability."})]})}),!s&&(0,a.jsx)(l.Zp,{className:"text-center py-12 border-dashed",children:(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(g.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar select"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please select a date to view events or manage availability."})]})})]})]}),(0,a.jsx)(k.AlertDialog,{open:V,onOpenChange:L,children:(0,a.jsxs)(k.AlertDialogContent,{className:"sm:max-w-lg",children:[(0,a.jsx)(k.AlertDialogHeader,{children:(0,a.jsx)(k.AlertDialogTitle,{children:(null==Z?void 0:Z.title)||"Event Details"})}),Z?(0,a.jsxs)("div",{className:"space-y-3 text-sm max-h-[60vh] overflow-y-auto p-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",Z.date?(0,m.GP)(Z.date,"PPP p"):"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",(0,a.jsx)(i.E,{variant:ef(Z.status),children:"WallEvent"===Z.status?"My Wall Event":Z.status})]}),Z.customerName&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Customer:"})," ",Z.customerName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",Z.pax]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Menu:"})," ",Z.menuName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Price:"})," $",Z.pricePerHead,"/head"]}),Z.location&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Location:"})," ",Z.location]}),Z.notes&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Notes:"})," ",Z.notes]}),Z.coChefs&&Z.coChefs.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Co-Chefs:"})," ",Z.coChefs.join(", ")]}),Z.weather&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Weather Forecast:"})," ",Z.weather]}),Z.toolsNeeded&&Z.toolsNeeded.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tools Needed:"})," ",Z.toolsNeeded.join(", ")]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Event ID: ",Z.id]})]}):(0,a.jsx)(k.AlertDialogDescription,{children:"Loading event details..."}),(0,a.jsx)(k.AlertDialogFooter,{children:(0,a.jsx)(k.AlertDialogCancel,{children:"Close"})})]})}),(0,a.jsx)(k.AlertDialog,{open:J,onOpenChange:Y,children:(0,a.jsxs)(k.AlertDialogContent,{className:"sm:max-w-md",children:[(0,a.jsxs)(k.AlertDialogHeader,{children:[(0,a.jsx)(k.AlertDialogTitle,{children:"Scan Customer QR Code"}),(0,a.jsx)(k.AlertDialogDescription,{children:"Point the camera at the customer's QR code. The booking ID will be automatically detected. Alternatively, if scanning fails, you can manually enter the Booking ID below."})]}),(0,a.jsx)("div",{id:"qr-reader",ref:es,className:"w-full aspect-square bg-muted rounded-md my-2",children:en&&(0,a.jsx)("p",{className:"text-destructive text-sm p-2",children:en})}),(0,a.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,a.jsx)(P.J,{htmlFor:"bookingIdInputManual",children:"Manual Booking ID Entry (if scan fails)"}),(0,a.jsx)(E.p,{id:"bookingIdInputManual",placeholder:"Enter Booking ID from customer",value:X,onChange:e=>K(e.target.value)})]}),(0,a.jsxs)(k.AlertDialogFooter,{children:[(0,a.jsx)(k.AlertDialogCancel,{onClick:()=>{ea&&ea.isScanning&&ea.stop().catch(e=>console.error("Error stopping scanner on cancel:",e)),et(null),Y(!1)},children:"Cancel"}),(0,a.jsxs)(k.AlertDialogAction,{onClick:()=>ex(X),disabled:$||!X.trim(),children:[$?(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Confirm with Entered ID"]})]})]})}),(0,a.jsx)(I.BookingInvoiceDialog,{isOpen:ei,onOpenChange:eo,booking:ed,customerName:(null==ed?void 0:ed.customerName)||(null==t?void 0:t.name)||"Customer"})]})}},53602:(e,t,s)=>{Promise.resolve().then(s.bind(s,52493))},54165:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Dialog:()=>o,DialogClose:()=>m,DialogContent:()=>x,DialogDescription:()=>g,DialogFooter:()=>p,DialogHeader:()=>h,DialogOverlay:()=>u,DialogPortal:()=>c,DialogTitle:()=>f,DialogTrigger:()=>d});var a=s(95155),r=s(12115),n=s(15452),l=s(25318),i=s(59434);let o=n.bL,d=n.l9,c=n.ZL,m=n.bm,u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=n.hJ.displayName;let x=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});f.displayName=n.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=n.VY.displayName},62523:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(95155),r=s(12115),n=s(59434);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},65620:(e,t,s)=>{"use strict";s.r(t),s.d(t,{BookingInvoiceDialog:()=>c});var a=s(95155),r=s(30285),n=s(54165),l=s(85388),i=s(22346),o=s(18018),d=s(25318);function c(e){let{isOpen:t,onOpenChange:s,booking:c,customerName:m}=e;return c?(0,a.jsx)(n.Dialog,{open:t,onOpenChange:s,children:(0,a.jsxs)(n.DialogContent,{className:"sm:max-w-2xl print:shadow-none print:border-none",children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{className:"text-2xl font-bold text-center",children:"Booking Confirmation / Invoice"}),(0,a.jsxs)(n.DialogDescription,{className:"text-center",children:["Booking ID: ",c.id]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 px-2 print:px-0",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Billed To:"}),(0,a.jsx)("p",{children:m||"Valued Customer"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Chef Provided By:"}),(0,a.jsx)("p",{children:c.chefName}),(0,a.jsx)("p",{children:"FindAChef Platform"})]})]}),(0,a.jsx)(i.w,{}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Event/Service:"}),(0,a.jsx)("span",{className:"font-medium",children:c.eventTitle})]}),c.menuTitle&&c.menuTitle!==c.eventTitle&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Menu:"}),(0,a.jsx)("span",{className:"font-medium",children:c.menuTitle})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Event Date:"}),(0,a.jsx)("span",{className:"font-medium",children:(0,l.GP)(new Date(c.eventDate),"PPPpp")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Number of Guests (PAX):"}),(0,a.jsx)("span",{className:"font-medium",children:c.pax})]}),void 0!==c.pricePerHead&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Price per Head:"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",c.pricePerHead.toFixed(2)]})]})]}),(0,a.jsx)(i.w,{}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold mt-4",children:[(0,a.jsx)("span",{children:"Total Amount:"}),(0,a.jsxs)("span",{children:["$",c.totalPrice.toFixed(2)]})]}),(0,a.jsx)("div",{className:"text-right text-green-600 font-semibold mt-1",children:"Status: PAID (Confirmed)"}),(0,a.jsx)(i.w,{className:"my-6 print:hidden"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground print:hidden",children:"This confirmation summarizes your booking details. For any discrepancies or questions, please contact support."})]}),(0,a.jsxs)(n.DialogFooter,{className:"print:hidden",children:[(0,a.jsxs)(r.$,{variant:"outline",onClick:()=>{window.print()},children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Print"]}),(0,a.jsx)(n.DialogClose,{asChild:!0,children:(0,a.jsxs)(r.$,{type:"button",variant:"secondary",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Close"]})})]})]})}):null}},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s(95155),r=s(12115),n=s(40968),l=s(74466),i=s(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),s),...r})});d.displayName=n.b.displayName},85511:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var a=s(95155);s(12115);var r=s(965),n=s(73158),l=s(77020),i=s(59434),o=s(30285);function d(e){let{className:t,classNames:s,showOutsideDays:d=!0,...c}=e;return(0,a.jsx)(l.hv,{showOutsideDays:d,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t,...s}=e;return(0,a.jsx)(r.A,{className:(0,i.cn)("h-4 w-4",t),...s})},IconRight:e=>{let{className:t,...s}=e;return(0,a.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...s})}},...c})}d.displayName="Calendar"},90010:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AlertDialog:()=>o,AlertDialogAction:()=>g,AlertDialogCancel:()=>j,AlertDialogContent:()=>u,AlertDialogDescription:()=>f,AlertDialogFooter:()=>h,AlertDialogHeader:()=>x,AlertDialogOverlay:()=>m,AlertDialogPortal:()=>c,AlertDialogTitle:()=>p,AlertDialogTrigger:()=>d});var a=s(95155),r=s(12115),n=s(17649),l=s(59434),i=s(30285);let o=n.bL,d=n.l9,c=n.ZL,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});u.displayName=n.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...r})});p.displayName=n.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=n.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,i.r)(),s),...r})});g.displayName=n.rc.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});j.displayName=n.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,5604,9352,4453,4602,1345,106,5388,7649,7576,9177,1778,8226,8441,1684,7358],()=>t(53602)),_N_E=e.O()}]);