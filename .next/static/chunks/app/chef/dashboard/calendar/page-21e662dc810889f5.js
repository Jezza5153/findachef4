(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8415],{26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var s=a(95155);a(12115);var r=a(74466),n=a(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...r})}},52493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a(95155),r=a(12115),n=a(85511),l=a(66695),i=a(26126),o=a(83343),d=a(44861),c=a(76959),m=a(80644),u=a(85388),x=a(51154),h=a(81284),p=a(40646),f=a(14186),g=a(1243),v=a(23562),j=a(6877),b=a(17580),w=a(55868),N=a(95747),y=a(4516),D=a(50744),C=a(62098),A=a(57434),k=a(30285),E=a(90010),P=a(62523),I=a(85057),S=a(87481),M=a(59576),R=a(56104),B=a(35317),H=a(55028);let _=(0,H.default)(()=>Promise.all([a.e(5604),a.e(8015)]).then(a.bind(a,98015)).then(e=>e.Html5Qrcode),{loadableGenerated:{webpack:()=>[98015]},ssr:!1,loading:()=>(0,s.jsx)(x.A,{className:"h-4 w-4 animate-spin"})}),Q=(0,H.default)(()=>a.e(1942).then(a.bind(a,29561)).then(e=>e.BookingInvoiceDialog),{loadableGenerated:{webpack:()=>[29561]},ssr:!1,loading:()=>(0,s.jsxs)("div",{className:"p-4 text-center",children:[(0,s.jsx)(x.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading invoice viewer..."]})});function T(){var e;let{user:t,userProfile:a,authLoading:H}=(0,M.A)(),[T,F]=(0,r.useState)(new Date),[W,q]=(0,r.useState)([]),[z,L]=(0,r.useState)([]),[O,G]=(0,r.useState)(!0),[V,Z]=(0,r.useState)(!1),[U,$]=(0,r.useState)(null),[J,Y]=(0,r.useState)(!1),{toast:X}=(0,S.dj)(),[K,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(""),[es,er]=(0,r.useState)(null),en=(0,r.useRef)(null),[el,ei]=(0,r.useState)(null),[eo,ed]=(0,r.useState)(null),[ec,em]=(0,r.useState)(!1),[eu,ex]=(0,r.useState)(null),[eh,ep]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e,a;if(H||!t){G(!1),q([]),L([]);return}console.log("ChefCalendarPage: useEffect triggered for data fetching. User ID:",t.uid),G(!0);let s=!0;return(async()=>{try{let r=(0,B.H9)(R.db,"users",t.uid);e=(0,B.aQ)(r,e=>{if(s)if(console.log("ChefCalendarPage: User profile snapshot received."),e.exists()){let t=e.data();t.blockedDates?L(t.blockedDates.map(e=>{let t=(0,o.H)(e);return(0,d.f)(t)?t:new Date(0)}).filter(e=>(0,d.f)(e)&&e.getTime()!==new Date(0).getTime())):L([])}else console.warn("ChefCalendarPage: User profile document not found."),L([])},e=>{s&&(console.error("ChefCalendarPage: Error fetching user profile for blocked dates:",e),X({title:"Error",description:"Could not fetch blocked dates.",variant:"destructive"}),L([]))});let n=(0,B.rJ)(R.db,"users/".concat(t.uid,"/calendarEvents")),l=(0,B.P)(n,(0,B.My)("date","asc"));a=(0,B.aQ)(l,e=>{if(!s)return;console.log("ChefCalendarPage: Calendar events snapshot received. Docs count:",e.docs.length);let t=e.docs.map(e=>{let t=e.data(),a=t.date;return a instanceof B.Dc?a=a.toDate():a&&"number"==typeof a.seconds?a=new B.Dc(a.seconds,a.nanoseconds).toDate():"string"==typeof a?a=(0,o.H)(a):a instanceof Date&&(0,d.f)(a)||(console.warn("ChefCalendarPage: Invalid event date format, using current date as fallback:",t.date),a=new Date),{id:e.id,...t,date:a,createdAt:t.createdAt instanceof B.Dc?t.createdAt.toDate():t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt instanceof B.Dc?t.updatedAt.toDate():t.updatedAt?new Date(t.updatedAt):void 0}});q(t)},e=>{s&&(console.error("ChefCalendarPage: Error fetching calendar events:",e),X({title:"Error",description:"Could not fetch calendar events.",variant:"destructive"}),q([]))})}catch(e){if(!s)return;console.error("ChefCalendarPage: Error in outer fetchData try-catch:",e),X({title:"Data Loading Error",description:"Failed to initialize data listeners.",variant:"destructive"})}finally{s&&setTimeout(()=>{s&&G(!1)},1500)}})(),()=>{s=!1,console.log("ChefCalendarPage: useEffect cleanup. Unsubscribing listeners."),e&&e(),a&&a(),el&&el.isScanning&&el.stop().catch(e=>console.warn("Error stopping QR scanner on unmount:",e))}},[t,H,X]),(0,r.useEffect)(()=>{if(K&&en.current&&!(null==el?void 0:el.isScanning)&&_){let e=new _("qr-reader");ei(e),ed(null),e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},(e,t)=>{console.log("QR Code detected: ".concat(e),t),ef(e)},e=>{}).catch(e=>{console.error("Unable to start QR scanning.",e),ed("Failed to start camera. Please check permissions and try again, or use manual ID entry."),X({title:"QR Scan Error",description:"Could not start QR scanner. Ensure camera permissions are granted.",variant:"destructive"})})}else!K&&el&&el.isScanning&&el.stop().catch(e=>console.error("Error stopping QR scanner:",e))},[K]);let ef=(0,r.useCallback)(e=>{el&&el.isScanning&&el.stop().catch(e=>console.warn("Error stopping QR scanner after scan:",e)),ee(!1),es&&e===es.bookingId?eg(es):es&&e===es.id&&!es.bookingId?(console.warn("Comparing decodedBookingId with eventToComplete.id as bookingId is missing on event."),eg(es)):X({title:"QR Code Mismatch",description:"The scanned QR code does not match the selected event's Booking ID. Please try again or use manual entry.",variant:"destructive",duration:7e3}),er(null)},[el,es,X]),eg=(0,r.useCallback)(async e=>{let a=e.bookingId||e.id;if(!t||!a)return void X({title:"Error",description:"Booking ID is required to complete the event.",variant:"destructive"});Y(!0),X({title:"Processing Event Completion...",description:"Marking event for booking ".concat(a.substring(0,6),"... as complete.")});try{let s=(0,B.wP)(R.db),r=(0,B.H9)(R.db,"bookings",a);s.update(r,{status:"completed",qrCodeScannedAt:(0,B.O5)(),updatedAt:(0,B.O5)()});let n=(0,B.H9)(R.db,"users/".concat(t.uid,"/calendarEvents"),e.id);s.update(n,{status:"Completed",updatedAt:(0,B.O5)()}),await s.commit(),X({title:"Event Marked as Complete!",description:"Event for booking ".concat(a.substring(0,6),"... status updated. Final payout process initiated (simulated)."),duration:7e3}),ee(!1),er(null)}catch(e){console.error("Error processing event completion:",e),X({title:"Error",description:"Could not mark event as complete. Please try again.",variant:"destructive"})}finally{Y(!1)}},[t,X]),ev=(0,r.useMemo)(()=>T?W.filter(e=>e.date&&(0,d.f)(new Date(e.date))&&(0,c.r)(new Date(e.date),T)):[],[T,W]),ej=(0,r.useMemo)(()=>{if(!T)return!1;let e=(0,m.o)(T);return z.some(t=>(0,d.f)(t)&&(0,c.r)(t,e))},[T,z]),eb=e=>{if(!e)return"outline";switch(e){case"Confirmed":return"default";case"Pending":case"Completed":return"secondary";case"Cancelled":return"destructive";default:return"outline"}},ew=e=>{if(!e)return(0,s.jsx)(h.A,{className:"h-4 w-4 mr-1.5"});switch(e){case"Confirmed":return(0,s.jsx)(p.A,{className:"h-4 w-4 mr-1.5 text-green-600"});case"Pending":return(0,s.jsx)(f.A,{className:"h-4 w-4 mr-1.5 text-yellow-600"});case"Cancelled":return(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1.5 text-red-600"});case"WallEvent":return(0,s.jsx)(h.A,{className:"h-4 w-4 mr-1.5 text-blue-500"});case"Completed":return(0,s.jsx)(p.A,{className:"h-4 w-4 mr-1.5 text-green-700"});default:return(0,s.jsx)(h.A,{className:"h-4 w-4 mr-1.5"})}},eN=e=>{if(!(e.bookingId||e.id))return void X({title:"Error",description:"Event is missing a valid Booking ID.",variant:"destructive"});el&&el.isScanning&&el.stop().catch(e=>console.warn("Error stopping QR scanner before new scan:",e)),er(e),ea(""),ee(!0)},ey=async()=>{let e;if(!t||!T)return void X({title:"No Date Selected",description:"Please select a date to block or unblock.",variant:"destructive"});Y(!0);let a=(0,m.o)(T),s=z.some(e=>(0,d.f)(e)&&(0,c.r)(e,a));e=[...new Set(e=s?z.filter(e=>(0,d.f)(e)&&!(0,c.r)(e,a)).map(e=>(0,u.GP)(e,"yyyy-MM-dd")):[...z,a].map(e=>(0,u.GP)(e,"yyyy-MM-dd")).sort())];try{let r=(0,B.H9)(R.db,"users",t.uid);await (0,B.mZ)(r,{blockedDates:e,updatedAt:(0,B.O5)()}),X({title:s?"Date Unblocked":"Date Blocked",description:"".concat((0,u.GP)(a,"PPP")," is now ").concat(s?"available":"marked as unavailable.")})}catch(e){console.error("Error updating blocked dates:",e),X({title:"Update Error",description:"Could not update blocked status.",variant:"destructive"})}finally{Y(!1)}},eD=e=>{$(e),Z(!0)},eC=async e=>{let t=e.bookingId||e.id;if(!t)return void X({title:"Error",description:"Cannot view invoice. Event is missing a valid Booking ID.",variant:"destructive"});ep(!0),em(!0),ex(null);try{let e=(0,B.H9)(R.db,"bookings",t),a=await (0,B.x7)(e);if(a.exists()){let e=a.data(),t={id:a.id,...e,eventDate:e.eventDate instanceof B.Dc?e.eventDate.toDate():new Date(e.eventDate),createdAt:e.createdAt instanceof B.Dc?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):void 0,updatedAt:e.updatedAt instanceof B.Dc?e.updatedAt.toDate():e.updatedAt?new Date(e.updatedAt):void 0,qrCodeScannedAt:e.qrCodeScannedAt instanceof B.Dc?e.qrCodeScannedAt.toDate():e.qrCodeScannedAt?new Date(e.qrCodeScannedAt):void 0};ex(t)}else X({title:"Error",description:"Booking details not found for this event.",variant:"destructive"}),em(!1)}catch(e){console.error("Error fetching booking for invoice:",e),X({title:"Error",description:"Could not load booking details.",variant:"destructive"}),em(!1)}finally{ep(!1)}};return H||O?(0,s.jsxs)("div",{className:"flex justify-center items-center min-h-[calc(100vh-200px)]",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,s.jsx)("p",{className:"ml-3 text-lg",children:"Loading calendar data..."})]}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-3 h-8 w-8 text-primary","data-ai-hint":"calendar icon"})," My Calendar & Events"]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(k.$,{onClick:()=>{X({title:"Google Calendar Sync (Placeholder)",description:"This feature is a placeholder. Real integration requires backend setup and Google API integration."})},variant:"outline",className:"text-sm",children:[(0,s.jsxs)("svg",{className:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),(0,s.jsx)("span",{children:"Sync with Google Calendar"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2 sm:mt-0 self-center",children:"Shared/Team calendars are coming soon!"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)(l.Zp,{className:"lg:col-span-1 shadow-md",children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{children:"Select a Date"})}),(0,s.jsxs)(l.Wu,{className:"flex flex-col items-center",children:[(0,s.jsx)(n.V,{mode:"single",selected:T,onSelect:F,className:"rounded-md border",disabled:e=>e<(0,m.o)(new Date(new Date().setDate(new Date().getDate()-365)))||e>new Date(new Date().setDate(new Date().getDate()+730)),modifiers:{blocked:z.filter(e=>(0,d.f)(e))},modifiersStyles:{blocked:{textDecoration:"line-through",color:"hsl(var(--destructive))",backgroundColor:"hsl(var(--destructive) / 0.1)",opacity:.6}}}),(0,s.jsxs)(k.$,{onClick:ey,variant:"outline",className:"mt-4 w-full",disabled:J,children:[J&&T&&ej?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),ej?"Unblock Selected Date":"Block Selected Date"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Blocked dates will prevent new booking requests."})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold",children:["Events for: ",T&&(0,d.f)(T)?(0,u.GP)(T,"PPP"):"No date selected",T&&ej&&(0,s.jsx)(i.E,{variant:"destructive",className:"ml-2",children:"Date Blocked"})]}),T&&ej&&0===ev.length&&(0,s.jsx)(l.Zp,{className:"text-center py-12 border-dashed border-destructive/50 bg-destructive/5",children:(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)(j.A,{className:"mx-auto h-12 w-12 text-destructive mb-3","data-ai-hint":"blocked warning"}),(0,s.jsx)("p",{className:"text-destructive font-semibold",children:"This date is marked as unavailable."}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You will not receive new requests for this date."})]})}),ev.length>0?ev.map(e=>(0,s.jsxs)(l.Zp,{className:"shadow-lg border-l-4 ".concat("Confirmed"===e.status?"border-green-500":"Pending"===e.status?"border-yellow-500":"Cancelled"===e.status?"border-red-500":"WallEvent"===e.status?"border-blue-500":"Completed"===e.status?"border-green-700":"border-gray-300"),children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)(l.ZB,{className:"text-xl",children:e.title}),(0,s.jsxs)(i.E,{variant:eb(e.status),className:"flex items-center text-xs capitalize",children:[ew(e.status),"WallEvent"===e.status?"My Wall Event":e.status]})]}),e.customerName&&(0,s.jsxs)(l.BT,{children:["For: ",e.customerName]})]}),(0,s.jsxs)(l.Wu,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"people group"}),"PAX: ",(0,s.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.pax})]}),(0,s.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2 text-green-600","data-ai-hint":"money dollar"}),"Price: ",(0,s.jsxs)("span",{className:"font-medium text-foreground ml-1",children:["$",e.pricePerHead?e.pricePerHead.toFixed(2):"N/A","/head"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"cutlery food"}),"Menu: ",(0,s.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.menuName})]}),e.location&&(0,s.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-2 text-red-500","data-ai-hint":"location map"}),"Location: ",(0,s.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.location})]})]}),e.notes&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,s.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Notes:"]}),(0,s.jsx)("p",{className:"text-sm bg-muted/50 p-2 rounded-md",children:e.notes})]}),e.coChefs&&e.coChefs.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,s.jsx)(D.A,{className:"h-3 w-3 mr-1"}),"Co-Chefs:"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.coChefs.map(e=>(0,s.jsx)(i.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),e.weather&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center",children:[(0,s.jsx)(C.A,{className:"h-3 w-3 mr-1 text-yellow-500","data-ai-hint":"sun weather"}),"Weather: ",e.weather]}),e.toolsNeeded&&e.toolsNeeded.length>0&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Tools Checklist: ",e.toolsNeeded.join(", ")]})]}),(0,s.jsxs)(l.wL,{className:"flex flex-col items-start space-y-2 pt-4 border-t",children:["Confirmed"===e.status&&!e.isWallEvent&&(e.bookingId||e.id)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("strong",{children:"Event Completion:"})," Customer will provide a QR code with Booking ID ",(0,s.jsxs)("span",{className:"font-mono text-primary/80 text-[10px]",children:["(",(e.bookingId||e.id).substring(0,6),"...)"]}),". Scan it or enter manually to confirm completion and initiate the release of the remaining 50% of your funds."]}),(0,s.jsxs)(k.$,{variant:"outline",size:"sm",onClick:()=>eN(e),className:"w-full sm:w-auto",disabled:J,children:[J&&(null==es?void 0:es.id)===e.id?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-qr-code mr-2 h-4 w-4",children:[(0,s.jsx)("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),(0,s.jsx)("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),(0,s.jsx)("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),(0,s.jsx)("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),(0,s.jsx)("path",{d:"M21 21v.01"}),(0,s.jsx)("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),(0,s.jsx)("path",{d:"M3 12h.01"}),(0,s.jsx)("path",{d:"M12 3h.01"}),(0,s.jsx)("path",{d:"M12 16v.01"}),(0,s.jsx)("path",{d:"M16 12h.01"}),(0,s.jsx)("path",{d:"M21 12v.01"}),(0,s.jsx)("path",{d:"M12 21v-3a2 2 0 0 0-2-2H7"}),(0,s.jsx)("path",{d:"M7 21h3a2 2 0 0 0 2-2v-3"}),(0,s.jsx)("path",{d:"M16 7h3a2 2 0 0 1 2 2v3"}),(0,s.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Scan QR / Enter ID"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 w-full pt-2 border-t mt-2",children:[(0,s.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>eD(e),className:"flex-1 min-w-[150px]",children:"View Event Details"}),("Confirmed"===e.status||"Completed"===e.status)&&!e.isWallEvent&&(e.bookingId||e.id)&&(0,s.jsxs)(k.$,{variant:"outline",size:"sm",onClick:()=>eC(e),className:"flex-1 min-w-[150px]",children:[(0,s.jsx)(A.A,{className:"mr-2 h-4 w-4"})," View Invoice"]})]}),"Cancelled"===e.status&&(0,s.jsx)("p",{className:"text-xs text-destructive",children:"This event has been cancelled."}),"Completed"===e.status&&(0,s.jsx)("p",{className:"text-xs text-green-700 font-medium",children:"This event has been marked as completed."})]})]},e.id)):T&&!ej&&(0,s.jsx)(l.Zp,{className:"text-center py-12 border-dashed",children:(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)(v.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar empty"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No events scheduled for this day."}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select another date to view events or manage your availability."})]})}),!T&&(0,s.jsx)(l.Zp,{className:"text-center py-12 border-dashed",children:(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)(v.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar select"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please select a date to view events or manage availability."})]})})]})]}),(0,s.jsx)(E.AlertDialog,{open:V,onOpenChange:Z,children:(0,s.jsxs)(E.AlertDialogContent,{className:"sm:max-w-lg",children:[(0,s.jsx)(E.AlertDialogHeader,{children:(0,s.jsx)(E.AlertDialogTitle,{children:(null==U?void 0:U.title)||"Event Details"})}),U?(0,s.jsxs)("div",{className:"space-y-3 text-sm max-h-[60vh] overflow-y-auto p-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Date:"})," ",U.date&&(0,d.f)(new Date(U.date))?(0,u.GP)(new Date(U.date),"PPP p"):"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",(0,s.jsx)(i.E,{variant:eb(U.status),className:"text-xs capitalize",children:"WallEvent"===U.status?"My Wall Event":U.status})]}),U.customerName&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Customer:"})," ",U.customerName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"PAX:"})," ",U.pax]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Menu:"})," ",U.menuName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Price:"})," $",U.pricePerHead?U.pricePerHead.toFixed(2):"N/A","/head"]}),U.location&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Location:"})," ",U.location]}),U.notes&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Notes:"})," ",U.notes]}),U.coChefs&&U.coChefs.length>0&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Co-Chefs:"})," ",U.coChefs.join(", ")]}),U.weather&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Weather Forecast:"})," ",U.weather]}),U.toolsNeeded&&U.toolsNeeded.length>0&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Tools Needed:"})," ",U.toolsNeeded.join(", ")]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Event ID: ",U.id," ",U.bookingId&&"(Booking ID: ".concat(U.bookingId,")")]})]}):E.AlertDialogDescription&&(0,s.jsx)(E.AlertDialogDescription,{children:"Loading event details..."}),(0,s.jsx)(E.AlertDialogFooter,{children:(0,s.jsx)(E.AlertDialogCancel,{children:"Close"})})]})}),(0,s.jsx)(E.AlertDialog,{open:K,onOpenChange:ee,children:(0,s.jsxs)(E.AlertDialogContent,{className:"sm:max-w-md",children:[(0,s.jsxs)(E.AlertDialogHeader,{children:[(0,s.jsx)(E.AlertDialogTitle,{children:"Scan Customer QR / Enter Booking ID"}),E.AlertDialogDescription&&(0,s.jsxs)(E.AlertDialogDescription,{children:["Point camera at QR code or manually enter Booking ID ",(0,s.jsxs)("span",{className:"font-mono text-xs text-primary/90",children:["(",(null==es||null==(e=es.bookingId)?void 0:e.substring(0,6))||(null==es?void 0:es.id.substring(0,6)),"...)"]}),"."]})]}),_&&(0,s.jsxs)("div",{id:"qr-reader",ref:en,className:"w-full aspect-square bg-muted rounded-md my-2 border",children:[eo&&(0,s.jsx)("p",{className:"text-destructive text-sm p-2 text-center",children:eo}),!eo&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm p-2 text-center",children:"Initializing camera... Grant permission if prompted."})]}),(0,s.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,s.jsx)(I.J,{htmlFor:"bookingIdInputManual",children:"Manual Booking ID Entry (if scan fails)"}),(0,s.jsx)(P.p,{id:"bookingIdInputManual",placeholder:"Enter Full Booking ID from customer",value:et,onChange:e=>ea(e.target.value),disabled:J})]}),(0,s.jsxs)(E.AlertDialogFooter,{className:"mt-4",children:[(0,s.jsx)(E.AlertDialogCancel,{onClick:()=>{el&&el.isScanning&&el.stop().catch(e=>console.warn("Error stopping scanner on cancel:",e)),er(null),ee(!1)},disabled:J,children:"Cancel"}),(0,s.jsxs)(E.AlertDialogAction,{onClick:()=>{if(!es)return;let e=es.bookingId||es.id;et.trim()===e?eg(es):X({title:"Booking ID Mismatch",description:"Manually entered ID does not match the event's Booking ID.",variant:"destructive"})},disabled:J||!et.trim(),children:[J?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Confirm with Entered ID"]})]})]})}),Q&&(0,s.jsx)(Q,{isOpen:ec,onOpenChange:em,booking:eu,customerName:(null==eu?void 0:eu.customerName)||(null==a?void 0:a.name)||"Customer"})]})}},53602:(e,t,a)=>{Promise.resolve().then(a.bind(a,52493))},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(95155),r=a(12115),n=a(59434);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(95155),r=a(12115),n=a(40968),l=a(74466),i=a(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),a),...r})});d.displayName=n.b.displayName},85511:(e,t,a)=>{"use strict";a.d(t,{V:()=>d});var s=a(95155);a(12115);var r=a(42355),n=a(13052),l=a(77020),i=a(59434),o=a(30285);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,s.jsx)(l.hv,{showOutsideDays:d,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,i.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...a})}},...c})}d.displayName="Calendar"},90010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AlertDialog:()=>o,AlertDialogAction:()=>g,AlertDialogCancel:()=>v,AlertDialogContent:()=>u,AlertDialogDescription:()=>f,AlertDialogFooter:()=>h,AlertDialogHeader:()=>x,AlertDialogOverlay:()=>m,AlertDialogPortal:()=>c,AlertDialogTitle:()=>p,AlertDialogTrigger:()=>d});var s=a(95155),r=a(12115),n=a(17649),l=a(59434),i=a(30285);let o=n.bL,d=n.l9,c=n.ZL,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});u.displayName=n.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="AlertDialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",a),...r})});p.displayName=n.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=n.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,i.r)(),a),...r})});g.displayName=n.rc.displayName;let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});v.displayName=n.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,5100,4602,1345,3067,5388,7649,1014,5870,8226,8441,1684,7358],()=>t(53602)),_N_E=e.O()}]);