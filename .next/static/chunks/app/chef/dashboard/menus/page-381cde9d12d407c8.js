(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9667],{15263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var i=s(95155),r=s(12115),n=s(90221),a=s(62177),l=s(55594),o=s(30285),d=s(17759),c=s(62523),u=s(88539),m=s(80333),p=s(47262),x=s(66695),h=s(76252),f=s(87481),g=s(50172),b=s(72233),j=s(34301),v=s(74601),y=s(23422),I=s(79503),N=s(35297),w=s(11133),A=s(46102),C=s(59576),P=s(56104),M=s(35317),S=s(90858),R=s(66766),k=s(34477);let D=(0,k.createServerReference)("407b8f0736cd0bf4772ca42b28564d4c17ea7e5c2f",k.callServer,void 0,k.findSourceMapURL,"assistMenuItem");var F=s(79737),T=s(55028);let E=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.Dialog),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),U=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.DialogContent),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),O=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.DialogHeader),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),H=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.DialogTitle),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),z=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.DialogFooter),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),B=(0,T.default)(()=>Promise.all([s.e(1345),s.e(6546)]).then(s.bind(s,54165)).then(e=>e.DialogClose),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),J=[{value:"Vegetarian",label:"Vegetarian"},{value:"Vegan",label:"Vegan"},{value:"Gluten-Free",label:"Gluten-Free"},{value:"Dairy-Free",label:"Dairy-Free"},{value:"Nut-Free",label:"Nut-Free"}],V=l.Ik({id:l.Yj(),name:l.Yj().min(1,{message:"Ingredient name is required."}),quantity:l.au.number().min(.01,{message:"Quantity must be positive."}),unit:l.Yj().min(1,{message:"Unit is required."}),costPerUnit:l.au.number().min(0,{message:"Cost per unit must be non-negative."}),totalCost:l.au.number().optional(),notes:l.Yj().optional()}),_=l.Ik({title:l.Yj().min(3,{message:"Title must be at least 3 characters."}),description:l.Yj().min(10,{message:"Description must be at least 10 characters."}),cuisine:l.Yj().min(2,{message:"Cuisine type is required."}),pricePerHead:l.au.number().min(0,{message:"Sale price must be a positive number."}),pax:l.au.number().min(1,{message:"PAX must be at least 1."}).optional(),costPrice:l.au.number().min(0,{message:"Cost price must be positive."}).optional(),dietaryInfo:l.YO(l.Yj()).optional(),isPublic:l.zM().default(!1),menuImageFile:l.Nl(File).optional().refine(e=>!e||e.size<=2097152,"Max image size is 2MB.").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only JPG, PNG, WEBP files are allowed."),dataAiHint:l.Yj().optional().max(30,"Hint should be brief, max 2 words."),menuIngredients:l.YO(V).optional()});function Y(){let{user:e,userProfile:t,isChefSubscribed:s}=(0,C.A)(),[l,k]=(0,r.useState)([]),[T,V]=(0,r.useState)(!0),[Y,G]=(0,r.useState)(!1),[$,q]=(0,r.useState)(!1),[L,X]=(0,r.useState)(null),[W,Z]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[ee,et]=(0,r.useState)(!1),{toast:es}=(0,f.dj)(),ei=(0,a.mN)({resolver:(0,n.u)(_),defaultValues:{title:"",description:"",cuisine:"",pricePerHead:0,dietaryInfo:[],isPublic:!1,menuImageFile:void 0,pax:1,costPrice:0,dataAiHint:"",menuIngredients:[]}}),{fields:er,append:en,remove:ea}=(0,a.jz)({control:ei.control,name:"menuIngredients"}),el=ei.watch("menuIngredients"),eo=ei.watch("pax"),ed=(0,r.useMemo)(()=>(null==el?void 0:el.reduce((e,t)=>e+(Number(t.quantity)||0)*(Number(t.costPerUnit)||0),0))||0,[el]),ec=(0,r.useMemo)(()=>ed/Math.max(1,Number(eo)||1),[ed,eo]);(0,r.useEffect)(()=>{if(!e){V(!1),k([]);return}V(!0);let t=(0,M.rJ)(P.db,"menus"),s=(0,M.P)(t,(0,M._M)("chefId","==",e.uid),(0,M.My)("createdAt","desc")),i=(0,M.aQ)(s,e=>{k(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt instanceof M.Dc?t.createdAt.toDate():t.createdAt?new Date(t.createdAt):void 0,updatedAt:t.updatedAt instanceof M.Dc?t.updatedAt.toDate():t.updatedAt?new Date(t.updatedAt):void 0}})),V(!1)},e=>{console.error("Error fetching menus:",e),es({title:"Error",description:"Could not fetch your menus.",variant:"destructive"}),V(!1)});return()=>i()},[e,es]);let eu=e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){ei.setValue("menuImageFile",s,{shouldValidate:!0}),Z(s);let e=new FileReader;e.onloadend=()=>{Q(e.result)},e.readAsDataURL(s)}else ei.setValue("menuImageFile",void 0),Z(null),Q((null==L?void 0:L.imageUrl)||null)},em=async s=>{if(!e||!t)return void es({title:"Authentication Error",description:"You must be logged in to manage menus.",variant:"destructive"});G(!0);let i=(null==L?void 0:L.imageUrl)||"",r=(null==L?void 0:L.id)||(0,M.H9)((0,M.rJ)(P.db,"menus")).id;try{var n;if(W){if(L&&L.imageUrl&&L.imageUrl.startsWith("https://firebasestorage.googleapis.com"))try{let e=(0,S.KR)(P.IG,L.imageUrl);await (0,S.XR)(e).catch(e=>console.warn("Old image not found or could not be deleted for menu:",e))}catch(e){console.warn("Error deleting old menu image:",e)}let t=W.name.split(".").pop(),s="users/".concat(e.uid,"/menus/").concat(r,"/image.").concat(t),n=(0,S.KR)(P.IG,s);es({title:"Uploading image...",description:"Please wait."});let a=(0,S.bp)(n,W);await new Promise((e,t)=>{a.on("state_changed",null,e=>{console.error("Menu image upload error:",e),t(e)},async()=>{i=await (0,S.qk)(a.snapshot.ref),e()})})}let a=(null==(n=s.menuIngredients)?void 0:n.map(e=>({...e,totalCost:(Number(e.quantity)||0)*(Number(e.costPerUnit)||0)})))||[],l=a.reduce((e,t)=>e+(t.totalCost||0),0),o=Math.max(1,Number(s.pax)||1),d={title:s.title,description:s.description,cuisine:s.cuisine,pricePerHead:s.pricePerHead,pax:s.pax,costPrice:s.costPrice,dietaryInfo:s.dietaryInfo||[],isPublic:s.isPublic,imageUrl:i,dataAiHint:s.dataAiHint,chefId:e.uid,chefName:t.name||e.displayName||"Chef",chefProfilePictureUrl:t.profilePictureUrl||e.photoURL||void 0,menuIngredients:a,calculatedTotalIngredientCost:l,calculatedCostPricePerHead:l/o,adminStatus:(null==L?void 0:L.adminStatus)||"pending",updatedAt:(0,M.O5)()};if(L){let e=(0,M.H9)(P.db,"menus",L.id);await (0,M.mZ)(e,d),es({title:"Menu Updated",description:'"'.concat(s.title,'" has been successfully updated.')})}else{let e=(0,M.H9)(P.db,"menus",r);await (0,M.BN)(e,{...d,id:e.id,createdAt:(0,M.O5)()}),es({title:"Menu Created",description:'"'.concat(s.title,'" has been successfully created.')})}ei.reset(),X(null),q(!1),Z(null),Q(null)}catch(e){console.error("Error saving menu:",e),es({title:"Save Failed",description:"Could not save your menu. Please try again.",variant:"destructive"})}finally{G(!1)}},ep=e=>{let t=l.find(t=>t.id===e);if(t){var s;X(t),ei.reset({title:t.title,description:t.description,cuisine:t.cuisine,pricePerHead:t.pricePerHead||0,pax:t.pax||1,costPrice:t.costPrice||0,dietaryInfo:t.dietaryInfo||[],isPublic:t.isPublic,menuImageFile:void 0,dataAiHint:t.dataAiHint||"",menuIngredients:(null==(s=t.menuIngredients)?void 0:s.map(e=>({...e,id:e.id||(0,F.A)()})))||[]}),Q(t.imageUrl||null),Z(null),q(!0)}},ex=async t=>{if(!e)return;let s=l.find(e=>e.id===t);if(s&&window.confirm('Are you sure you want to delete the menu "'.concat(null==s?void 0:s.title,'"?'))){G(!0);try{if(s.imageUrl&&s.imageUrl.startsWith("https://firebasestorage.googleapis.com"))try{let e=(0,S.KR)(P.IG,s.imageUrl);await (0,S.XR)(e)}catch(e){console.warn("Could not delete menu image from storage:",s.imageUrl,e)}await (0,M.kd)((0,M.H9)(P.db,"menus",t)),es({title:"Menu Deleted",description:'"'.concat(null==s?void 0:s.title,'" has been deleted.'),variant:"destructive"})}catch(e){console.error("Error deleting menu:",e),es({title:"Delete Error",description:"Could not delete menu.",variant:"destructive"})}finally{G(!1)}}},eh=async t=>{var s,i,r;if(!e)return void es({title:"Not Logged In",description:"Please log in to add items to your shopping list.",variant:"destructive"});let n=null!=(i=null!=(s=t.costPrice)?s:t.calculatedCostPricePerHead)?i:0,a=null!=(r=t.pax)?r:1,l={chefId:e.uid,name:"Ingredients for ".concat(t.title),quantity:a,unit:"Servings",estimatedCost:n*a,notes:"For menu: ".concat(t.title," (ID: ").concat(t.id,"). Cost per head: $").concat(n.toFixed(2)," for ").concat(a," PAX."),purchased:!1,menuId:t.id};try{let t=(0,M.rJ)(P.db,"users/".concat(e.uid,"/shoppingListItems"));await (0,M.gS)(t,{...l,createdAt:(0,M.O5)(),updatedAt:(0,M.O5)()}),es({title:"Added to Shopping List",description:'"'.concat(l.name,'" added.')})}catch(e){console.error("Error adding to shopping list:",e),es({title:"Error",description:"Could not add item to shopping list.",variant:"destructive"})}},ef=()=>{ei.reset({title:"",description:"",cuisine:"",pricePerHead:0,dietaryInfo:[],isPublic:!1,menuImageFile:void 0,pax:1,costPrice:0,dataAiHint:"",menuIngredients:[]}),X(null),Z(null),Q(null),q(!0)},eg=async()=>{let{title:e,description:t,cuisine:s,menuIngredients:i}=ei.getValues();if(!e||!s)return void es({title:"Missing Information for AI",description:"Please provide at least a Menu Title and Cuisine Type for AI assistance.",variant:"destructive"});et(!0),es({title:"AI Menu Assist",description:"Generating suggestions..."});try{let r=null==i?void 0:i.map(e=>e.name).filter(Boolean).join(", "),n=await D({menuTitle:e,currentDescription:t,cuisine:s,keyIngredients:r});n&&n.suggestedDescription?(ei.setValue("description",n.suggestedDescription,{shouldValidate:!0}),es({title:"AI Suggestion Applied",description:"Description updated with AI suggestion."})):es({title:"AI Menu Assist",description:"Could not generate a suggestion at this time.",variant:"default"})}catch(e){console.error("Error with AI Menu Assist:",e),es({title:"AI Error",description:"Failed to get AI suggestions.",variant:"destructive"})}finally{et(!1)}};return T?(0,i.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,i.jsx)(g.A,{className:"h-8 w-8 animate-spin"})," Loading menus..."]}):(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,i.jsx)(b.A,{className:"mr-3 h-8 w-8 text-primary"})," Manage Your Menus"]}),(0,i.jsxs)(o.$,{onClick:ef,disabled:Y,children:[(0,i.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Add New Menu"]})]}),(0,i.jsx)(E,{open:$,onOpenChange:e=>{(Y||ee)&&e||(q(e),e||(Z(null),Q(null),ei.reset(),X(null)))},children:(0,i.jsxs)(U,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsx)(O,{children:(0,i.jsx)(H,{children:L?"Edit Menu":"Create New Menu"})}),(0,i.jsx)(d.lV,{...ei,children:(0,i.jsxs)("form",{onSubmit:ei.handleSubmit(em),className:"space-y-6 p-1",children:[(0,i.jsx)(d.zB,{control:ei.control,name:"title",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Menu Title"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"e.g., Summer BBQ Special",...t})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"cuisine",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Cuisine Type"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"e.g., Mexican, Thai, Fusion",...t})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"description",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Description"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(u.T,{placeholder:"Detailed description of the menu...",...t,className:"min-h-[100px]"})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsxs)(o.$,{type:"button",variant:"outline",onClick:eg,size:"sm",className:"w-full",disabled:ee||Y,children:[ee?(0,i.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,i.jsx)(v.A,{className:"mr-2 h-4 w-4"}),ee?"Getting Suggestion...":"AI Assist: Enhance Description"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(d.zB,{control:ei.control,name:"pricePerHead",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Sale Price per Head ($)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"number",step:"0.01",placeholder:"75.00",...t})}),(0,i.jsx)(d.Rr,{children:"The price customers will pay."}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"pax",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Serves (PAX)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"number",placeholder:"e.g., 10",...t,defaultValue:1})}),(0,i.jsx)(d.Rr,{children:"Number of people this menu typically serves. Affects per-head cost calculation."}),(0,i.jsx)(d.C5,{})]})}})]}),(0,i.jsx)(d.zB,{control:ei.control,name:"menuImageFile",render:()=>(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Menu Image (Optional)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:eu,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"})}),K&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(R.default,{src:K,alt:"Menu image preview",width:200,height:150,className:"rounded-md object-cover","data-ai-hint":"menu food"})}),(0,i.jsx)(d.Rr,{children:"A captivating image for your menu (max 2MB, JPG/PNG/WEBP)."}),(0,i.jsx)(d.C5,{})]})}),(0,i.jsx)(d.zB,{control:ei.control,name:"dataAiHint",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Image Description Hint (for AI)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"e.g., italian food, pasta dish",...t})}),(0,i.jsx)(d.Rr,{children:"One or two keywords to help AI understand the image content (max 2 words)."}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,i.jsx)(y.A,{className:"mr-2 h-5 w-5"}),"Ingredients & Costing"]}),er.map((e,t)=>(0,i.jsxs)(x.Zp,{className:"p-4 space-y-3 bg-muted/30",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)(d.lR,{children:["Ingredient ",t+1]}),(0,i.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>ea(t),className:"text-destructive hover:text-destructive",children:(0,i.jsx)(I.A,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,i.jsx)(d.zB,{control:ei.control,name:"menuIngredients.".concat(t,".name"),render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{className:"col-span-2 md:col-span-1",children:[(0,i.jsx)(d.lR,{className:"text-xs",children:"Name"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"e.g., Flour",...t})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"menuIngredients.".concat(t,".quantity"),render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{className:"text-xs",children:"Qty"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"number",step:"0.01",placeholder:"2.5",...t})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"menuIngredients.".concat(t,".unit"),render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{className:"text-xs",children:"Unit"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"kg, pcs, L",...t})}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(d.zB,{control:ei.control,name:"menuIngredients.".concat(t,".costPerUnit"),render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{className:"text-xs",children:"Cost/Unit ($)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"number",step:"0.01",placeholder:"5.99",...t})}),(0,i.jsx)(d.C5,{})]})}})]}),(0,i.jsx)(d.zB,{control:ei.control,name:"menuIngredients.".concat(t,".notes"),render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{className:"text-xs",children:"Notes (Optional)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{placeholder:"Brand, specific type",...t})})]})}}),(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Total for this ingredient: $ ",((Number(ei.getValues("menuIngredients.".concat(t,".quantity")))||0)*(Number(ei.getValues("menuIngredients.".concat(t,".costPerUnit")))||0)).toFixed(2)]})]},e.id)),(0,i.jsxs)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>en({id:(0,F.A)(),name:"",quantity:1,unit:"",costPerUnit:0,notes:""}),children:[(0,i.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Add Ingredient"]}),(0,i.jsxs)("div",{className:"mt-4 p-3 bg-secondary rounded-md space-y-1 text-sm",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total Ingredient Cost for Menu:"})," $",ed.toFixed(2)]}),(0,i.jsxs)("p",{children:[(0,i.jsxs)("strong",{children:["Calculated Cost per Head (for ",ei.getValues("pax")||1," PAX):"]})," $",ec.toFixed(2)]})]}),(0,i.jsx)(d.zB,{control:ei.control,name:"costPrice",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{children:[(0,i.jsx)(d.lR,{children:"Final Determined Cost Price per Head ($)"}),(0,i.jsx)(d.MJ,{children:(0,i.jsx)(c.p,{type:"number",step:"0.01",placeholder:"30.00",...t})}),(0,i.jsx)(d.Rr,{children:"Your internal cost per serving. You can use the calculated value above or enter your own."}),(0,i.jsx)(d.C5,{})]})}}),(0,i.jsx)(o.$,{type:"button",variant:"link",size:"sm",className:"p-0 h-auto",onClick:()=>ei.setValue("costPrice",parseFloat(ec.toFixed(2))),disabled:0===ec&&0===ed,children:"Use Calculated Cost per Head"})]}),(0,i.jsxs)(d.eI,{className:"pt-4 border-t",children:[(0,i.jsx)(d.lR,{children:"Dietary Information (Flags)"}),(0,i.jsx)(a.xI,{name:"dietaryInfo",control:ei.control,render:e=>{let{field:t}=e;return(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:J.map(e=>{var s;return(0,i.jsxs)(d.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,i.jsx)(d.MJ,{children:(0,i.jsx)(p.S,{checked:null==(s=t.value)?void 0:s.includes(e.value),onCheckedChange:s=>s?t.onChange([...t.value||[],e.value]):t.onChange((t.value||[]).filter(t=>t!==e.value))})}),(0,i.jsx)(d.lR,{className:"font-normal",children:e.label})]},e.value)})})}}),(0,i.jsx)(d.C5,{})]}),(0,i.jsx)(d.zB,{control:ei.control,name:"isPublic",render:e=>{let{field:t}=e;return(0,i.jsxs)(d.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-4 shadow-sm",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)(d.lR,{className:"text-base",children:"Publish Menu"}),(0,i.jsxs)(d.Rr,{children:["Make this menu visible to customers on the public menu listings.",!s&&t.value&&" Public visibility requires an active subscription.",!s&&!t.value&&" Publishing public menus requires an active subscription."]})]}),(0,i.jsx)(A.Bc,{children:(0,i.jsxs)(A.m_,{delayDuration:100,children:[(0,i.jsx)(A.k$,{asChild:!0,children:(0,i.jsx)(d.MJ,{children:(0,i.jsx)(m.d,{checked:t.value,onCheckedChange:e=>{if(e&&!s)return void es({title:"Subscription Required",description:"You need an active subscription to publish menus publicly.",variant:"destructive"});t.onChange(e)},disabled:Y||t.value&&!s})})}),!s&&(0,i.jsx)(A.ZI,{children:(0,i.jsxs)("p",{className:"flex items-center",children:[(0,i.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Subscription required to publish publicly."]})})]})})]})}}),(0,i.jsxs)(z,{children:[(0,i.jsx)(B,{asChild:!0,children:(0,i.jsx)(o.$,{type:"button",variant:"outline",disabled:Y||ee,children:"Cancel"})}),(0,i.jsx)(o.$,{type:"submit",disabled:Y||ee||ei.getValues("isPublic")&&!s,children:Y?(0,i.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):L?"Save Changes":"Create Menu"})]})]})})]})}),l.length>0?(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,i.jsx)(h.Y,{menu:e,onEdit:()=>ep(e.id),onDelete:()=>ex(e.id),onAddToShoppingList:()=>eh(e),isChefOwner:!0,showChefDetails:!1},e.id))}):!T&&(0,i.jsxs)(x.Zp,{className:"text-center py-12 border-dashed",children:[(0,i.jsxs)(x.aR,{children:[(0,i.jsx)(b.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"notebook empty"}),(0,i.jsx)(x.ZB,{children:"No Menus Yet"})]}),(0,i.jsxs)(x.Wu,{children:[(0,i.jsx)("p",{className:"text-muted-foreground mb-4",children:"You haven't created any menus. Get started by adding your first one!"}),(0,i.jsxs)(o.$,{onClick:ef,children:[(0,i.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Create Your First Menu"]})]})]})]})}},17759:(e,t,s)=>{"use strict";s.d(t,{C5:()=>b,MJ:()=>f,Rr:()=>g,eI:()=>x,lR:()=>h,lV:()=>d,zB:()=>u});var i=s(95155),r=s(12115),n=s(99708),a=s(62177),l=s(59434),o=s(85057);let d=a.Op,c=r.createContext({}),u=e=>{let{...t}=e;return(0,i.jsx)(c.Provider,{value:{name:t.name},children:(0,i.jsx)(a.xI,{...t})})},m=()=>{let e=r.useContext(c),t=r.useContext(p),{getFieldState:s,formState:i}=(0,a.xW)(),n=s(e.name,i);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},p=r.createContext({}),x=r.forwardRef((e,t)=>{let{className:s,...n}=e,a=r.useId();return(0,i.jsx)(p.Provider,{value:{id:a},children:(0,i.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",s),...n})})});x.displayName="FormItem";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:n,formItemId:a}=m();return(0,i.jsx)(o.J,{ref:t,className:(0,l.cn)(n&&"text-destructive",s),htmlFor:a,...r})});h.displayName="FormLabel";let f=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:a,formDescriptionId:l,formMessageId:o}=m();return(0,i.jsx)(n.DX,{ref:t,id:a,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...s})});f.displayName="FormControl";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:n}=m();return(0,i.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});g.displayName="FormDescription";let b=r.forwardRef((e,t)=>{var s;let{className:r,children:n,...a}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(s=null==o?void 0:o.message)?s:""):n;return c?(0,i.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",r),...a,children:c}):null});b.displayName="FormMessage"},40452:(e,t,s)=>{Promise.resolve().then(s.bind(s,15263))},46102:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>l,ZI:()=>c,k$:()=>d,m_:()=>o});var i=s(95155),r=s(12115),n=s(89613),a=s(59434);let l=n.Kq,o=n.bL,d=n.l9,c=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,i.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,a.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});c.displayName=n.UC.displayName},47262:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var i=s(95155),r=s(12115),n=s(76981),a=s(10518),l=s(59434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,i.jsx)(n.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(a.A,{className:"h-4 w-4"})})})});o.displayName=n.bL.displayName},62523:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var i=s(95155),r=s(12115),n=s(59434);let a=r.forwardRef((e,t)=>{let{className:s,type:r,...a}=e;return(0,i.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});a.displayName="Input"},80333:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var i=s(95155),r=s(12115),n=s(4884),a=s(59434);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.bL,{className:(0,a.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,i.jsx)(n.zi,{className:(0,a.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.bL.displayName},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var i=s(95155),r=s(12115),n=s(40968),a=s(74466),l=s(59434);let o=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),s),...r})});d.displayName=n.b.displayName},87481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var i=s(12115);let r=0,n=new Map,a=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||i()}}}),{id:s,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=i.useState(d);return i.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var i=s(95155),r=s(12115),n=s(59434);let a=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});a.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7446,9352,4453,4602,6766,65,1342,5740,9613,9836,8913,4123,8441,1684,7358],()=>t(40452)),_N_E=e.O()}]);