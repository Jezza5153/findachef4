(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{26126:(e,s,t)=>{"use strict";t.d(s,{E:()=>d});var a=t(95155);t(12115);var r=t(74466),n=t(59434);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},46102:(e,s,t)=>{"use strict";t.d(s,{Bc:()=>d,ZI:()=>c,k$:()=>o,m_:()=>l});var a=t(95155),r=t(12115),n=t(89613),i=t(59434);let d=n.Kq,l=n.bL,o=n.l9,c=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...d}=e;return(0,a.jsx)(n.UC,{ref:s,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d})});c.displayName=n.UC.displayName},65573:(e,s,t)=>{Promise.resolve().then(t.bind(t,77220))},77220:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(95155),r=t(12115),n=t(66695),i=t(85127),d=t(26126),l=t(30285),o=t(55028),c=t(85057),m=t(88539),u=t(50172),x=t(70593),h=t(60960),p=t(6160),f=t(91467),j=t(49940),v=t(98214),g=t(68718),N=t(84111),b=t(75675),A=t(12174),w=t(46037),y=t(57804),C=t(13497),S=t(94063),k=t(31949),P=t(50737),D=t(17017),R=t(69615),E=t(30534),_=t(28044),q=t(88192),I=t(54683),M=t(79239),T=t(8376),F=t(24371),H=t(15121),$=t(17607),Z=t(73672),B=t(56104),z=t(35317),G=t(83013),O=t(87481),L=t(59576),U=t(46102),W=t(66766);let J=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.Dialog),{loadableGenerated:{webpack:()=>[54165]},ssr:!1});(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogContent),{loadableGenerated:{webpack:()=>[54165]},ssr:!1});let V=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogHeader),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),X=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogTitle),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),Y=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogFooter),{loadableGenerated:{webpack:()=>[54165]},ssr:!1}),Q=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogClose),{loadableGenerated:{webpack:()=>[54165]},ssr:!1});(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogDescription),{loadableGenerated:{webpack:()=>[54165]},ssr:!1});let K=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogContent),{loadableGenerated:{webpack:()=>[54165]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading details..."]})}),ee=(0,o.default)(()=>Promise.all([t.e(1345),t.e(6546)]).then(t.bind(t,54165)).then(e=>e.DialogContent),{loadableGenerated:{webpack:()=>[54165]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading menu..."]})});function es(){var e,s;let{toast:t}=(0,O.dj)(),{isAdmin:o}=(0,L.A)(),[es,et]=(0,r.useState)([]),[ea,er]=(0,r.useState)(!0),[en,ei]=(0,r.useState)([]),[ed,el]=(0,r.useState)(!0),[eo,ec]=(0,r.useState)([]),[em,eu]=(0,r.useState)(!0),[ex,eh]=(0,r.useState)(null),[ep,ef]=(0,r.useState)(!1),[ej,ev]=(0,r.useState)(null),[eg,eN]=(0,r.useState)([]),[eb,eA]=(0,r.useState)(!1),[ew,ey]=(0,r.useState)(""),eC=null,[eS,ek]=(0,r.useState)(!1),[eP,eD]=(0,r.useState)(null),[eR,eE]=(0,r.useState)("");(0,r.useEffect)(()=>{er(!0);let e=(0,z.rJ)(B.db,"users"),s=(0,z.P)(e,(0,z.My)("createdAt","desc")),a=(0,z.aQ)(s,e=>{et(e.docs.map(e=>{let s=e.data();return{id:e.id,...s,createdAt:s.createdAt instanceof z.Dc?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):void 0,accountStatus:s.accountStatus||"active"}})),er(!1)},e=>{console.error("Error fetching users:",e),t({title:"Error",description:"Could not fetch users.",variant:"destructive"}),er(!1)});el(!0);let r=(0,z.rJ)(B.db,"menus"),n=(0,z.P)(r,(0,z.My)("createdAt","desc")),i=(0,z.aQ)(n,e=>{ei(e.docs.map(e=>{let s=e.data();return{id:e.id,...s,adminStatus:s.adminStatus||"pending",createdAt:s.createdAt instanceof z.Dc?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):void 0,updatedAt:s.updatedAt instanceof z.Dc?s.updatedAt.toDate():s.updatedAt?new Date(s.updatedAt):void 0}})),el(!1)},e=>{console.error("Error fetching menus:",e),t({title:"Error",description:"Could not fetch menus.",variant:"destructive"}),el(!1)});eu(!0);let d=(0,z.rJ)(B.db,"customerRequests"),l=(0,z.P)(d,(0,z.My)("createdAt","desc")),o=(0,z.aQ)(l,e=>{ec(e.docs.map(e=>{let s=e.data();return{id:e.id,...s,eventDate:s.eventDate instanceof z.Dc?s.eventDate.toDate():new Date(s.eventDate),createdAt:s.createdAt instanceof z.Dc?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):void 0,moderationStatus:s.moderationStatus||"pending_review"}})),eu(!1)},e=>{console.error("Error fetching customer requests:",e),t({title:"Error",description:"Could not fetch customer requests.",variant:"destructive"}),eu(!1)});return()=>{a&&a(),i&&i(),o&&o(),eC&&(eC(),eC=null)}},[t]);let e_=async e=>{if(!o)return void t({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});eh(e);try{let s=(0,z.H9)(B.db,"users",e);await (0,z.mZ)(s,{isApproved:!0,accountStatus:"active",updatedAt:(0,z.O5)()}),t({title:"Chef Approved",description:"Chef has been approved."})}catch(e){console.error("Error approving user:",e),t({title:"Error",description:"Could not approve chef.",variant:"destructive"})}finally{eh(null)}},eq=async e=>{if(!o)return void t({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});eh(e);try{let s=(0,z.H9)(B.db,"users",e);await (0,z.mZ)(s,{isApproved:!1,accountStatus:"active",updatedAt:(0,z.O5)()}),t({title:"Chef Status Updated",description:"Chef status updated to not approved."})}catch(e){console.error("Error updating user approval status:",e),t({title:"Error",description:"Could not process action for chef.",variant:"destructive"})}finally{eh(null)}},eI=async e=>{if(!o)return void t({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});if(!eP||eP.id!==e)return void t({title:"Error",description:"Menu context lost. Please reopen review.",variant:"destructive"});eh(e);try{let s=(0,z.H9)(B.db,"menus",e);await (0,z.mZ)(s,{adminStatus:"approved",adminNotes:eR||"",updatedAt:(0,z.O5)()}),t({title:"Menu Approved",description:"Menu has been approved."}),ek(!1),eE("")}catch(e){console.error("Error approving menu:",e),t({title:"Error",description:"Could not approve menu.",variant:"destructive"})}finally{eh(null)}},eM=async e=>{if(!o)return void t({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});if(!eP||eP.id!==e)return void t({title:"Error",description:"Menu context lost. Please reopen review.",variant:"destructive"});eh(e);try{let s=(0,z.H9)(B.db,"menus",e);await (0,z.mZ)(s,{adminStatus:"rejected",adminNotes:eR||"Rejected by admin.",updatedAt:(0,z.O5)()}),t({title:"Menu Rejected",description:"Menu has been rejected."}),ek(!1),eE("")}catch(e){console.error("Error rejecting menu:",e),t({title:"Error",description:"Could not reject menu.",variant:"destructive"})}finally{eh(null)}},eT=e=>{ev(e),ey(e.adminNotes||""),eA(!0),eN([]),eC&&(eC(),eC=null);let s=(0,z.rJ)(B.db,"customerRequests",e.id,"messages"),a=(0,z.P)(s,(0,z.My)("timestamp","asc"));eC=(0,z.aQ)(a,e=>{eN(e.docs.map(e=>{let s=e.data();return{id:e.id,...s,timestamp:s.timestamp instanceof z.Dc?s.timestamp.toDate():new Date(s.timestamp)}})),eA(!1)},e=>{console.error("Error fetching messages for request:",e),t({title:"Error",description:"Could not fetch messages for this request.",variant:"destructive"}),eA(!1)}),ef(!0)},eF=async(e,s,a)=>{if(!o)return void t({title:"Permission Denied",variant:"destructive"});if(!ej||ej.id!==e)return void t({title:"Error",description:"Request context lost. Please reopen and try again.",variant:"destructive"});eh(e);try{let r=(0,z.H9)(B.db,"customerRequests",e);await (0,z.mZ)(r,{moderationStatus:s,adminNotes:ew,updatedAt:(0,z.O5)()});let n=null;if(a&&("customer_warned"===s||"customer_suspended"===s)){let e=(0,z.H9)(B.db,"users",a);n=(0,z.mZ)(e,{accountStatus:"customer_warned"===s?"warned":"suspended",updatedAt:(0,z.O5)()}),t({title:"Moderation Action Taken",description:"Request status updated to ".concat(null==s?void 0:s.replace(/_/g," ")," and customer account status updated.")})}else t({title:"Moderation Action Taken",description:"Request status updated to ".concat(null==s?void 0:s.replace(/_/g," "),".")});n&&await n,ef(!1),ey("")}catch(e){console.error("Error moderating request:",e),t({title:"Moderation Error",description:"Could not update request moderation status.",variant:"destructive"})}finally{eh(null)}},eH=e=>{eD(e),eE(e.adminNotes||""),ek(!0)},e$=e=>{switch(e){case"active":return"default";case"warned":return"secondary";case"suspended":return"destructive";default:return"outline"}},eZ=[{name:"Approve Co-hosted Events",description:"Confirm both chefs are approved and willing to collaborate on the event.",icon:(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5 text-purple-600"})},{name:"Approve Menus",description:"Verify menu content, accurate pricing, no personal branding/links, and ensure chef identity remains hidden pre-booking.",icon:(0,a.jsx)(h.A,{className:"mr-2 h-5 w-5 text-green-600"})},{name:"Approve post-event payouts (50% release)",description:"Confirm event is complete (customer QR scan) and customer hasnâ€™t raised a dispute within the allowed timeframe.",icon:(0,a.jsx)(p.A,{className:"mr-2 h-5 w-5 text-green-700"})},{name:"Assign 'Trusted by FindAChef' Badge",description:"Manually assign to chefs with a proven track record. Not automated.",icon:(0,a.jsx)(f.A,{className:"mr-2 h-5 w-5 text-amber-600"})},{name:"Check for fake tags or exaggerated bios",description:"Ensure chef tags match their real experience.",icon:(0,a.jsx)(j.A,{className:"mr-2 h-5 w-5 text-teal-600"})},{name:"Check receipt upload compliance",description:"Ensure receipts match event/menu tags. Important for chef's own records and dispute resolution.",icon:(0,a.jsx)(v.A,{className:"mr-2 h-5 w-5 text-indigo-700"})},{name:"Export Admin Audit Log",description:"Generate monthly PDF/CSV reports of all administrative actions for record-keeping.",icon:(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5 text-slate-500"})},{name:"Freeze payments if dispute is raised",description:"Pause automatic release of the remaining 50% fund portion and investigate customer complaint.",icon:(0,a.jsx)(N.A,{className:"mr-2 h-5 w-5 text-orange-700"})},{name:"Issue refunds for cancelled events",description:"Process refunds based on cancellation policies: Full refund if chef cancels (admin to manage chef accountability). For customer cancellations, apply tiered refunds (e.g., 50% refund, or 20% refund with 15% to chef & 15% to platform if <20 days prior).",icon:(0,a.jsx)(b.A,{className:"mr-2 h-5 w-5 text-blue-700"})},{name:"Manage Expired Requests Queue",description:"Handle stale or unresolved customer posts from The Wall. Delete after 14 days.",icon:(0,a.jsx)(A.A,{className:"mr-2 h-5 w-5 text-orange-600"})},{name:"Manage Violations (Warnings, Penalties, Bans)",description:"Issue warnings for first offenses (e.g., 15% fund deduction from held portion for off-platform communication attempts), enforce bans for second offenses.",icon:(0,a.jsx)(w.A,{className:"mr-2 h-5 w-5 text-red-700"})},{name:"Manually approve new chef accounts",description:"Check resume quality, no contact info, professionalism.",icon:(0,a.jsx)(y.A,{className:"mr-2 h-5 w-5 text-blue-600"})},{name:"Moderate Reports (Chef Misconduct, Customer Fraud)",description:"Review user-submitted abuse reports daily. Handle reports of chef misconduct or customer fraud. Investigate and take appropriate action, especially immediate action if safety or fraud is involved. Record all conversation logs during disputes.",icon:(0,a.jsx)(C.A,{className:"mr-2 h-5 w-5 text-destructive"})},{name:"Monitor active chat threads",description:"Look for off-platform contact attempts or spam.",icon:(0,a.jsx)(S.A,{className:"mr-2 h-5 w-5 text-sky-600"})},{name:"Monitor Event Conflict Alerts",description:"Review system-generated alerts for potential chef double-bookings or overbooking issues.",icon:(0,a.jsx)(k.A,{className:"mr-2 h-5 w-5 text-pink-600"})},{name:"Oversee Automated Chat Locking",description:"Review and manage locks on conversation threads after bookings.",icon:(0,a.jsx)(P.A,{className:"mr-2 h-5 w-5 text-slate-600"})},{name:"Review Flagged Messages (Contact Info, Unsafe Content)",description:"Review AI-flagged messages for off-platform contact attempts, unsafe content, or other policy violations.",icon:(0,a.jsx)(D.A,{className:"mr-2 h-5 w-5 text-destructive"})},{name:"Review GPT resume parse accuracy",description:"Fix any resume to tag mismatches.",icon:(0,a.jsx)(R.A,{className:"mr-2 h-5 w-5 text-indigo-600"})},{name:"Review Published Chef Events",description:"Ensure event details on The Chef's Wall are clear, fair, and not duplicated.",icon:(0,a.jsx)(E.A,{className:"mr-2 h-5 w-5 text-cyan-600"})},{name:"Trust Score Override",description:"Monitor and, if necessary, manually override auto-generated chef trust scores based on platform activity, ratings, and warnings.",icon:(0,a.jsx)(_.A,{className:"mr-2 h-5 w-5 text-yellow-600"})},{name:"View Flagged Resumes (Contact Info, Unsafe Content)",description:"Review resumes, especially those AI-flagged for containing direct contact information or inappropriate content.",icon:(0,a.jsx)(q.A,{className:"mr-2 h-5 w-5 text-destructive"})}],eB=e=>"chef"!==e.role?(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:"N/A"}):e.isSubscribed?(0,a.jsx)(d.E,{variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"Subscribed"}):(0,a.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Not Subscribed"});return(0,a.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary",children:(0,a.jsx)(I.A,{className:"h-8 w-8","data-ai-hint":"admin settings user"})}),(0,a.jsx)(n.ZB,{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,a.jsx)(n.BT,{className:"text-lg",children:"Platform moderation, user management, and quality control tools."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["This area is for platform administrators to manage users, content, and ensure the smooth operation of FindAChef.",!o&&(0,a.jsx)("span",{className:"text-destructive font-semibold",children:" (Note: Your current account does not have admin privileges. Actions will be disabled.)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Intended Features & Responsibilities:"}),(0,a.jsx)("ul",{className:"space-y-3",children:eZ.sort((e,s)=>e.name.localeCompare(s.name)).map(e=>(0,a.jsxs)("li",{className:"flex items-start text-foreground/90 p-3 bg-muted/30 rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.name))})]})]})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(M.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"group users"})," All Platform Users"]}),(0,a.jsx)(n.BT,{children:"View and manage all registered users on the platform."})]}),(0,a.jsx)(n.Wu,{children:ea?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading users..."})]}):0===es.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No users found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Name"}),(0,a.jsx)(i.nd,{children:"Email"}),(0,a.jsx)(i.nd,{children:"Role"}),(0,a.jsx)(i.nd,{children:"Account Status"}),(0,a.jsx)(i.nd,{children:"Joined"}),(0,a.jsx)(i.nd,{children:"Chef Approved"}),(0,a.jsx)(i.nd,{children:"Chef Subscribed"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:es.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.name||"N/A"}),(0,a.jsx)(i.nA,{children:e.email}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"chef"===e.role?"default":"admin"===e.role?"destructive":"secondary",className:"capitalize text-xs",children:e.role||"N/A"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:e$(e.accountStatus),className:"capitalize text-xs",children:e.accountStatus||"N/A"})}),(0,a.jsx)(i.nA,{className:"text-xs",children:e.createdAt?(0,G.GP)(new Date(e.createdAt),"PP"):"N/A"}),(0,a.jsx)(i.nA,{children:"chef"===e.role?e.isApproved?(0,a.jsx)(d.E,{variant:"default",className:"bg-green-500 hover:bg-green-600 text-xs",children:"Approved"}):(0,a.jsx)(d.E,{variant:"destructive",className:"text-xs",children:"Pending"}):(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:"N/A"})}),(0,a.jsx)(i.nA,{children:eB(e)}),(0,a.jsxs)(i.nA,{children:["chef"===e.role&&!e.isApproved&&(0,a.jsx)(U.Bc,{children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>e_(e.id),disabled:!o||ex===e.id,className:"bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-1",children:[ex===e.id?(0,a.jsx)(u.A,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(T.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"ml-1",children:"Approve"})]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eq(e.id),disabled:!o||ex===e.id,className:"bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1",children:[ex===e.id?(0,a.jsx)(u.A,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(F.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"ml-1",children:"Reject"})]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})}),"chef"===e.role&&e.isApproved&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No approval actions"}),"chef"!==e.role&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"N/A"})]})]},e.id))})]})})})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"restaurant menu"})," All Platform Menus"]}),(0,a.jsx)(n.BT,{children:"Review and manage all menus created by chefs."})]}),(0,a.jsx)(n.Wu,{children:ed?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading menus..."})]}):0===en.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No menus found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Menu Title"}),(0,a.jsx)(i.nd,{children:"Chef Name"}),(0,a.jsx)(i.nd,{children:"Cuisine"}),(0,a.jsx)(i.nd,{className:"text-right",children:"Price/Head"}),(0,a.jsx)(i.nd,{children:"Public"}),(0,a.jsx)(i.nd,{children:"Admin Status"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:en.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.title}),(0,a.jsx)(i.nA,{children:e.chefName||"N/A"}),(0,a.jsx)(i.nA,{children:e.cuisine}),(0,a.jsxs)(i.nA,{className:"text-right",children:["$",e.pricePerHead.toFixed(2)]}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:e.isPublic?"default":"secondary",className:"text-xs",children:e.isPublic?"Yes":"No"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"approved"===e.adminStatus?"default":"rejected"===e.adminStatus?"destructive":"secondary",className:"text-xs capitalize ".concat("approved"===e.adminStatus?"bg-green-500 hover:bg-green-600":""),children:e.adminStatus||"Pending"})}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eH(e),className:"text-xs",disabled:!o||ex===e.id,children:[ex===e.id&&(null==eP?void 0:eP.id)===e.id?(0,a.jsx)(u.A,{className:"h-3 w-3 animate-spin mr-1"}):(0,a.jsx)($.A,{className:"h-3 w-3 mr-1"})," Review"]})})]},e.id))})]})})})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(Z.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"message send"})," All Customer Requests"]}),(0,a.jsx)(n.BT,{children:"Review all event requests made by customers."})]}),(0,a.jsx)(n.Wu,{children:em?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading customer requests..."})]}):0===eo.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No customer requests found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Request ID"}),(0,a.jsx)(i.nd,{children:"Event Type"}),(0,a.jsx)(i.nd,{children:"Customer ID"}),(0,a.jsx)(i.nd,{children:"Event Date"}),(0,a.jsx)(i.nd,{className:"text-right",children:"PAX"}),(0,a.jsx)(i.nd,{className:"text-right",children:"Budget"}),(0,a.jsx)(i.nd,{children:"Status"}),(0,a.jsx)(i.nd,{children:"Mod. Status"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:eo.map(e=>{var s,t;return(0,a.jsxs)(i.Hj,{children:[(0,a.jsxs)(i.nA,{className:"font-mono text-xs",children:[e.id.substring(0,8),"..."]}),(0,a.jsx)(i.nA,{className:"font-medium",children:e.eventType}),(0,a.jsxs)(i.nA,{className:"text-xs",children:[e.customerId.substring(0,8),"..."]}),(0,a.jsx)(i.nA,{className:"text-xs",children:e.eventDate?(0,G.GP)(new Date(e.eventDate),"PP"):"N/A"}),(0,a.jsx)(i.nA,{className:"text-right",children:e.pax}),(0,a.jsxs)(i.nA,{className:"text-right",children:["$",e.budget.toFixed(2)]}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"booked"===e.status||"customer_confirmed"===e.status?"default":"cancelled_by_customer"===e.status||"chef_declined"===e.status||"proposal_declined"===e.status||"payment_failed"===e.status?"destructive":"secondary",className:"capitalize text-xs",children:(null==(s=e.status)?void 0:s.replace(/_/g," "))||"Unknown"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"resolved"===e.moderationStatus?"default":"customer_suspended"===e.moderationStatus?"destructive":"secondary",className:"capitalize text-xs",children:(null==(t=e.moderationStatus)?void 0:t.replace(/_/g," "))||"Pending"})}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eT(e),className:"text-xs",disabled:!o||ex===e.id,children:[ex===e.id&&(null==ej?void 0:ej.id)===e.id?(0,a.jsx)(u.A,{className:"h-3 w-3 animate-spin mr-1"}):(0,a.jsx)($.A,{className:"h-3 w-3 mr-1"})," View/Moderate"]})})]},e.id)})})]})})})]}),ej&&ep&&(0,a.jsx)(J,{open:ep,onOpenChange:e=>{!e&&eC&&(eC(),eC=null),ef(e),e||ev(null)},children:(0,a.jsxs)(K,{className:"sm:max-w-2xl",children:[(0,a.jsx)(V,{children:(0,a.jsxs)(X,{children:["View Customer Request Details - ID: ",ej.id.substring(0,8),"..."]})}),(0,a.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 p-1",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Request Information:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Event Type:"})," ",ej.eventType]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Customer ID:"})," ",(0,a.jsx)("span",{className:"font-mono text-xs",children:ej.customerId})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Event Date:"})," ",ej.eventDate?(0,G.GP)(new Date(ej.eventDate),"PPP"):"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",ej.pax]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Budget:"})," $",ej.budget.toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Cuisine:"})," ",ej.cuisinePreference]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",(0,a.jsx)(d.E,{variant:"booked"===ej.status?"default":"secondary",className:"capitalize text-xs",children:(null==(e=ej.status)?void 0:e.replace(/_/g," "))||"Unknown"})]}),ej.location&&(0,a.jsxs)("p",{className:"col-span-2",children:[(0,a.jsx)("strong",{children:"Location:"})," ",ej.location]}),ej.notes&&(0,a.jsxs)("p",{className:"col-span-2",children:[(0,a.jsx)("strong",{children:"Notes:"})," ",ej.notes]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Moderation Status:"})," ",(0,a.jsx)(d.E,{variant:"resolved"===ej.moderationStatus?"default":"customer_suspended"===ej.moderationStatus?"destructive":"secondary",className:"capitalize text-xs",children:(null==(s=ej.moderationStatus)?void 0:s.replace(/_/g," "))||"Pending Review"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(c.J,{htmlFor:"adminNotesRequest",children:"Admin Notes:"}),(0,a.jsx)(m.T,{id:"adminNotesRequest",value:ew,onChange:e=>ey(e.target.value),placeholder:"Internal notes for this request...",className:"mt-1",disabled:!o||!!ex})]}),(0,a.jsxs)("h4",{className:"font-semibold mt-4 pt-2 border-t",children:["Messages (",eg.length,"):"]}),eb?(0,a.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 animate-spin"})," Loading messages..."]}):eg.length>0?(0,a.jsx)("div",{className:"space-y-2 text-xs max-h-48 overflow-y-auto border p-2 rounded-md bg-muted/30",children:eg.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"p-1.5 rounded-md bg-background shadow-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.senderName||e.senderRole," (",(null==(s=e.senderRole)?void 0:s.startsWith("customer"))?"Cust.":(null==(t=e.senderRole)?void 0:t.startsWith("chef"))?"Chef":"Sys.","):"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:e.text}),(0,a.jsx)("p",{className:"text-right text-muted-foreground/70 text-[10px]",children:e.timestamp?(0,G.GP)(new Date(e.timestamp),"PP p"):"N/A"})]},e.id)})}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No messages for this request."})]}),(0,a.jsxs)(Y,{className:"mt-4",children:[(0,a.jsx)(Q,{asChild:!0,children:(0,a.jsx)(l.$,{type:"button",variant:"outline",disabled:!!ex,children:"Close"})}),(0,a.jsxs)(U.Bc,{children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eF(ej.id,"resolved"),variant:"default",disabled:!o||!!ex||"resolved"===ej.moderationStatus,children:[ex===ej.id&&"resolved"===ej.moderationStatus?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Mark as Resolved"]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eF(ej.id,"customer_warned",ej.customerId),variant:"outline",disabled:!o||!!ex||"customer_warned"===ej.moderationStatus,children:[ex===ej.id&&"customer_warned"===ej.moderationStatus?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Warn Customer"]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eF(ej.id,"customer_suspended",ej.customerId),variant:"destructive",disabled:!o||!!ex||"customer_suspended"===ej.moderationStatus,children:[ex===ej.id&&"customer_suspended"===ej.moderationStatus?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Suspend Customer"]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})]})]})}),eP&&eS&&(0,a.jsx)(J,{open:eS,onOpenChange:ek,children:(0,a.jsxs)(ee,{className:"sm:max-w-lg",children:[(0,a.jsxs)(V,{children:[(0,a.jsxs)(X,{children:["Review Menu: ",eP.title]}),eP.imageUrl&&(0,a.jsx)("div",{className:"my-2 rounded-md overflow-hidden aspect-video relative",children:(0,a.jsx)(W.default,{src:eP.imageUrl,alt:eP.title,layout:"fill",objectFit:"cover","data-ai-hint":eP.dataAiHint||"menu food item"})})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1 max-h-[50vh] overflow-y-auto p-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Chef:"})," ",eP.chefName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Cuisine:"})," ",eP.cuisine]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Price/Head:"})," $",eP.pricePerHead.toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",eP.pax||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",eP.description]}),eP.dietaryInfo&&eP.dietaryInfo.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Dietary:"})," ",eP.dietaryInfo.join(", ")]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Public:"})," ",eP.isPublic?"Yes":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Admin Status:"})," ",(0,a.jsx)(d.E,{variant:"approved"===eP.adminStatus?"default":"rejected"===eP.adminStatus?"destructive":"secondary",className:"capitalize text-xs ".concat("approved"===eP.adminStatus?"bg-green-500 hover:bg-green-600":""),children:eP.adminStatus})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(c.J,{htmlFor:"adminNotesMenu",children:"Admin Notes:"}),(0,a.jsx)(m.T,{id:"adminNotesMenu",value:eR,onChange:e=>eE(e.target.value),placeholder:"Internal notes for this menu...",className:"mt-1",disabled:!o||!!ex})]})]}),(0,a.jsxs)(Y,{className:"mt-4",children:[(0,a.jsx)(Q,{asChild:!0,children:(0,a.jsx)(l.$,{type:"button",variant:"outline",disabled:!!ex,children:"Close"})}),(0,a.jsxs)(U.Bc,{children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eI(eP.id),variant:"default",disabled:!o||!!ex||"approved"===eP.adminStatus,children:[ex===eP.id&&"approved"===eP.adminStatus?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Approve"]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eM(eP.id),variant:"destructive",disabled:!o||!!ex||"rejected"===eP.adminStatus,children:[ex===eP.id&&"rejected"===eP.adminStatus?(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Reject"]})}),!o&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-8 p-4 border-l-4 border-yellow-500 bg-yellow-500/10 rounded-md",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-700",children:"Development Note:"}),(0,a.jsx)("p",{className:"text-sm text-yellow-600",children:"Admin actions now update Firestore. Full admin functionality, including secure role-based access control (preventing non-admins from performing actions even if buttons were enabled via client-side manipulation), and detailed audit logs, requires robust backend logic and Firebase Security Rules that verify admin custom claims for write operations."})]})]})}},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(95155),r=t(12115),n=t(40968),i=t(74466),d=t(59434);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.b,{ref:s,className:(0,d.cn)(l(),t),...r})});o.displayName=n.b.displayName},85127:(e,s,t)=>{"use strict";t.d(s,{A0:()=>d,BF:()=>l,Hj:()=>o,XI:()=>i,nA:()=>m,nd:()=>c});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})});i.displayName="Table";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",t),...r})});d.displayName="TableHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...r})});l.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});o.displayName="TableRow";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});c.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption"},88539:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(95155),r=t(12115),n=t(59434);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});i.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7446,9352,4453,4602,6766,106,5740,3013,9613,3912,8226,8441,1684,7358],()=>s(65573)),_N_E=e.O()}]);