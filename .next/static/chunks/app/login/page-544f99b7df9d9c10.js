(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520,8447],{17759:(e,r,t)=>{"use strict";t.d(r,{C5:()=>y,MJ:()=>g,Rr:()=>x,eI:()=>p,lR:()=>h,lV:()=>d,zB:()=>u});var s=t(95155),a=t(12115),i=t(99708),o=t(62177),n=t(59434),l=t(85057);let d=o.Op,c=a.createContext({}),u=e=>{let{...r}=e;return(0,s.jsx)(c.Provider,{value:{name:r.name},children:(0,s.jsx)(o.xI,{...r})})},m=()=>{let e=a.useContext(c),r=a.useContext(f),{getFieldState:t,formState:s}=(0,o.xW)(),i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...i}},f=a.createContext({}),p=a.forwardRef((e,r)=>{let{className:t,...i}=e,o=a.useId();return(0,s.jsx)(f.Provider,{value:{id:o},children:(0,s.jsx)("div",{ref:r,className:(0,n.cn)("space-y-2",t),...i})})});p.displayName="FormItem";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:i,formItemId:o}=m();return(0,s.jsx)(l.J,{ref:r,className:(0,n.cn)(i&&"text-destructive",t),htmlFor:o,...a})});h.displayName="FormLabel";let g=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:o,formDescriptionId:n,formMessageId:l}=m();return(0,s.jsx)(i.DX,{ref:r,id:o,"aria-describedby":a?"".concat(n," ").concat(l):"".concat(n),"aria-invalid":!!a,...t})});g.displayName="FormControl";let x=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:i}=m();return(0,s.jsx)("p",{ref:r,id:i,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});x.displayName="FormDescription";let y=a.forwardRef((e,r)=>{var t;let{className:a,children:i,...o}=e,{error:l,formMessageId:d}=m(),c=l?String(null!=(t=null==l?void 0:l.message)?t:""):i;return c?(0,s.jsx)("p",{ref:r,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",a),...o,children:c}):null});y.displayName="FormMessage"},30285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,r:()=>l});var s=t(95155),a=t(12115),i=t(99708),o=t(74466),n=t(59434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(l({variant:a,size:o,className:t})),ref:r,...c})});d.displayName="Button"},35695:(e,r,t)=>{"use strict";var s=t(18999);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},37942:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var s=t(95155),a=t(12115),i=t(90221),o=t(62177),n=t(55594),l=t(30285),d=t(17759),c=t(62523),u=t(66695);let m=(0,t(19946).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var f=t(51154),p=t(6874),h=t.n(p),g=t(35695),x=t(87481),y=t(93004),v=t(56104),b=t(35317);let j=n.Ik({email:n.Yj().email({message:"Invalid email address."}),password:n.Yj().min(1,{message:"Password is required."})});function N(){let e=(0,g.useRouter)(),r=(0,g.useSearchParams)(),{toast:t}=(0,x.dj)(),[p,N]=(0,a.useState)(!1),w=(0,o.mN)({resolver:(0,i.u)(j),defaultValues:{email:"",password:""}});(0,a.useEffect)(()=>{let e=r.get("email");e&&w.setValue("email",e)},[r,w]);let I=async s=>{N(!0),console.log("LoginPage: Attempting login for email:",s.email);try{let a=(await (0,y.x9)(v.j2,s.email,s.password)).user;console.log("LoginPage: Firebase Auth successful for UID:",a.uid,"Email:",a.email),t({title:"Login Successful",description:"Welcome back! Redirecting..."});let i="customer";if(a){let e=(0,b.H9)(v.db,"users",a.uid),r=await (0,b.x7)(e);if(r.exists()){let e=r.data();console.log("LoginPage: Firestore profile found for UID",a.uid,":",e),i=e.role||"customer"}else{console.warn("LoginPage: No profile document found in Firestore for UID:",a.uid,". Creating a basic customer profile as fallback.");let r={id:a.uid,email:a.email,name:a.displayName||s.email.split("@")[0]||"New User",role:"customer",accountStatus:"active",createdAt:(0,b.O5)(),updatedAt:(0,b.O5)(),profilePictureUrl:a.photoURL||""};try{await (0,b.BN)(e,r,{merge:!0}),console.log("LoginPage: Created/Merged basic customer profile in Firestore for UID:",a.uid),i="customer"}catch(e){console.error("LoginPage: Failed to create/merge basic customer profile:",e)}}}console.log("LoginPage: Determined role for initial redirect:",i,"for UID:",null==a?void 0:a.uid);let o=r.get("redirect");o?e.push(o):"admin"===i?e.push("/admin"):"chef"===i?e.push("/chef/dashboard"):e.push("/customer/dashboard")}catch(r){console.error("LoginPage: Login error:",r);let e="Failed to login. Please check your credentials.";"auth/user-not-found"===r.code||"auth/wrong-password"===r.code||"auth/invalid-credential"===r.code?e="Invalid email or password.":"auth/too-many-requests"===r.code?e="Too many login attempts. Please try again later.":"auth/invalid-api-key"===r.code?e="Configuration error with authentication service. Please contact support.":r.code&&(e="Login error: ".concat(r.message," (Code: ").concat(r.code,")")),t({title:"Login Failed",description:e,variant:"destructive"})}finally{N(!1)}},P=async()=>{let e=w.getValues("email");if(!e){t({title:"Email Required",description:"Please enter your email address to reset your password.",variant:"destructive"}),w.setError("email",{type:"manual",message:"Email is required for password reset."});return}if(!n.Yj().email().safeParse(e).success){t({title:"Invalid Email",description:"Please enter a valid email address.",variant:"destructive"}),w.setError("email",{type:"manual",message:"Please enter a valid email address."});return}N(!0);try{await (0,y.J1)(v.j2,e),t({title:"Password Reset Email Sent",description:"If an account exists for this email, a password reset link has been sent. Please check your inbox."})}catch(e){console.error("LoginPage: Password reset error:",e),t({title:"Password Reset Failed",description:e.message&&"auth/user-not-found"!==e.code?e.message:"Could not send password reset email. Please ensure the email is correct or try again.",variant:"destructive"})}finally{N(!1)}};return(0,s.jsx)("div",{className:"container mx-auto flex min-h-[calc(100vh-8rem)] items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)(u.Zp,{className:"w-full max-w-md shadow-xl",children:[(0,s.jsxs)(u.aR,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary",children:(0,s.jsx)(m,{className:"h-8 w-8","data-ai-hint":"login key"})}),(0,s.jsx)(u.ZB,{className:"text-3xl font-bold",children:"Login to FindAChef"}),(0,s.jsx)(u.BT,{className:"text-lg",children:"Access your dashboard and manage your culinary experiences."})]}),(0,s.jsxs)(u.Wu,{className:"space-y-6",children:[(0,s.jsx)(d.lV,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(I),className:"space-y-6",children:[(0,s.jsx)(d.zB,{control:w.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Email Address"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"email",placeholder:"you@example.com",...r})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:w.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Password"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"password",placeholder:"••••••••",...r})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(l.$,{type:"submit",className:"w-full text-lg py-3",size:"lg",disabled:p||w.formState.isSubmitting,children:p?(0,s.jsx)(f.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"mr-2 h-5 w-5"})," Login"]})})]})}),(0,s.jsxs)("div",{className:"mt-6 space-y-3 text-center text-sm",children:[(0,s.jsx)("p",{children:(0,s.jsx)(l.$,{variant:"link",onClick:P,className:"p-0 h-auto font-medium text-primary hover:underline",disabled:p,children:"Forgot Password?"})}),(0,s.jsxs)("p",{children:["New to FindAChef?"," ",(0,s.jsx)(h(),{href:"/chef/signup",className:"font-medium text-primary hover:underline",children:"Sign up as a Chef"})]}),(0,s.jsxs)("p",{children:["New to FindAChef?"," ",(0,s.jsx)(h(),{href:"/customer/signup",className:"font-medium text-primary hover:underline",children:"Sign up as a Customer"})]})]})]})]})})}function w(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,s.jsx)(f.A,{className:"h-12 w-12 animate-spin text-primary"})," Loading Login..."]}),children:(0,s.jsx)(N,{})})}},56104:(e,r,t)=>{"use strict";let s,a,i,o;t.d(r,{IG:()=>i,db:()=>o,j2:()=>a});var n=t(23915),l=t(93004),d=t(90858),c=t(35317);let u={apiKey:'"AIzaSyDNMNa2a-BFUlmQ6PAA2hAIA3j07dYQUWQ",',authDomain:'"findachef2.firebaseapp.com",',projectId:'"findachef2",',storageBucket:'"findachef2.firebasestorage.app",',messagingSenderId:'"738524307993",',appId:'"1:738524307993:web:780dbfa516d646154cc088",',measurementId:'ntId: "G-PFXWD80NBY"'};if(u.apiKey&&u.projectId||(console.error("CRITICAL FIREBASE CONFIG ERROR: NEXT_PUBLIC_FIREBASE_API_KEY or NEXT_PUBLIC_FIREBASE_PROJECT_ID is missing or undefined."),console.error("This will cause Firebase services (Auth, Firestore, Storage) to fail."),console.error("Ensure these are correctly set in your .env.local file (for local development) AND in your Vercel project environment variables (for deployment).")),console.log("Firebase Initializing with Project ID:",u.projectId||"MISSING/UNDEFINED"),console.log("Firebase Using API Key (first 5 chars):",u.apiKey?u.apiKey.substring(0,5)+"...":"API Key Not Found/Defined"),(0,n.Dk)().length)s=(0,n.Dk)()[0];else try{s=(0,n.Wp)(u)}catch(e){console.error("Firebase initializeApp error:",e)}s&&u.apiKey&&u.projectId?(a=(0,l.xI)(s),i=(0,d.c7)(s),o=(0,c.aU)(s)):(console.error("Firebase app was not properly initialized due to missing configuration. Other Firebase services (Auth, Storage, Firestore) will NOT be available."),a=null,i=null,o=null)},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(52596),a=t(39688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},62523:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(95155),a=t(12115),i=t(59434);let o=a.forwardRef((e,r)=>{let{className:t,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...o})});o.displayName="Input"},66695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>n,wL:()=>u});var s=t(95155),a=t(12115),i=t(59434);let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});o.displayName="Card";let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},80935:(e,r,t)=>{Promise.resolve().then(t.bind(t,37942))},85057:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(95155),a=t(12115),i=t(40968),o=t(74466),n=t(59434);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.b,{ref:r,className:(0,n.cn)(l(),t),...a})});d.displayName=i.b.displayName},87481:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var s=t(12115);let a=0,i=new Map,o=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},n=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],d={toasts:[]};function c(e){d=n(d,e),l.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(d);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,7446,9352,5100,4602,6874,7322,8441,1684,7358],()=>r(80935)),_N_E=e.O()}]);