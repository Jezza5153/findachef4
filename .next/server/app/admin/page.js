(()=>{var e={};e.id=3698,e.ids=[3698],e.modules={1132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3662:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6211:(e,t,s)=>{"use strict";s.d(t,{A0:()=>d,BF:()=>l,Hj:()=>o,XI:()=>i,nA:()=>u,nd:()=>c});var a=s(60687),r=s(43210),n=s(4780);let i=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},8872:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},14975:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},18329:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19587:(e,t)=>{"use strict";function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return s}})},19771:e=>{"use strict";e.exports=require("process")},20620:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},21820:e=>{"use strict";e.exports=require("os")},22820:(e,t,s)=>{Promise.resolve().then(s.bind(s,61193))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28399:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29596:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},30036:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(49587),r=s.n(a)},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(60687),r=s(43210),n=s(4780);let i=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));i.displayName="Textarea"},37366:e=>{"use strict";e.exports=require("dns")},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>d,wL:()=>u});var a=s(60687),r=s(43210),n=s(4780);let i=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},45963:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]])},49587:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(14985)._(s(64963));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},50499:(e,t,s)=>{Promise.resolve().then(s.bind(s,1132))},55511:e=>{"use strict";e.exports=require("crypto")},56500:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>es});var a=s(60687),r=s(43210),n=s(44493),i=s(6211),d=s(96834),l=s(29523),o=s(30036),c=s(80013),u=s(34729),m=s(11516),p=s(82614);let h=(0,p.A)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var x=s(8872),f=s(29596);let j=(0,p.A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),v=(0,p.A)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),y=(0,p.A)("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);var g=s(20620);let b=(0,p.A)("ShieldBan",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]),N=(0,p.A)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),A=(0,p.A)("CalendarX2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m17 22 5-5",key:"1k6ppv"}],["path",{d:"m17 17 5 5",key:"p7ous7"}]]),w=(0,p.A)("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]),k=(0,p.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),C=(0,p.A)("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var M=s(18329),P=s(14975);let R=(0,p.A)("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),S=(0,p.A)("MessageCircleWarning",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),q=(0,p.A)("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);var _=s(58728),E=s(69678);let z=(0,p.A)("FileSearch2",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]),I=(0,p.A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var D=s(28399),T=s(3662),H=s(97025),F=s(45963),Z=s(76311),B=s(85866),O=s(33784),$=s(75535),G=s(73437),L=s(29867),V=s(18780),U=s(76242),W=s(30474);let X=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1});(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1});let Y=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1}),J=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1}),K=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1}),Q=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1});(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1});let ee=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading details..."]})}),et=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app/admin/page.tsx -> @/components/ui/dialog"]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading menu..."]})});function es(){let{toast:e}=(0,L.dj)(),{isAdmin:t}=(0,V.A)(),[s,o]=(0,r.useState)([]),[p,es]=(0,r.useState)(!0),[ea,er]=(0,r.useState)([]),[en,ei]=(0,r.useState)(!0),[ed,el]=(0,r.useState)([]),[eo,ec]=(0,r.useState)(!0),[eu,em]=(0,r.useState)(null),[ep,eh]=(0,r.useState)(!1),[ex,ef]=(0,r.useState)(null),[ej,ev]=(0,r.useState)([]),[ey,eg]=(0,r.useState)(!1),[eb,eN]=(0,r.useState)(""),eA=null,[ew,ek]=(0,r.useState)(!1),[eC,eM]=(0,r.useState)(null),[eP,eR]=(0,r.useState)(""),eS=async s=>{if(!t){e({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});return}em(s);try{let t=(0,$.H9)(O.db,"users",s);await (0,$.mZ)(t,{isApproved:!0,accountStatus:"active",updatedAt:(0,$.O5)()}),e({title:"Chef Approved",description:"Chef has been approved."})}catch(t){console.error("Error approving user:",t),e({title:"Error",description:"Could not approve chef.",variant:"destructive"})}finally{em(null)}},eq=async s=>{if(!t){e({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});return}em(s);try{let t=(0,$.H9)(O.db,"users",s);await (0,$.mZ)(t,{isApproved:!1,accountStatus:"active",updatedAt:(0,$.O5)()}),e({title:"Chef Status Updated",description:"Chef status updated to not approved."})}catch(t){console.error("Error updating user approval status:",t),e({title:"Error",description:"Could not process action for chef.",variant:"destructive"})}finally{em(null)}},e_=async s=>{if(!t){e({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});return}if(!eC||eC.id!==s){e({title:"Error",description:"Menu context lost. Please reopen review.",variant:"destructive"});return}em(s);try{let t=(0,$.H9)(O.db,"menus",s);await (0,$.mZ)(t,{adminStatus:"approved",adminNotes:eP||"",updatedAt:(0,$.O5)()}),e({title:"Menu Approved",description:"Menu has been approved."}),ek(!1),eR("")}catch(t){console.error("Error approving menu:",t),e({title:"Error",description:"Could not approve menu.",variant:"destructive"})}finally{em(null)}},eE=async s=>{if(!t){e({title:"Permission Denied",description:"You do not have permission to perform this action.",variant:"destructive"});return}if(!eC||eC.id!==s){e({title:"Error",description:"Menu context lost. Please reopen review.",variant:"destructive"});return}em(s);try{let t=(0,$.H9)(O.db,"menus",s);await (0,$.mZ)(t,{adminStatus:"rejected",adminNotes:eP||"Rejected by admin.",updatedAt:(0,$.O5)()}),e({title:"Menu Rejected",description:"Menu has been rejected."}),ek(!1),eR("")}catch(t){console.error("Error rejecting menu:",t),e({title:"Error",description:"Could not reject menu.",variant:"destructive"})}finally{em(null)}},ez=t=>{ef(t),eN(t.adminNotes||""),eg(!0),ev([]),eA&&(eA(),eA=null);let s=(0,$.rJ)(O.db,"customerRequests",t.id,"messages"),a=(0,$.P)(s,(0,$.My)("timestamp","asc"));eA=(0,$.aQ)(a,e=>{ev(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,timestamp:t.timestamp instanceof $.Dc?t.timestamp.toDate():new Date(t.timestamp)}})),eg(!1)},t=>{console.error("Error fetching messages for request:",t),e({title:"Error",description:"Could not fetch messages for this request.",variant:"destructive"}),eg(!1)}),eh(!0)},eI=async(s,a,r)=>{if(!t){e({title:"Permission Denied",variant:"destructive"});return}if(!ex||ex.id!==s){e({title:"Error",description:"Request context lost. Please reopen and try again.",variant:"destructive"});return}em(s);try{let t=(0,$.H9)(O.db,"customerRequests",s);await (0,$.mZ)(t,{moderationStatus:a,adminNotes:eb,updatedAt:(0,$.O5)()});let n=null;if(r&&("customer_warned"===a||"customer_suspended"===a)){let t=(0,$.H9)(O.db,"users",r);n=(0,$.mZ)(t,{accountStatus:"customer_warned"===a?"warned":"suspended",updatedAt:(0,$.O5)()}),e({title:"Moderation Action Taken",description:`Request status updated to ${a?.replace(/_/g," ")} and customer account status updated.`})}else e({title:"Moderation Action Taken",description:`Request status updated to ${a?.replace(/_/g," ")}.`});n&&await n,eh(!1),eN("")}catch(t){console.error("Error moderating request:",t),e({title:"Moderation Error",description:"Could not update request moderation status.",variant:"destructive"})}finally{em(null)}},eD=e=>{eM(e),eR(e.adminNotes||""),ek(!0)},eT=e=>{switch(e){case"active":return"default";case"warned":return"secondary";case"suspended":return"destructive";default:return"outline"}},eH=[{name:"Approve Co-hosted Events",description:"Confirm both chefs are approved and willing to collaborate on the event.",icon:(0,a.jsx)(h,{className:"mr-2 h-5 w-5 text-purple-600"})},{name:"Approve Menus",description:"Verify menu content, accurate pricing, no personal branding/links, and ensure chef identity remains hidden pre-booking.",icon:(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5 text-green-600"})},{name:"Approve post-event payouts (50% release)",description:"Confirm event is complete (customer QR scan) and customer hasn’t raised a dispute within the allowed timeframe.",icon:(0,a.jsx)(f.A,{className:"mr-2 h-5 w-5 text-green-700"})},{name:"Assign 'Trusted by FindAChef' Badge",description:"Manually assign to chefs with a proven track record. Not automated.",icon:(0,a.jsx)(j,{className:"mr-2 h-5 w-5 text-amber-600"})},{name:"Check for fake tags or exaggerated bios",description:"Ensure chef tags match their real experience.",icon:(0,a.jsx)(v,{className:"mr-2 h-5 w-5 text-teal-600"})},{name:"Check receipt upload compliance",description:"Ensure receipts match event/menu tags. Important for chef's own records and dispute resolution.",icon:(0,a.jsx)(y,{className:"mr-2 h-5 w-5 text-indigo-700"})},{name:"Export Admin Audit Log",description:"Generate monthly PDF/CSV reports of all administrative actions for record-keeping.",icon:(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5 text-slate-500"})},{name:"Freeze payments if dispute is raised",description:"Pause automatic release of the remaining 50% fund portion and investigate customer complaint.",icon:(0,a.jsx)(b,{className:"mr-2 h-5 w-5 text-orange-700"})},{name:"Issue refunds for cancelled events",description:"Process refunds based on cancellation policies: Full refund if chef cancels (admin to manage chef accountability). For customer cancellations, apply tiered refunds (e.g., 50% refund, or 20% refund with 15% to chef & 15% to platform if <20 days prior).",icon:(0,a.jsx)(N,{className:"mr-2 h-5 w-5 text-blue-700"})},{name:"Manage Expired Requests Queue",description:"Handle stale or unresolved customer posts from The Wall. Delete after 14 days.",icon:(0,a.jsx)(A,{className:"mr-2 h-5 w-5 text-orange-600"})},{name:"Manage Violations (Warnings, Penalties, Bans)",description:"Issue warnings for first offenses (e.g., 15% fund deduction from held portion for off-platform communication attempts), enforce bans for second offenses.",icon:(0,a.jsx)(w,{className:"mr-2 h-5 w-5 text-red-700"})},{name:"Manually approve new chef accounts",description:"Check resume quality, no contact info, professionalism.",icon:(0,a.jsx)(k,{className:"mr-2 h-5 w-5 text-blue-600"})},{name:"Moderate Reports (Chef Misconduct, Customer Fraud)",description:"Review user-submitted abuse reports daily. Handle reports of chef misconduct or customer fraud. Investigate and take appropriate action, especially immediate action if safety or fraud is involved. Record all conversation logs during disputes.",icon:(0,a.jsx)(C,{className:"mr-2 h-5 w-5 text-destructive"})},{name:"Monitor active chat threads",description:"Look for off-platform contact attempts or spam.",icon:(0,a.jsx)(M.A,{className:"mr-2 h-5 w-5 text-sky-600"})},{name:"Monitor Event Conflict Alerts",description:"Review system-generated alerts for potential chef double-bookings or overbooking issues.",icon:(0,a.jsx)(P.A,{className:"mr-2 h-5 w-5 text-pink-600"})},{name:"Oversee Automated Chat Locking",description:"Review and manage locks on conversation threads after bookings.",icon:(0,a.jsx)(R,{className:"mr-2 h-5 w-5 text-slate-600"})},{name:"Review Flagged Messages (Contact Info, Unsafe Content)",description:"Review AI-flagged messages for off-platform contact attempts, unsafe content, or other policy violations.",icon:(0,a.jsx)(S,{className:"mr-2 h-5 w-5 text-destructive"})},{name:"Review GPT resume parse accuracy",description:"Fix any resume to tag mismatches.",icon:(0,a.jsx)(q,{className:"mr-2 h-5 w-5 text-indigo-600"})},{name:"Review Published Chef Events",description:"Ensure event details on The Chef's Wall are clear, fair, and not duplicated.",icon:(0,a.jsx)(_.A,{className:"mr-2 h-5 w-5 text-cyan-600"})},{name:"Trust Score Override",description:"Monitor and, if necessary, manually override auto-generated chef trust scores based on platform activity, ratings, and warnings.",icon:(0,a.jsx)(E.A,{className:"mr-2 h-5 w-5 text-yellow-600"})},{name:"View Flagged Resumes (Contact Info, Unsafe Content)",description:"Review resumes, especially those AI-flagged for containing direct contact information or inappropriate content.",icon:(0,a.jsx)(z,{className:"mr-2 h-5 w-5 text-destructive"})}],eF=e=>"chef"!==e.role?(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:"N/A"}):e.isSubscribed?(0,a.jsx)(d.E,{variant:"default",className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"Subscribed"}):(0,a.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Not Subscribed"});return(0,a.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary",children:(0,a.jsx)(I,{className:"h-8 w-8","data-ai-hint":"admin settings user"})}),(0,a.jsx)(n.ZB,{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,a.jsx)(n.BT,{className:"text-lg",children:"Platform moderation, user management, and quality control tools."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["This area is for platform administrators to manage users, content, and ensure the smooth operation of FindAChef.",!t&&(0,a.jsx)("span",{className:"text-destructive font-semibold",children:" (Note: Your current account does not have admin privileges. Actions will be disabled.)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Intended Features & Responsibilities:"}),(0,a.jsx)("ul",{className:"space-y-3",children:eH.sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,a.jsxs)("li",{className:"flex items-start text-foreground/90 p-3 bg-muted/30 rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]})]},e.name))})]})]})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(D.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"group users"})," All Platform Users"]}),(0,a.jsx)(n.BT,{children:"View and manage all registered users on the platform."})]}),(0,a.jsx)(n.Wu,{children:p?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading users..."})]}):0===s.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No users found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Name"}),(0,a.jsx)(i.nd,{children:"Email"}),(0,a.jsx)(i.nd,{children:"Role"}),(0,a.jsx)(i.nd,{children:"Account Status"}),(0,a.jsx)(i.nd,{children:"Joined"}),(0,a.jsx)(i.nd,{children:"Chef Approved"}),(0,a.jsx)(i.nd,{children:"Chef Subscribed"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:s.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.name||"N/A"}),(0,a.jsx)(i.nA,{children:e.email}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"chef"===e.role?"default":"admin"===e.role?"destructive":"secondary",className:"capitalize text-xs",children:e.role||"N/A"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:eT(e.accountStatus),className:"capitalize text-xs",children:e.accountStatus||"N/A"})}),(0,a.jsx)(i.nA,{className:"text-xs",children:e.createdAt?(0,G.GP)(new Date(e.createdAt),"PP"):"N/A"}),(0,a.jsx)(i.nA,{children:"chef"===e.role?e.isApproved?(0,a.jsx)(d.E,{variant:"default",className:"bg-green-500 hover:bg-green-600 text-xs",children:"Approved"}):(0,a.jsx)(d.E,{variant:"destructive",className:"text-xs",children:"Pending"}):(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:"N/A"})}),(0,a.jsx)(i.nA,{children:eF(e)}),(0,a.jsxs)(i.nA,{children:["chef"===e.role&&!e.isApproved&&(0,a.jsx)(U.Bc,{children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eS(e.id),disabled:!t||eu===e.id,className:"bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-1",children:[eu===e.id?(0,a.jsx)(m.A,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(T.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"ml-1",children:"Approve"})]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eq(e.id),disabled:!t||eu===e.id,className:"bg-red-500 hover:bg-red-600 text-white text-xs px-2 py-1",children:[eu===e.id?(0,a.jsx)(m.A,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(H.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"ml-1",children:"Reject"})]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})}),"chef"===e.role&&e.isApproved&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No approval actions"}),"chef"!==e.role&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"N/A"})]})]},e.id))})]})})})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg mb-8",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(F.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"restaurant menu"})," All Platform Menus"]}),(0,a.jsx)(n.BT,{children:"Review and manage all menus created by chefs."})]}),(0,a.jsx)(n.Wu,{children:en?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading menus..."})]}):0===ea.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No menus found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Menu Title"}),(0,a.jsx)(i.nd,{children:"Chef Name"}),(0,a.jsx)(i.nd,{children:"Cuisine"}),(0,a.jsx)(i.nd,{className:"text-right",children:"Price/Head"}),(0,a.jsx)(i.nd,{children:"Public"}),(0,a.jsx)(i.nd,{children:"Admin Status"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:ea.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.title}),(0,a.jsx)(i.nA,{children:e.chefName||"N/A"}),(0,a.jsx)(i.nA,{children:e.cuisine}),(0,a.jsxs)(i.nA,{className:"text-right",children:["$",e.pricePerHead.toFixed(2)]}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:e.isPublic?"default":"secondary",className:"text-xs",children:e.isPublic?"Yes":"No"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"approved"===e.adminStatus?"default":"rejected"===e.adminStatus?"destructive":"secondary",className:`text-xs capitalize ${"approved"===e.adminStatus?"bg-green-500 hover:bg-green-600":""}`,children:e.adminStatus||"Pending"})}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>eD(e),className:"text-xs",disabled:!t||eu===e.id,children:[eu===e.id&&eC?.id===e.id?(0,a.jsx)(m.A,{className:"h-3 w-3 animate-spin mr-1"}):(0,a.jsx)(Z.A,{className:"h-3 w-3 mr-1"})," Review"]})})]},e.id))})]})})})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(B.A,{className:"mr-2 h-6 w-6 text-primary","data-ai-hint":"message send"})," All Customer Requests"]}),(0,a.jsx)(n.BT,{children:"Review all event requests made by customers."})]}),(0,a.jsx)(n.Wu,{children:eo?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-muted-foreground",children:"Loading customer requests..."})]}):0===ed.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No customer requests found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Request ID"}),(0,a.jsx)(i.nd,{children:"Event Type"}),(0,a.jsx)(i.nd,{children:"Customer ID"}),(0,a.jsx)(i.nd,{children:"Event Date"}),(0,a.jsx)(i.nd,{className:"text-right",children:"PAX"}),(0,a.jsx)(i.nd,{className:"text-right",children:"Budget"}),(0,a.jsx)(i.nd,{children:"Status"}),(0,a.jsx)(i.nd,{children:"Mod. Status"}),(0,a.jsx)(i.nd,{children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:ed.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsxs)(i.nA,{className:"font-mono text-xs",children:[e.id.substring(0,8),"..."]}),(0,a.jsx)(i.nA,{className:"font-medium",children:e.eventType}),(0,a.jsxs)(i.nA,{className:"text-xs",children:[e.customerId.substring(0,8),"..."]}),(0,a.jsx)(i.nA,{className:"text-xs",children:e.eventDate?(0,G.GP)(new Date(e.eventDate),"PP"):"N/A"}),(0,a.jsx)(i.nA,{className:"text-right",children:e.pax}),(0,a.jsxs)(i.nA,{className:"text-right",children:["$",e.budget.toFixed(2)]}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"booked"===e.status||"customer_confirmed"===e.status?"default":"cancelled_by_customer"===e.status||"chef_declined"===e.status||"proposal_declined"===e.status||"payment_failed"===e.status?"destructive":"secondary",className:"capitalize text-xs",children:e.status?.replace(/_/g," ")||"Unknown"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(d.E,{variant:"resolved"===e.moderationStatus?"default":"customer_suspended"===e.moderationStatus?"destructive":"secondary",className:"capitalize text-xs",children:e.moderationStatus?.replace(/_/g," ")||"Pending"})}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>ez(e),className:"text-xs",disabled:!t||eu===e.id,children:[eu===e.id&&ex?.id===e.id?(0,a.jsx)(m.A,{className:"h-3 w-3 animate-spin mr-1"}):(0,a.jsx)(Z.A,{className:"h-3 w-3 mr-1"})," View/Moderate"]})})]},e.id))})]})})})]}),ex&&ep&&(0,a.jsx)(X,{open:ep,onOpenChange:e=>{!e&&eA&&(eA(),eA=null),eh(e),e||ef(null)},children:(0,a.jsxs)(ee,{className:"sm:max-w-2xl",children:[(0,a.jsx)(Y,{children:(0,a.jsxs)(J,{children:["View Customer Request Details - ID: ",ex.id.substring(0,8),"..."]})}),(0,a.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 p-1",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Request Information:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Event Type:"})," ",ex.eventType]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Customer ID:"})," ",(0,a.jsx)("span",{className:"font-mono text-xs",children:ex.customerId})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Event Date:"})," ",ex.eventDate?(0,G.GP)(new Date(ex.eventDate),"PPP"):"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",ex.pax]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Budget:"})," $",ex.budget.toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Cuisine:"})," ",ex.cuisinePreference]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",(0,a.jsx)(d.E,{variant:"booked"===ex.status?"default":"secondary",className:"capitalize text-xs",children:ex.status?.replace(/_/g," ")||"Unknown"})]}),ex.location&&(0,a.jsxs)("p",{className:"col-span-2",children:[(0,a.jsx)("strong",{children:"Location:"})," ",ex.location]}),ex.notes&&(0,a.jsxs)("p",{className:"col-span-2",children:[(0,a.jsx)("strong",{children:"Notes:"})," ",ex.notes]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Moderation Status:"})," ",(0,a.jsx)(d.E,{variant:"resolved"===ex.moderationStatus?"default":"customer_suspended"===ex.moderationStatus?"destructive":"secondary",className:"capitalize text-xs",children:ex.moderationStatus?.replace(/_/g," ")||"Pending Review"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(c.J,{htmlFor:"adminNotesRequest",children:"Admin Notes:"}),(0,a.jsx)(u.T,{id:"adminNotesRequest",value:eb,onChange:e=>eN(e.target.value),placeholder:"Internal notes for this request...",className:"mt-1",disabled:!t||!!eu})]}),(0,a.jsxs)("h4",{className:"font-semibold mt-4 pt-2 border-t",children:["Messages (",ej.length,"):"]}),ey?(0,a.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin"})," Loading messages..."]}):ej.length>0?(0,a.jsx)("div",{className:"space-y-2 text-xs max-h-48 overflow-y-auto border p-2 rounded-md bg-muted/30",children:ej.map(e=>(0,a.jsxs)("div",{className:"p-1.5 rounded-md bg-background shadow-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.senderName||e.senderRole," (",e.senderRole?.startsWith("customer")?"Cust.":e.senderRole?.startsWith("chef")?"Chef":"Sys.","):"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:e.text}),(0,a.jsx)("p",{className:"text-right text-muted-foreground/70 text-[10px]",children:e.timestamp?(0,G.GP)(new Date(e.timestamp),"PP p"):"N/A"})]},e.id))}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No messages for this request."})]}),(0,a.jsxs)(K,{className:"mt-4",children:[(0,a.jsx)(Q,{asChild:!0,children:(0,a.jsx)(l.$,{type:"button",variant:"outline",disabled:!!eu,children:"Close"})}),(0,a.jsxs)(U.Bc,{children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eI(ex.id,"resolved"),variant:"default",disabled:!t||!!eu||"resolved"===ex.moderationStatus,children:[eu===ex.id&&"resolved"===ex.moderationStatus?(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Mark as Resolved"]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eI(ex.id,"customer_warned",ex.customerId),variant:"outline",disabled:!t||!!eu||"customer_warned"===ex.moderationStatus,children:[eu===ex.id&&"customer_warned"===ex.moderationStatus?(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Warn Customer"]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eI(ex.id,"customer_suspended",ex.customerId),variant:"destructive",disabled:!t||!!eu||"customer_suspended"===ex.moderationStatus,children:[eu===ex.id&&"customer_suspended"===ex.moderationStatus?(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Suspend Customer"]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})]})]})}),eC&&ew&&(0,a.jsx)(X,{open:ew,onOpenChange:ek,children:(0,a.jsxs)(et,{className:"sm:max-w-lg",children:[(0,a.jsxs)(Y,{children:[(0,a.jsxs)(J,{children:["Review Menu: ",eC.title]}),eC.imageUrl&&(0,a.jsx)("div",{className:"my-2 rounded-md overflow-hidden aspect-video relative",children:(0,a.jsx)(W.default,{src:eC.imageUrl,alt:eC.title,layout:"fill",objectFit:"cover","data-ai-hint":eC.dataAiHint||"menu food item"})})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1 max-h-[50vh] overflow-y-auto p-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Chef:"})," ",eC.chefName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Cuisine:"})," ",eC.cuisine]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Price/Head:"})," $",eC.pricePerHead.toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",eC.pax||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",eC.description]}),eC.dietaryInfo&&eC.dietaryInfo.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Dietary:"})," ",eC.dietaryInfo.join(", ")]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Public:"})," ",eC.isPublic?"Yes":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Admin Status:"})," ",(0,a.jsx)(d.E,{variant:"approved"===eC.adminStatus?"default":"rejected"===eC.adminStatus?"destructive":"secondary",className:`capitalize text-xs ${"approved"===eC.adminStatus?"bg-green-500 hover:bg-green-600":""}`,children:eC.adminStatus})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(c.J,{htmlFor:"adminNotesMenu",children:"Admin Notes:"}),(0,a.jsx)(u.T,{id:"adminNotesMenu",value:eP,onChange:e=>eR(e.target.value),placeholder:"Internal notes for this menu...",className:"mt-1",disabled:!t||!!eu})]})]}),(0,a.jsxs)(K,{className:"mt-4",children:[(0,a.jsx)(Q,{asChild:!0,children:(0,a.jsx)(l.$,{type:"button",variant:"outline",disabled:!!eu,children:"Close"})}),(0,a.jsxs)(U.Bc,{children:[(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>e_(eC.id),variant:"default",disabled:!t||!!eu||"approved"===eC.adminStatus,children:[eu===eC.id&&"approved"===eC.adminStatus?(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Approve"]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]}),(0,a.jsxs)(U.m_,{children:[(0,a.jsx)(U.k$,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>eE(eC.id),variant:"destructive",disabled:!t||!!eu||"rejected"===eC.adminStatus,children:[eu===eC.id&&"rejected"===eC.adminStatus?(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Reject"]})}),!t&&(0,a.jsx)(U.ZI,{children:(0,a.jsx)("p",{children:"Admin privileges required."})})]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-8 p-4 border-l-4 border-yellow-500 bg-yellow-500/10 rounded-md",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-700",children:"Development Note:"}),(0,a.jsx)("p",{className:"text-sm text-yellow-600",children:"Admin actions now update Firestore. Full admin functionality, including secure role-based access control (preventing non-admins from performing actions even if buttons were enabled via client-side manipulation), and detailed audit logs, requires robust backend logic and Firebase Security Rules that verify admin custom claims for write operations."})]})]})}},56780:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(81208);function r(e){let{reason:t,children:s}=e;throw Object.defineProperty(new a.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},58728:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]])},61193:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(60687);s(43210);var r=s(16189),n=s(11516),i=s(86447),d=s(69678),l=s(18780),o=s(44493),c=s(29523),u=s(29867);let m=(0,s(30036).default)(async()=>{},{loadableGenerated:{modules:["app/admin/layout.tsx -> @/components/dashboard-layout"]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,a.jsx)(n.A,{className:"h-12 w-12 animate-spin text-primary"})," Loading Admin Layout..."]})}),p=[{href:"/admin",label:"Overview & Mgmt",icon:(0,a.jsx)(i.A,{}),matchExact:!0}];function h({children:e}){let t=(0,r.useRouter)(),{user:s,isAdmin:i,loading:h,profileLoading:x}=(0,l.A)(),{toast:f}=(0,u.dj)();return h||x?(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,a.jsx)(n.A,{className:"h-12 w-12 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,a.jsx)("p",{className:"ml-3 text-lg",children:"Loading Admin Area..."})]}):s&&i?(0,a.jsx)(m,{navItems:p,children:e}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:(0,a.jsxs)(o.Zp,{className:"w-full max-w-md text-center shadow-lg",children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10 text-destructive",children:(0,a.jsx)(d.A,{className:"h-8 w-8","data-ai-hint":"security shield alert"})}),(0,a.jsx)(o.ZB,{className:"text-2xl",children:"Access Denied"})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"You do not have the necessary permissions to view this page. You will be redirected shortly."}),(0,a.jsx)(c.$,{onClick:()=>t.push("/"),children:"Go to Homepage"})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64571:(e,t,s)=>{Promise.resolve().then(s.bind(s,56500))},64777:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return d}});let a=s(60687),r=s(51215),n=s(29294),i=s(19587);function d(e){let{moduleIds:t}=e,s=n.workAsyncStorage.getStore();if(void 0===s)return null;let d=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files;d.push(...t)}}return 0===d.length?null:(0,a.jsx)(a.Fragment,{children:d.map(e=>{let t=s.assetPrefix+"/_next/"+(0,i.encodeURIPath)(e);return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,r.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},64963:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=s(60687),r=s(43210),n=s(56780),i=s(64777);function d(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},o=function(e){let t={...l,...e},s=(0,r.lazy)(()=>t.loader().then(d)),o=t.loading;function c(e){let d=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,c=l?r.Suspense:r.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.PreloadChunks,{moduleIds:t.modules}),(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...l?{fallback:d}:{},children:u})}return c.displayName="LoadableComponent",c}},68514:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=s(65239),r=s(48088),n=s(88170),i=s.n(n),d=s(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1132)),"/home/user/studio/src/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"/home/user/studio/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32416)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/admin/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},69678:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},76242:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>d,ZI:()=>c,k$:()=>o,m_:()=>l});var a=s(60687),r=s(43210),n=s(9989),i=s(4780);let d=n.Kq,l=n.bL,o=n.l9,c=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>(0,a.jsx)(n.UC,{ref:r,sideOffset:t,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));c.displayName=n.UC.displayName},76311:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},78148:(e,t,s)=>{"use strict";s.d(t,{b:()=>d});var a=s(43210),r=s(14163),n=s(60687),i=a.forwardRef((e,t)=>(0,n.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var d=i},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var a=s(60687),r=s(43210),n=s(78148),i=s(24224),d=s(4780);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.b,{ref:s,className:(0,d.cn)(l(),e),...t}));o.displayName=n.b.displayName},81630:e=>{"use strict";e.exports=require("http")},85866:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},86447:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},91645:e=>{"use strict";e.exports=require("net")},92964:(e,t,s)=>{Promise.resolve().then(s.bind(s,99111))},94735:e=>{"use strict";e.exports=require("events")},96834:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var a=s(60687);s(43210);var r=s(24224),n=s(4780);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},97025:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},99111:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/layout.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4447,8176,1658,474,399,3437,5509,9989,2628],()=>s(68514));module.exports=a})();