(()=>{var e={};e.id=8415,e.ids=[8415],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},10022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14737:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/chef/dashboard/calendar/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/chef/dashboard/calendar/page.tsx","default")},16963:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/chef/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/chef/dashboard/layout.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},19790:(e,t,s)=>{Promise.resolve().then(s.bind(s,14737))},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30769:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(60687);s(43210);var r=s(16189),n=s(49625),i=s(86356),o=s(58887),d=s(92834),l=s(65777),c=s(4643),m=s(71057),u=s(9501),x=s(60805),h=s(10022),p=s(72840),f=s(29867),g=s(18780),v=s(44493),j=s(29523),b=s(33784),y=s(24052),w=s(41862);let N=(0,s(30036).default)(async()=>{},{loadableGenerated:{modules:["app/chef/dashboard/layout.tsx -> @/components/dashboard-layout"]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 animate-spin text-primary"})," Loading Dashboard..."]})}),k=[{href:"/chef/dashboard",label:"Overview",icon:(0,a.jsx)(n.A,{}),matchExact:!0},{href:"/chef/dashboard/profile",label:"My Profile",icon:(0,a.jsx)(i.A,{})},{href:"/chef/dashboard/requests",label:"Requests",icon:(0,a.jsx)(o.A,{})},{href:"/chef/dashboard/calendar",label:"Calendar & Events",icon:(0,a.jsx)(d.A,{})},{href:"/wall",label:"The Chef's Wall",icon:(0,a.jsx)(l.A,{})},{href:"/chef/dashboard/menus",label:"Menus",icon:(0,a.jsx)(c.A,{})},{href:"/chef/dashboard/shopping-list",label:"Shopping List",icon:(0,a.jsx)(m.A,{})},{href:"/chef/dashboard/chefs",label:"Chef Directory",icon:(0,a.jsx)(u.A,{})},{href:"/chef/dashboard/collaborations",label:"Collaborations",icon:(0,a.jsx)(x.A,{})},{href:"/chef/dashboard/receipts",label:"Receipts & Costs",icon:(0,a.jsx)(h.A,{})}];function C({children:e}){let t=(0,r.useRouter)(),{toast:s}=(0,f.dj)(),{user:n,userProfile:i,loading:o,isChef:d,isChefApproved:l,profileLoading:c}=(0,g.A)();return o||c?(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center bg-background",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,a.jsx)("p",{className:"ml-3 text-lg text-foreground",children:"Loading Chef Dashboard..."})]}):n&&d?l||i&&"admin"===i.role?(0,a.jsx)(N,{navItems:k,children:e}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:(0,a.jsxs)(v.Zp,{className:"w-full max-w-md text-center shadow-lg",children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)("div",{className:"mx-auto mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-yellow-500/10 text-yellow-600",children:(0,a.jsx)(p.A,{className:"h-8 w-8","data-ai-hint":"security shield alert"})}),(0,a.jsx)(v.ZB,{className:"text-2xl",children:"Account Pending Approval"})]}),(0,a.jsxs)(v.Wu,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Thank you for signing up! Your chef profile is currently under review by our team. You will be notified once your account is approved. This can take up to 48 hours."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"If you have any questions, please contact support."}),(0,a.jsx)(j.$,{onClick:async()=>{try{await (0,y.CI)(b.j2),s({title:"Logged Out",description:"You have been logged out."})}catch(e){console.error("Error signing out:",e),s({title:"Logout Error",description:`Could not log out: ${e.message}`,variant:"destructive"})}t.push("/login")},children:"Back to Login"})]})]})}):(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center bg-background",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-3 text-lg text-foreground",children:"Verifying chef access..."})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},41312:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},43649:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>o,wL:()=>m});var a=s(60687),r=s(43210),n=s(4780);let i=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},48754:(e,t,s)=>{"use strict";s.d(t,{V:()=>l});var a=s(60687);s(43210);var r=s(47033),n=s(14952),i=s(40871),o=s(4780),d=s(29523);function l({className:e,classNames:t,showOutsideDays:s=!0,...l}){return(0,a.jsx)(i.hv,{showOutsideDays:s,className:(0,o.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:e,...t})=>(0,a.jsx)(r.A,{className:(0,o.cn)("h-4 w-4",e),...t}),IconRight:({className:e,...t})=>(0,a.jsx)(n.A,{className:(0,o.cn)("h-4 w-4",e),...t})},...l})}l.displayName="Calendar"},55511:e=>{"use strict";e.exports=require("crypto")},56490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var a=s(65239),r=s(48088),n=s(88170),i=s.n(n),o=s(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l={children:["",{children:["chef",{children:["dashboard",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,14737)),"/home/user/studio/src/app/chef/dashboard/calendar/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,16963)),"/home/user/studio/src/app/chef/dashboard/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32416)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/chef/dashboard/calendar/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/chef/dashboard/calendar/page",pathname:"/chef/dashboard/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},59542:(e,t,s)=>{Promise.resolve().then(s.bind(s,59889))},59889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var a=s(60687),r=s(43210),n=s(48754),i=s(44493),o=s(96834);s(58261);var d=s(47141),l=s(43559),c=s(37074),m=s(58682),u=s(41862),x=s(96882),h=s(5336),p=s(62688);let f=(0,p.A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var g=s(43649),v=s(92834);let j=(0,p.A)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var b=s(41312),y=s(23928),w=s(94577),N=s(97992),k=s(46234);let C=(0,p.A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var A=s(10022),D=s(29523),M=s(93500),E=s(89667),P=s(80013),q=s(29867),I=s(18780),S=s(33784),R=s(75535),_=s(30036);let B=(0,_.default)(async()=>{},{loadableGenerated:{modules:["app/chef/dashboard/calendar/page.tsx -> html5-qrcode"]},ssr:!1,loading:()=>(0,a.jsx)(u.A,{className:"h-4 w-4 animate-spin"})}),z=(0,_.default)(async()=>{},{loadableGenerated:{modules:["app/chef/dashboard/calendar/page.tsx -> @/components/booking-invoice-dialog"]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 animate-spin inline-block"})," Loading invoice viewer..."]})});function L(){let{user:e,userProfile:t,authLoading:s}=(0,I.A)(),[p,_]=(0,r.useState)(new Date),[L,H]=(0,r.useState)([]),[$,Z]=(0,r.useState)([]),[G,W]=(0,r.useState)(!0),[T,O]=(0,r.useState)(!1),[V,F]=(0,r.useState)(null),[Q,Y]=(0,r.useState)(!1),{toast:U}=(0,q.dj)(),[J,X]=(0,r.useState)(!1),[K,ee]=(0,r.useState)(""),[et,es]=(0,r.useState)(null),ea=(0,r.useRef)(null),[er,en]=(0,r.useState)(null),[ei,eo]=(0,r.useState)(null),[ed,el]=(0,r.useState)(!1),[ec,em]=(0,r.useState)(null),[eu,ex]=(0,r.useState)(!1);(0,r.useCallback)(e=>{er&&er.isScanning&&er.stop().catch(e=>console.warn("Error stopping QR scanner after scan:",e)),X(!1),et&&e===et.bookingId?eh(et):et&&e===et.id&&!et.bookingId?(console.warn("Comparing decodedBookingId with eventToComplete.id as bookingId is missing on event."),eh(et)):U({title:"QR Code Mismatch",description:"The scanned QR code does not match the selected event's Booking ID. Please try again or use manual entry.",variant:"destructive",duration:7e3}),es(null)},[er,et,U]);let eh=(0,r.useCallback)(async t=>{let s=t.bookingId||t.id;if(!e||!s)return void U({title:"Error",description:"Booking ID is required to complete the event.",variant:"destructive"});Y(!0),U({title:"Processing Event Completion...",description:`Marking event for booking ${s.substring(0,6)}... as complete.`});try{let a=(0,R.wP)(S.db),r=(0,R.H9)(S.db,"bookings",s);a.update(r,{status:"completed",qrCodeScannedAt:(0,R.O5)(),updatedAt:(0,R.O5)()});let n=(0,R.H9)(S.db,`users/${e.uid}/calendarEvents`,t.id);a.update(n,{status:"Completed",updatedAt:(0,R.O5)()}),await a.commit(),U({title:"Event Marked as Complete!",description:`Event for booking ${s.substring(0,6)}... status updated. Final payout process initiated (simulated).`,duration:7e3}),X(!1),es(null)}catch(e){console.error("Error processing event completion:",e),U({title:"Error",description:"Could not mark event as complete. Please try again.",variant:"destructive"})}finally{Y(!1)}},[e,U]),ep=(0,r.useMemo)(()=>p?L.filter(e=>e.date&&(0,d.f)(new Date(e.date))&&(0,l.r)(new Date(e.date),p)):[],[p,L]),ef=(0,r.useMemo)(()=>{if(!p)return!1;let e=(0,c.o)(p);return $.some(t=>(0,d.f)(t)&&(0,l.r)(t,e))},[p,$]),eg=e=>{if(!e)return"outline";switch(e){case"Confirmed":return"default";case"Pending":case"Completed":return"secondary";case"Cancelled":return"destructive";default:return"outline"}},ev=e=>{if(!e)return(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1.5"});switch(e){case"Confirmed":return(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1.5 text-green-600"});case"Pending":return(0,a.jsx)(f,{className:"h-4 w-4 mr-1.5 text-yellow-600"});case"Cancelled":return(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1.5 text-red-600"});case"WallEvent":return(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1.5 text-blue-500"});case"Completed":return(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1.5 text-green-700"});default:return(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1.5"})}},ej=e=>{if(!(e.bookingId||e.id))return void U({title:"Error",description:"Event is missing a valid Booking ID.",variant:"destructive"});er&&er.isScanning&&er.stop().catch(e=>console.warn("Error stopping QR scanner before new scan:",e)),es(e),ee(""),X(!0)},eb=async()=>{let t;if(!e||!p)return void U({title:"No Date Selected",description:"Please select a date to block or unblock.",variant:"destructive"});Y(!0);let s=(0,c.o)(p),a=$.some(e=>(0,d.f)(e)&&(0,l.r)(e,s));t=[...new Set(t=a?$.filter(e=>(0,d.f)(e)&&!(0,l.r)(e,s)).map(e=>(0,m.GP)(e,"yyyy-MM-dd")):[...$,s].map(e=>(0,m.GP)(e,"yyyy-MM-dd")).sort())];try{let r=(0,R.H9)(S.db,"users",e.uid);await (0,R.mZ)(r,{blockedDates:t,updatedAt:(0,R.O5)()}),U({title:a?"Date Unblocked":"Date Blocked",description:`${(0,m.GP)(s,"PPP")} is now ${a?"available":"marked as unavailable."}`})}catch(e){console.error("Error updating blocked dates:",e),U({title:"Update Error",description:"Could not update blocked status.",variant:"destructive"})}finally{Y(!1)}},ey=e=>{F(e),O(!0)},ew=async e=>{let t=e.bookingId||e.id;if(!t)return void U({title:"Error",description:"Cannot view invoice. Event is missing a valid Booking ID.",variant:"destructive"});ex(!0),el(!0),em(null);try{let e=(0,R.H9)(S.db,"bookings",t),s=await (0,R.x7)(e);if(s.exists()){let e=s.data(),t={id:s.id,...e,eventDate:e.eventDate instanceof R.Dc?e.eventDate.toDate():new Date(e.eventDate),createdAt:e.createdAt instanceof R.Dc?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):void 0,updatedAt:e.updatedAt instanceof R.Dc?e.updatedAt.toDate():e.updatedAt?new Date(e.updatedAt):void 0,qrCodeScannedAt:e.qrCodeScannedAt instanceof R.Dc?e.qrCodeScannedAt.toDate():e.qrCodeScannedAt?new Date(e.qrCodeScannedAt):void 0};em(t)}else U({title:"Error",description:"Booking details not found for this event.",variant:"destructive"}),el(!1)}catch(e){console.error("Error fetching booking for invoice:",e),U({title:"Error",description:"Could not load booking details.",variant:"destructive"}),el(!1)}finally{ex(!1)}};return s||G?(0,a.jsxs)("div",{className:"flex justify-center items-center min-h-[calc(100vh-200px)]",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary","data-ai-hint":"loading spinner"}),(0,a.jsx)("p",{className:"ml-3 text-lg",children:"Loading calendar data..."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,a.jsx)(v.A,{className:"mr-3 h-8 w-8 text-primary","data-ai-hint":"calendar icon"})," My Calendar & Events"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)(D.$,{onClick:()=>{U({title:"Google Calendar Sync (Placeholder)",description:"This feature is a placeholder. Real integration requires backend setup and Google API integration."})},variant:"outline",className:"text-sm",children:[(0,a.jsxs)("svg",{className:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),(0,a.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),(0,a.jsx)("span",{children:"Sync with Google Calendar"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2 sm:mt-0 self-center",children:"Shared/Team calendars are coming soon!"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)(i.Zp,{className:"lg:col-span-1 shadow-md",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Select a Date"})}),(0,a.jsxs)(i.Wu,{className:"flex flex-col items-center",children:[(0,a.jsx)(n.V,{mode:"single",selected:p,onSelect:_,className:"rounded-md border",disabled:e=>e<(0,c.o)(new Date(new Date().setDate(new Date().getDate()-365)))||e>new Date(new Date().setDate(new Date().getDate()+730)),modifiers:{blocked:$.filter(e=>(0,d.f)(e))},modifiersStyles:{blocked:{textDecoration:"line-through",color:"hsl(var(--destructive))",backgroundColor:"hsl(var(--destructive) / 0.1)",opacity:.6}}}),(0,a.jsxs)(D.$,{onClick:eb,variant:"outline",className:"mt-4 w-full",disabled:Q,children:[Q&&p&&ef?(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(j,{className:"mr-2 h-4 w-4"}),ef?"Unblock Selected Date":"Block Selected Date"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Blocked dates will prevent new booking requests."})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold",children:["Events for: ",p&&(0,d.f)(p)?(0,m.GP)(p,"PPP"):"No date selected",p&&ef&&(0,a.jsx)(o.E,{variant:"destructive",className:"ml-2",children:"Date Blocked"})]}),p&&ef&&0===ep.length&&(0,a.jsx)(i.Zp,{className:"text-center py-12 border-dashed border-destructive/50 bg-destructive/5",children:(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(j,{className:"mx-auto h-12 w-12 text-destructive mb-3","data-ai-hint":"blocked warning"}),(0,a.jsx)("p",{className:"text-destructive font-semibold",children:"This date is marked as unavailable."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You will not receive new requests for this date."})]})}),ep.length>0?ep.map(e=>(0,a.jsxs)(i.Zp,{className:`shadow-lg border-l-4 ${"Confirmed"===e.status?"border-green-500":"Pending"===e.status?"border-yellow-500":"Cancelled"===e.status?"border-red-500":"WallEvent"===e.status?"border-blue-500":"Completed"===e.status?"border-green-700":"border-gray-300"}`,children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)(i.ZB,{className:"text-xl",children:e.title}),(0,a.jsxs)(o.E,{variant:eg(e.status),className:"flex items-center text-xs capitalize",children:[ev(e.status),"WallEvent"===e.status?"My Wall Event":e.status]})]}),e.customerName&&(0,a.jsxs)(i.BT,{children:["For: ",e.customerName]})]}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"people group"}),"PAX: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.pax})]}),(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2 text-green-600","data-ai-hint":"money dollar"}),"Price: ",(0,a.jsxs)("span",{className:"font-medium text-foreground ml-1",children:["$",e.pricePerHead?e.pricePerHead.toFixed(2):"N/A","/head"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2 text-primary","data-ai-hint":"cutlery food"}),"Menu: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.menuName})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground col-span-full sm:col-span-1",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2 text-red-500","data-ai-hint":"location map"}),"Location: ",(0,a.jsx)("span",{className:"font-medium text-foreground ml-1",children:e.location})]})]}),e.notes&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Notes:"]}),(0,a.jsx)("p",{className:"text-sm bg-muted/50 p-2 rounded-md",children:e.notes})]}),e.coChefs&&e.coChefs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-xs font-semibold text-muted-foreground mb-0.5 flex items-center",children:[(0,a.jsx)(k.A,{className:"h-3 w-3 mr-1"}),"Co-Chefs:"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.coChefs.map(e=>(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),e.weather&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center",children:[(0,a.jsx)(C,{className:"h-3 w-3 mr-1 text-yellow-500","data-ai-hint":"sun weather"}),"Weather: ",e.weather]}),e.toolsNeeded&&e.toolsNeeded.length>0&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Tools Checklist: ",e.toolsNeeded.join(", ")]})]}),(0,a.jsxs)(i.wL,{className:"flex flex-col items-start space-y-2 pt-4 border-t",children:["Confirmed"===e.status&&!e.isWallEvent&&(e.bookingId||e.id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Event Completion:"})," Customer will provide a QR code with Booking ID ",(0,a.jsxs)("span",{className:"font-mono text-primary/80 text-[10px]",children:["(",(e.bookingId||e.id).substring(0,6),"...)"]}),". Scan it or enter manually to confirm completion and initiate the release of the remaining 50% of your funds."]}),(0,a.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>ej(e),className:"w-full sm:w-auto",disabled:Q,children:[Q&&et?.id===e.id?(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-qr-code mr-2 h-4 w-4",children:[(0,a.jsx)("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),(0,a.jsx)("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),(0,a.jsx)("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),(0,a.jsx)("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),(0,a.jsx)("path",{d:"M21 21v.01"}),(0,a.jsx)("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),(0,a.jsx)("path",{d:"M3 12h.01"}),(0,a.jsx)("path",{d:"M12 3h.01"}),(0,a.jsx)("path",{d:"M12 16v.01"}),(0,a.jsx)("path",{d:"M16 12h.01"}),(0,a.jsx)("path",{d:"M21 12v.01"}),(0,a.jsx)("path",{d:"M12 21v-3a2 2 0 0 0-2-2H7"}),(0,a.jsx)("path",{d:"M7 21h3a2 2 0 0 0 2-2v-3"}),(0,a.jsx)("path",{d:"M16 7h3a2 2 0 0 1 2 2v3"}),(0,a.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),"Scan QR / Enter ID"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 w-full pt-2 border-t mt-2",children:[(0,a.jsx)(D.$,{variant:"outline",size:"sm",onClick:()=>ey(e),className:"flex-1 min-w-[150px]",children:"View Event Details"}),("Confirmed"===e.status||"Completed"===e.status)&&!e.isWallEvent&&(e.bookingId||e.id)&&(0,a.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>ew(e),className:"flex-1 min-w-[150px]",children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"})," View Invoice"]})]}),"Cancelled"===e.status&&(0,a.jsx)("p",{className:"text-xs text-destructive",children:"This event has been cancelled."}),"Completed"===e.status&&(0,a.jsx)("p",{className:"text-xs text-green-700 font-medium",children:"This event has been marked as completed."})]})]},e.id)):p&&!ef&&(0,a.jsx)(i.Zp,{className:"text-center py-12 border-dashed",children:(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(v.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar empty"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No events scheduled for this day."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select another date to view events or manage your availability."})]})}),!p&&(0,a.jsx)(i.Zp,{className:"text-center py-12 border-dashed",children:(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)(v.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-3","data-ai-hint":"calendar select"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please select a date to view events or manage availability."})]})})]})]}),(0,a.jsx)(M.Lt,{open:T,onOpenChange:O,children:(0,a.jsxs)(M.EO,{className:"sm:max-w-lg",children:[(0,a.jsx)(M.wd,{children:(0,a.jsx)(M.r7,{children:V?.title||"Event Details"})}),V?(0,a.jsxs)("div",{className:"space-y-3 text-sm max-h-[60vh] overflow-y-auto p-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",V.date&&(0,d.f)(new Date(V.date))?(0,m.GP)(new Date(V.date),"PPP p"):"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",(0,a.jsx)(o.E,{variant:eg(V.status),className:"text-xs capitalize",children:"WallEvent"===V.status?"My Wall Event":V.status})]}),V.customerName&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Customer:"})," ",V.customerName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"PAX:"})," ",V.pax]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Menu:"})," ",V.menuName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Price:"})," $",V.pricePerHead?V.pricePerHead.toFixed(2):"N/A","/head"]}),V.location&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Location:"})," ",V.location]}),V.notes&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Notes:"})," ",V.notes]}),V.coChefs&&V.coChefs.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Co-Chefs:"})," ",V.coChefs.join(", ")]}),V.weather&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Weather Forecast:"})," ",V.weather]}),V.toolsNeeded&&V.toolsNeeded.length>0&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tools Needed:"})," ",V.toolsNeeded.join(", ")]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Event ID: ",V.id," ",V.bookingId&&`(Booking ID: ${V.bookingId})`]})]}):M.$v&&(0,a.jsx)(M.$v,{children:"Loading event details..."}),(0,a.jsx)(M.ck,{children:(0,a.jsx)(M.Zr,{children:"Close"})})]})}),(0,a.jsx)(M.Lt,{open:J,onOpenChange:X,children:(0,a.jsxs)(M.EO,{className:"sm:max-w-md",children:[(0,a.jsxs)(M.wd,{children:[(0,a.jsx)(M.r7,{children:"Scan Customer QR / Enter Booking ID"}),M.$v&&(0,a.jsxs)(M.$v,{children:["Point camera at QR code or manually enter Booking ID ",(0,a.jsxs)("span",{className:"font-mono text-xs text-primary/90",children:["(",et?.bookingId?.substring(0,6)||et?.id.substring(0,6),"...)"]}),"."]})]}),B&&(0,a.jsxs)("div",{id:"qr-reader",ref:ea,className:"w-full aspect-square bg-muted rounded-md my-2 border",children:[ei&&(0,a.jsx)("p",{className:"text-destructive text-sm p-2 text-center",children:ei}),!ei&&(0,a.jsx)("p",{className:"text-muted-foreground text-sm p-2 text-center",children:"Initializing camera... Grant permission if prompted."})]}),(0,a.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,a.jsx)(P.J,{htmlFor:"bookingIdInputManual",children:"Manual Booking ID Entry (if scan fails)"}),(0,a.jsx)(E.p,{id:"bookingIdInputManual",placeholder:"Enter Full Booking ID from customer",value:K,onChange:e=>ee(e.target.value),disabled:Q})]}),(0,a.jsxs)(M.ck,{className:"mt-4",children:[(0,a.jsx)(M.Zr,{onClick:()=>{er&&er.isScanning&&er.stop().catch(e=>console.warn("Error stopping scanner on cancel:",e)),es(null),X(!1)},disabled:Q,children:"Cancel"}),(0,a.jsxs)(M.Rx,{onClick:()=>{if(!et)return;let e=et.bookingId||et.id;K.trim()===e?eh(et):U({title:"Booking ID Mismatch",description:"Manually entered ID does not match the event's Booking ID.",variant:"destructive"})},disabled:Q||!K.trim(),children:[Q?(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Confirm with Entered ID"]})]})]})}),z&&(0,a.jsx)(z,{isOpen:ed,onOpenChange:el,booking:ec,customerName:ec?.customerName||t?.name||"Customer"})]})}},60806:(e,t,s)=>{Promise.resolve().then(s.bind(s,16963))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78148:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s(43210),r=s(14163),n=s(60687),i=a.forwardRef((e,t)=>(0,n.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},78958:(e,t,s)=>{Promise.resolve().then(s.bind(s,30769))},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var a=s(60687),r=s(43210),n=s(78148),i=s(24224),o=s(4780);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.b,{ref:s,className:(0,o.cn)(d(),e),...t}));l.displayName=n.b.displayName},81630:e=>{"use strict";e.exports=require("http")},89667:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(60687),r=s(43210),n=s(4780);let i=r.forwardRef(({className:e,type:t,...s},r)=>(0,a.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));i.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},93500:(e,t,s)=>{"use strict";s.d(t,{$v:()=>f,EO:()=>u,Lt:()=>d,Rx:()=>g,Zr:()=>v,ck:()=>h,r7:()=>p,tv:()=>l,wd:()=>x});var a=s(60687),r=s(43210),n=s(97895),i=s(4780),o=s(29523);let d=n.bL,l=n.l9,c=n.ZL,m=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));m.displayName=n.hJ.displayName;let u=r.forwardRef(({className:e,...t},s)=>(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(n.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));u.displayName=n.UC.displayName;let x=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});x.displayName="AlertDialogHeader";let h=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});h.displayName="AlertDialogFooter";let p=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",e),...t}));p.displayName=n.hE.displayName;let f=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));f.displayName=n.VY.displayName;let g=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.rc,{ref:s,className:(0,i.cn)((0,o.r)(),e),...t}));g.displayName=n.rc.displayName;let v=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.ZD,{ref:s,className:(0,i.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));v.displayName=n.ZD.displayName},94577:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]])},94735:e=>{"use strict";e.exports=require("events")},96834:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s(60687);s(43210);var r=s(24224),n=s(4780);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},97992:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4447,8786,1658,7888,399,8682,7895,5386,4825,2628],()=>s(56490));module.exports=a})();